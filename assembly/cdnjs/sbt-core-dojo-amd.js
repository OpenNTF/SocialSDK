//>>built
require({cache:{"sbt/connections/BlogService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./BlogConstants,./ConnectionsService,../base/AtomEntity,../base/XmlDataHandler,./Tag,./BlogPost".split(","),function(i,h,c,d,b,a,g,j,k,o,p){CategoryTmpl='<category term="${tag}"></category>';var m=i(j,{xpath:a.BlogXPath,namespaces:a.BlogNamespaces,categoryScheme:'<category term="blog" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',constructor:function(){},getHandle:function(){return this.getAsString("handle")},
setHandle:function(a){return this.setAsString("handle",a)},getBlogUuid:function(){var a=this.getAsString("blogUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:blog-")&&(a=a.substring(28,a.length));return a},setBlogUuid:function(a){return this.setAsString("blogUuid",a)},getBlogUrl:function(){return this.getAsString("alternateUrl")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},
getContainerUrl:function(){return this.getAsString("containerUrl")},getContainerType:function(){return this.getAsString("containerType")},getCategoryFlags:function(){return this.getAsArray("categoryFlags")},load:function(f){var b=this.getBlogUuid(),g=this.service._validateBlogUuid(b);if(g)return g;var e=this,f={handleAs:"text",query:c.mixin({},f||{})},g=null,g=this.service._constructBlogsUrl(a.AtomBlogInstance,{blogUuid:b});return this.service.getEntity(g,f,b,{createEntity:function(f,b){e.setDataHandler(new k({service:f,
data:b,namespaces:a.Namespaces,xpath:a.BlogXPath}));return e}})},remove:function(a){return this.service.deleteBlog(this.getBlogUuid(),a)},update:function(a){return this.service.updateBlog(this,a)},save:function(a){return this.getBlogUuid()?this.service.updateBlog(this,a):this.service.createBlog(this,a)}}),n=i(j,{xpath:a.CommentXPath,namespaces:a.BlogNamespaces,constructor:function(){},getCommentUuid:function(){var a=this.getAsString("commentUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:comment-")&&
(a=a.substring(31,a.length));return a},setCommentUuid:function(a){return this.setAsString("CommentUuid",a)},getRecommendationsURL:function(){return this.getAsString("recommendationsUrl")},getRecommendationsCount:function(){return this.getAsString("rankRecommendations")},getReplyTo:function(){return this.getAsString("replyTo")},getPostUuid:function(){var a=this.getAsString("blogPostUuid");if(a)return a;(a=this.getAsString("replyTo"))&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:entry-")&&(a=a.substring(29,
a.length));return a},setPostUuid:function(a){return this.setAsString("blogPostUuid",a)},getBlogHandle:function(){var a=this.getAsString("blogHandle");return a?a:a=this.service._extractBlogHandle(this.getAsString("alternateUrl"))},setBlogHandle:function(a){this.setAsString("blogHandle",a);return this.setAsString("blogHandle",a)},getTrackbackTitle:function(){return this.getAsDate("trackbacktitle")},getSource:function(){return this.getAsObject(["sourceId","sourceTitle","sourceLink","sourceLinkAlternate"])},
load:function(f,b,g){var e=this.service._validateUuid(b);if(e)return e;var q=this,g={handleAs:"text",query:c.mixin({},g||{})},e=null,e=this.service.constructUrl(a.AtomBlogCommentEditRemove,null,{blogHandle:f,commentUuid:b});return this.service.getEntity(e,g,b,{createEntity:function(f,b){q.setDataHandler(new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.CommentXPath}));return q}})},remove:function(a){return this.service.deleteComment(this.getCommentUuid(),a)},save:function(a){return this.service.createPost(this,
a)}}),e=i(j,{xpath:a.RecommendersXPath,categoryScheme:'<category term="person" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',namespaces:a.BlogNamespaces,constructor:function(){},getRecommenderUuid:function(){var a=this.getAsString("recommenderUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:person-")&&(a=a.substring(30,a.length));return a}}),r={createEntities:function(f,b){return new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(a,f){return new m({service:a,
data:f})}},s={createEntities:function(f,b){return new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,f){return new p({service:a,data:f})}},t={createEntities:function(f,b){return new k({data:b,namespaces:a.Namespaces,xpath:a.TagsXPath})},createEntity:function(f,b){var g=new k({data:b,namespaces:a.Namespaces,xpath:a.TagsXPath});return new o({service:f,id:g.getEntityId(),dataHandler:g})}},u={createEntities:function(f,b){return new k({service:f,data:b,namespaces:a.Namespaces,
xpath:a.BlogFeedXPath})},createEntity:function(a,f){return new p({service:a,data:f})}},f={createEntities:function(f,b){return new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(a,f){return new e({service:a,data:f})}},q={createEntities:function(f,b){return new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(a,f){return new n({service:a,data:f})}};return i(g,{contextRootMap:{blogs:"blogs"},serviceName:"blogs",handle:"homepage",
constructor:function(){if(!this.endpoint)this.endpoint=h.findEndpoint(this.getDefaultEndpointName());this.handle=this.endpoint.serviceMappings.blogHomepageHandle?this.endpoint.serviceMappings.blogHomepageHandle:this.handle},getAllBlogs:function(f){var f={method:"GET",handleAs:"text",query:f||{}},b=null,b=this._constructBlogsUrl(a.AtomBlogsAll);return this.getEntities(b,f,this.getBlogFeedCallbacks())},getMyBlogs:function(f){var f={method:"GET",handleAs:"text",query:f||{}},b=null,b=this._constructBlogsUrl(a.AtomBlogsMy);
return this.getEntities(b,f,this.getBlogFeedCallbacks())},getFeaturedBlogs:function(f){var f={method:"GET",handleAs:"text",query:f||{}},b=null,b=this._constructBlogsUrl(a.AtomBlogsFeatured);return this.getEntities(b,f,this.getBlogFeedCallbacks())},getFeaturedPosts:function(f){var f={method:"GET",handleAs:"text",query:f||{}},b=null,b=this._constructBlogsUrl(a.AtomBlogsPostsFeatured);return this.getEntities(b,f,this.getBlogPostsCallbacks())},getRecommendedPosts:function(f){var f={method:"GET",handleAs:"text",
query:f||{}},b=null,b=this._constructBlogsUrl(a.AtomBlogsPostsRecommended);return this.getEntities(b,f,this.getBlogPostsCallbacks())},getAllBlogPosts:function(f){var f={method:"GET",handleAs:"text",query:f||{}},b=null,b=this._constructBlogsUrl(a.AtomEntriesAll);return this.getEntities(b,f,this.getBlogPostsCallbacks())},getBlogPosts:function(f,b){var g={method:"GET",handleAs:"text",query:b||{}},e=null,e=this.constructUrl(a.AtomBlogEntries,null,{blogHandle:f});return this.getEntities(e,g,this.getBlogPostsCallbacks())},
getBlogPostRecommenders:function(f,b){var g=this._toBlogPost(f),e=this._validateBlogPost(g);if(e)return e;var e={method:"GET",handleAs:"text",query:b||{}},q=null,q=this.constructUrl(a.AtomRecommendBlogPost,null,{postUuid:g.getBlogPostUuid(),blogHandle:g.getBlogHandle()});return this.getEntities(q,e,this.getBlogPostRecommendersCallbacks())},getAllBlogComments:function(f){var f={method:"GET",handleAs:"text",query:f||{}},b=null,b=this._constructBlogsUrl(a.AtomBlogCommentsAll);return this.getEntities(b,
f,this.getBlogPostCommentsCallbacks())},getBlogComments:function(f,b){var g={method:"GET",handleAs:"text",query:b||{}},e=null,e=this.constructUrl(a.AtomBlogComments,null,{blogHandle:f});return this.getEntities(e,g,this.getBlogPostCommentsCallbacks())},getBlog:function(a,f){return(new m({service:this,_fields:{blogUuid:a}})).load(f)},createBlog:function(f,b){var g=this._toBlog(f),e=this._validateBlog(g,!1,b);if(e)return e;var e={method:"POST",query:b||{},headers:a.AtomXmlHeaders,data:this._constructBlogPostData(g)},
q=null,q=this._constructBlogsUrl(a.AtomBlogCreate);return this.updateEntity(q,e,{createEntity:function(f,b){if(b){var e=new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.BlogXPath});g.setDataHandler(e)}g.setData(b);return g}},b)},updateBlog:function(f,b){var g=this._toBlog(f),e=this._validateBlog(g,!0,b);if(e)return e;var e={method:"PUT",query:c.mixin({},b||{}),headers:a.AtomXmlHeaders,data:this._constructBlogPostData(g)},q=g.getBlogUuid(),j=null,j=this._constructBlogsUrl(a.AtomBlogEditDelete,
{blogUuid:q});return this.updateEntity(j,e,{createEntity:function(f,b){var e=g.getBlogUuid();if(b){var q=new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.BlogXPath});g.setDataHandler(q)}g.setBlogUuid(e);return g}},b)},deleteBlog:function(f,b){var g=this._validateBlogUuid(f);if(g)return g;var g={method:"DELETE",query:c.mixin({},b||{}),handleAs:"text"},e=null,e=this._constructBlogsUrl(a.AtomBlogEditDelete,{blogUuid:f});return this.deleteEntity(e,g,f)},getBlogPost:function(a,f){return(new p({service:this,
_fields:{postUuid:a}})).load(f)},getEntryComments:function(f,b,g){var g={method:"GET",handleAs:"text",query:g||{}},e=null,e=this.constructUrl(a.AtomBlogEntryComments,null,{blogHandle:f,entryAnchor:b});return this.getEntities(e,g,this.getBlogPostCommentsCallbacks())},createPost:function(f,b){var g=this._toBlogPost(f),e=this._validateBlog(g,!1,b);if(e)return e;var e={method:"POST",query:b||{},headers:a.AtomXmlHeaders,data:this._constructBlogPostPostData(g)},q=null,q=this.constructUrl(a.AtomBlogPostCreate,
null,{blogHandle:f.getBlogHandle()});return this.updateEntity(q,e,{createEntity:function(f,b){if(b){var e=new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.BlogPostXPath});g.setDataHandler(e)}g.setData(b);return g}},b)},updatePost:function(f,b){var g=this._toBlogPost(f),e=this._validateBlogPost(g,!0,b);if(e)return e;var e={method:"PUT",query:c.mixin({},b||{}),headers:a.AtomXmlHeaders,data:this._constructBlogPostPostData(g)},q=null,q=this.constructUrl(a.AtomBlogPostEditDelete,null,{postUuid:g.getBlogPostUuid(),
blogHandle:g.getBlogHandle()});return this.updateEntity(q,e,{createEntity:function(f,b){var e=g.getBlogPostUuid();if(b){var q=new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.BlogPostXPath});g.setDataHandler(q)}g.setBlogPostUuid(e);return g}},b)},recommendPost:function(f){var f=this._toBlogPost(f),b=this._validateBlogPost(f);if(b)return b;var b={method:"POST",headers:a.AtomXmlHeaders},g=null,g=this.constructUrl(a.AtomRecommendBlogPost,null,{postUuid:f.getBlogPostUuid(),blogHandle:f.getBlogHandle()});
return this.updateEntity(g,b,this.getRecommendBlogPostCallbacks())},unrecommendPost:function(f){var b=this._toBlogPost(f),g=this._validateBlogPost(b);if(g)return g;var g={method:"DELETE",headers:a.AtomXmlHeaders},e=null,e=this.constructUrl(a.AtomRecommendBlogPost,null,{postUuid:b.getBlogPostUuid(),blogHandle:b.getBlogHandle()});return this.deleteEntity(e,g,f.getBlogPostUuid())},deletePost:function(f,b,g){var e=this._validateUuid(b);if(e)return e;g={method:"DELETE",query:c.mixin({},g||{}),handleAs:"text"};
e=null;e=this.constructUrl(a.AtomBlogPostEditDelete,null,{blogHandle:f,postUuid:b});return this.deleteEntity(e,g,b)},deleteComment:function(f,b,g){var e=this._validateUuid(b);if(e)return e;g={method:"DELETE",query:c.mixin({},g||{}),handleAs:"text"};e=null;e=this.constructUrl(a.AtomBlogCommentEditRemove,null,{blogHandle:f,commentUuid:b});return this.deleteEntity(e,g,b)},createComment:function(f,b){var g=this._toComment(f),e=this._validateComment(g);if(e)return e;var e={method:"POST",query:b||{},headers:a.AtomXmlHeaders,
data:this._constructCommentBlogPostData(g)},q=null,q=this.constructUrl(a.AtomBlogCommentCreate,null,{blogHandle:f.getBlogHandle(),postUuid:f.getPostUuid()});return this.updateEntity(q,e,{createEntity:function(f,b){if(b){var e=new k({service:f,data:b,namespaces:a.Namespaces,xpath:a.CommentXPath});g.setDataHandler(e)}g.setData(b);return g}},b)},getComment:function(a,f,b){return(new n({service:this,_fields:{commentUuid:f}})).load(a,f,b)},getAllBlogTags:function(f){var b={method:"GET",handleAs:"text",
query:f||{}},g=null,g=this._constructBlogsUrl(a.AtomBlogsTags);return this.getEntities(g,b,this.getTagsFeedCallbacks(),f)},getBlogTags:function(f,b){var g={method:"GET",handleAs:"text",query:b||{}},e=null,e=this.constructUrl(a.AtomBlogTags,null,{blogHandle:f});return this.getEntities(e,g,this.getTagsFeedCallbacks(),b)},newBlog:function(a){return this._toBlog(a)},newBlogPost:function(a){return this._toBlogPost(a)},newComment:function(a){return this._toComment(a)},getBlogFeedCallbacks:function(){return r},
getTagsFeedCallbacks:function(){return t},getRecommendBlogPostCallbacks:function(){return s},getBlogPostsCallbacks:function(){return u},getBlogPostRecommendersCallbacks:function(){return f},getBlogPostCommentsCallbacks:function(){return q},_toBlog:function(a){if(a instanceof m)return a;c.isString(a)&&(a={blogUuid:a});return new m({service:this,_fields:c.mixin({},a)})},_toBlogPost:function(a){if(a instanceof p)return a;c.isString(a)&&(a={postUuid:a});return new p({service:this,_fields:c.mixin({},a)})},
_toComment:function(a){if(a instanceof n)return a;c.isString(a)&&(a={commentUuid:a});return new n({service:this,_fields:c.mixin({},a)})},_validateBlogUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected blogUuid.")},_validateUuid:function(a){if(!a)return this.createBadRequestPromise("Invalid argument, blog post id must be specified.")},_validateBlogPost:function(a){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, blog post with title must be specified.")},
_validateComment:function(a){if(!a||!a.getContent())return this.createBadRequestPromise("Invalid argument, blog comment with content must be specified.")},_validateBlog:function(a,f){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, blog with title must be specified.");if(f&&!a.getBlogUuid())return this.createBadRequestPromise("Invalid argument, blog with UUID must be specified.")},_constructBlogPostData:function(a){a=d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"  xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><title type="text">${getTitle}</title><snx:timezone>${getTimezone}</snx:timezone><snx:handle>${getHandle}</snx:handle><summary type="html">${getSummary}</summary>${getTags}</entry>',
a,function(a,f){if("getTags"==f){var b=a,a="",g;for(g in b)a+=d.transform(CategoryTmpl,{tag:b[g]})}return a},a);return d.trim(a)},_constructBlogPostPostData:function(a){a=d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"  xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><title type="text">${getTitle}</title><content type="html">${getContent}</content>${getTags}</entry>',
a,function(a,f){if("getTags"==f){var b=a,a="",g;for(g in b)a+=d.transform(CategoryTmpl,{tag:b[g]})}return a},a);return d.trim(a)},_constructCommentBlogPostData:function(a){a=d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"  xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><content type="html">${getContent}</content></entry>',a,function(a){return a},a);return d.trim(a)},
_extractBlogHandle:function(a){a=a.substring(0,a.indexOf("/entry/"));return a.substring(a.lastIndexOf("/")+1,a.length)},_constructBlogsUrl:function(a,f){f=c.mixin({blogHomepageHandle:this.handle},f||{});return this.constructUrl(a,null,f)}})})},"sbt/json":function(){define(["./_bridge/json","./_bridge/lang","./log","./stringUtil"],function(i,h,c,d){return{parse:function(b){return(JSON||i).parse(b)},stringify:function(b){return(JSON||i).stringify(b)},jsonBeanStringify:function(b){if(h.isArray(b)){for(var a=
"[",g=0;g<b.length;g++)a+=this._jsonBeanStringify(b[g]),g+1<b.length&&(a+=",\n");return a+"]"}return this._jsonBeanStringify(b)},jsonBean:function(b){if(h.isArray(b)){for(var a=[],g=0;g<b.length;g++)a.push(this._jsonBean(b[g]));return a}return this._jsonBean(b)},_jsonBeanStringify:function(b){return this._stringifyCyclicCheck(this.jsonBean(b),4)},_stringifyCyclicCheck:function(b,a){var g=[],c=this;return(JSON||i).stringify(b,function(a,b){if(c._isDomNode(b))return{};if(h.isObject(b)){if(0<=g.indexOf(b)&&
!c._isBuiltin(b))return;g.push(b)}else if(h.isFunction(b))return;return b},a)},_jsonBean:function(b,a){a||(a=[]);if(!(0<=a.indexOf(b))){a.push(b);var g={},c;for(c in b){var d=this._getObjectValue(b,c,a);if(d||!isNaN(d))g[c]=d}return g}},_notReserved:function(b){return"isInstanceOf"!==b&&"getInherited"!==b},_getObjectValue:function(b,a,g){if(h.isFunction(b[a])){if((d.startsWith(a,"get")||d.startsWith(a,"is"))&&this._notReserved(a))try{var c=b[a].apply(b);return c&&!this._isBuiltin(c)&&h.isObject(c)?
this._jsonBean(c,g):c}catch(k){}}else if(!d.startsWith(a,"_")&&!d.startsWith(a,"-"))return b[a]},_isBuiltin:function(b){return b instanceof Date||b instanceof Number||b instanceof Boolean||h.isArray(b)},_isDomNode:function(b){return b&&b.nodeName&&b.nodeType&&"number"===typeof b.nodeType&&"string"===typeof b.nodeName}}})},"sbt/authenticator/templates/login":function(){},"sbt/connections/FileConstants":function(){define(["../lang","./ConnectionsConstants"],function(i,h){return i.mixin({FileFeedXPath:h.ConnectionsFeedXPath,
CommentFeedXPath:h.ConnectionsFeedXPath,FileXPath:{entry:"/a:entry",id:"a:id",uid:"td:uuid",label:"td:label",selfUrl:"a:link[@rel='self']/@href",alternateUrl:"a:link[@rel='alternate']/@href",downloadUrl:"a:link[@rel='enclosure']/@href",type:"a:link[@rel='enclosure']/@type",length:"a:link[@rel='enclosure']/@length",editLink:"a:link[@rel='edit']/@href",editMediaLink:"a:link[@rel='edit-media']/@href",thumbnailUrl:"a:link[@rel='thumbnail']/@href",commentsUrl:"a:link[@rel='replies']/@href",fileSize:"td:totalMediaSize",
content:"a:content[@type='html']",shareCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/share']",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",authorUserState:"a:author/snx:userState",title:"a:title",published:"a:published",updated:"a:updated",created:"td:created",modified:"td:modified",lastAccessed:"td:lastAccessed",modifierName:"td:modifier/td:name",modifierUserId:"td:modifier/snx:userid",modifierEmail:"td:modifier/td:email",modifierUserState:"td:modifier/snx:userState",
visibility:"td:visibility",libraryId:"td:libraryId",libraryType:"td:libraryType",versionUuid:"td:versionUuid",versionLabel:"td:versionLabel",propagation:"td:propagation",recommendationsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",commentsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",sharesCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/share']",foldersCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/collections']",attachmentsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/attachments']",
versionsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/versions']",referencesCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/references']",totalMediaSize:"td:totalMediaSize",summary:"a:summary",contentUrl:"a:content/@src",contentType:"a:content/@type",objectTypeId:"td:objectTypeId",lock:"td:lock/@type",acls:"td:permissions",hitCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",anonymousHitCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/anonymous_hit']",
tags:"a:category[not(@scheme)]/@term",category:"a:category/@label"},FolderXPath:{id:"id",uid:"td:uuid",title:"a:title",label:"td:label",folderUrl:"a:link[@rel='alternate']/@href",logoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/logo']/@href",tags:"a:category/@term",summary:"a:summary[@type='text']",content:"a:content[@type='html']",visibility:"td:visibility",notification:"td:notification",versionUuid:"td:versionUuid",versionLabel:"td:versionLabel",documentVersionUuid:"td:documentVersionUuid",
documentVersionLabel:"td:documentVersionLabel",itemCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/item']",shareCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/user']",groupShareCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/group']",modified:"td:modified",created:"td:created",updated:"a:updated",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",content:"a:content[@type='text']",modifierName:"a:modifier/a:name",modifierId:"a:modifier/snx:userid",
modifierEmail:"a:modifier/a:email"},CommentXPath:{entry:"a:entry",id:"a:id",uid:"td:uuid",title:"a:title",content:"a:content[@type='text']",created:"td:created",modified:"td:modified",versionLabel:"td:versionLabel",updated:"a:updated",published:"a:published",modifierName:"td:modifier/td:name",modifierUserId:"td:modifier/snx:userid",modifierEmail:"td:modifier/td:email",modifierUserState:"td:modifier/snx:userState",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",
authorUserState:"a:author/snx:userState",language:"td:language",deleteWithRecord:"td:deleteWithRecord"},SharesXPath:{id:"id",uuid:"td:uuid",title:"a:title",summary:"a:summary[@type='text']",sharedResourceType:"td:sharedResourceType",sharePermission:"td:sharePermission",sharedWhat:"td:sharedWhat",sharedWithName:"a:sharedWith/a:name",sharedWithId:"a:sharedWith/snx:userid",sharedWithEmail:"a:sharedWith/a:email",documentOwner:"td:documentOwner",updated:"a:updated",published:"a:published",authorName:"a:author/a:name",
authorUid:"a:author/snx:userid",authorEmail:"a:author/a:email"},LibraryXPath:{entry:"a:feed",id:"a:id",uuid:"td:uuid",librarySize:"td:librarySize",totalRemovedSize:"td:totalRemovedSize",libraryQuota:"td:libraryQuota",totalResults:"opensearch:totalResults"},AtomFileInstance:"${files}/basic/api/myuserlibrary/document/{documentId}/entry",AtomFileInstancePublic:"${files}/basic/anonymous/api/library/{libraryId}/document/{documentId}/entry",AtomFilesMy:"/${files}/basic/api/myuserlibrary/feed",AtomFilesShared:"/${files}/basic/api/documents/shared/feed",
AtomFilesPublic:"/${files}/basic/anonymous/api/documents/feed?visibility=public",AtomFilesRecycled:"/${files}/basic/api/myuserlibrary/view/recyclebin/feed",AtomFoldersMy:"/${files}/basic/api/collections/feed",AtomFoldersPublic:"/${files}/basic/anonymous/api/collections/feed",AtomFoldersActive:"/${files}/basic/api/collections/addedto/feed",AtomFileCommentsPublic:"/${files}/basic/anonymous/api/userlibrary/{userId}/document/{documentId}/feed?category=comment",AtomFileCommentsMy:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/feed?category=comment",
AtomAddCommentToFile:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/feed",AtomAddCommentToMyFile:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomUpdateFileMetadata:"/${files}/basic/api/myuserlibrary/document/{documentId}/entry",AtomFilesMyPinned:"/${files}/basic/api/myfavorites/documents/feed",AtomPinFile:"/${files}/basic/api/myfavorites/documents/feed",AtomAddFilesToFolder:"/${files}/basic/api/collection/{collectionId}/feed",AtomDeleteFile:"/${files}/basic/api/myuserlibrary/document/{documentId}/entry",
AtomLockUnlockFile:"/${files}/basic/api/document/{documentId}/lock",AtomAddFileToFolders:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/feed",AtomAddMyFileToFolders:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomCreateFolder:"/${files}/basic/api/collections/feed",AtomDeleteAllFilesFromRecyclebBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/feed",AtomDeleteMyFilesFromRecyclebBin:"/${files}/basic/api/myuserlibrary/view/recyclebin/feed",AtomDeleteAllVersionsOfAFile:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",
AtomDeleteComment:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/comment/{commentId}/entry",AtomDeleteMyComment:"/${files}/basic/api/myuserlibrary/document/{documentId}/comment/{commentId}/entry",AtomDeleteFileFromRecycleBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/{documentId}/entry",AtomDeleteMyFileFromRecycleBin:"/${files}/basic/api/myuserlibrary/view/recyclebin/{documentId}/entry",AtomDeleteFileShare:"/${files}/basic/api/shares/feed",AtomDeleteFolder:"/${files}/basic/api/collection/{collectionId}/entry",
AtomGetAllUsersFiles:"/${files}/basic/anonymous/api/userlibrary/{userId}/feed",AtomGetFileComment:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/comment/{commentId}/entry",AtomGetMyFileComment:"/${files}/basic/api/myuserlibrary/document/{documentId}/comment/{commentId}/entry",AtomGetFileFromRecycleBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/{documentId}/entry",AtomGetFilesAwaitingApproval:"/${files}/basic/api/approval/documents",AtomGetFileShares:"/${files}/basic/api/documents/shared/feed",
AtomGetFilesInFolder:"/${files}/basic/api/collection/{collectionId}/feed",AtomGetFilesInMyRecycleBin:"/${files}/basic/api/myuserlibrary/view/recyclebin/feed",AtomGetFileWithGivenVersion:"/${files}/basic/api/myuserlibrary/document/{documentId}/version/{versionId}/entry",AtomGetFolder:"/${files}/basic/api/collection/{collectionId}/entry",AtomGetFoldersWithRecentlyAddedFiles:"/${files}/basic/api/collections/addedto/feed",AtomGetPinnedFolders:"/${files}/basic/api/myfavorites/collections/feed",AtomGetPublicFolders:"/${files}/basic/anonymous/api/collections/feed",
AtomPinFolder:"/${files}/basic/api/myfavorites/collections/feed",AtomRemoveFileFromFolder:"/${files}/basic/api/collection/{collectionId}/feed",AtomRestoreFileFromRecycleBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/{documentId}/entry",AtomShareFileWithCommunities:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomUpdateComment:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/comment/{commentId}/entry",AtomUpdateMyComment:"/${files}/basic/api/myuserlibrary/document/{documentId}/comment/{commentId}/entry",
AtomAddCommentToCommunityFile:"/${files}/basic/api/communitylibrary/{communityId}/document/{documentId}/feed",AtomGetAllFilesInCommunity:"/${files}/basic/api/communitylibrary/{communityId}/feed",AtomGetAllCommunityFiles:"/${files}/basic/api/communitycollection/{communityId}/feed",AtomGetCommunityFile:"/${files}/basic/api/communitylibrary/{communityId}/document/{documentId}/entry",AtomUpdateCommunityFileMetadata:"/${files}/basic/api/library/{libraryId}/document/{documentId}/entry"},h)})},"sbt/pathUtil":function(){define(["./stringUtil"],
function(i){return{concat:function(h,c){if(!h)return c;if(!c)return h;i.endsWith(h,"/")&&(h=h.substring(0,h.length-1));i.startsWith(c,"/")&&(c=c.substring(1));return h+"/"+c},isAbsolute:function(h){return 0<=h.indexOf("://")}}})},"sbt/base/BaseService":function(){define("../config,../declare,../lang,../log,../stringUtil,../Cache,../Promise,../util".split(","),function(i,h,c,d,b,a,g,j){var k={};return h(null,{endpoint:null,_cache:null,_regExp:/\/{2}/,contextRootMap:{},constructor:function(b){b=b||
{};if(b.endpoint)this.endpoint=c.isString(b.endpoint)?i.findEndpoint(b.endpoint):b.endpoint;if(b.cacheSize)this._cache=new a(b.cacheSize)},constructUrl:function(a,g,j){if(!a)throw Error("BaseService.constructUrl: Invalid argument, url is undefined or null.");this.endpoint&&(c.mixin(this.contextRootMap,this.endpoint.serviceMappings),a=b.transform(a,this.contextRootMap,function(a,b){return a?a:b},this));j&&(a=b.replace(a,j),-1!=a.indexOf("//")&&(a=a.replace(this._regExp,"/")));if(g)for(param in g)-1==
a.indexOf("?")?a+="?":a.indexOf("&")!=a.length-1&&(a+="&"),(j=encodeURIComponent(g[param]))&&(a+=param+"="+j);return a},getEntities:function(a,b,c){var a=this.constructUrl(a),j=this,e=new g;this.request(a,b,null,e).response.then(function(a){e.response=a;try{for(var b=c.createEntities.apply(j,[j,a.data,a]),g=b.getEntitiesDataArray(),d=[],f=0;f<g.length;f++){var q=c.createEntity.apply(j,[j,g[f],a]);d.push(q)}e.summary=b.getSummary();e.fulfilled(d)}catch(k){a=Error("Error parsing response caused by: "+
k),a.cause=k,e.rejected(a)}},function(a){e.rejected(a)});return e},getEntity:function(a,b,c,j){var a=this.constructUrl(a),e=this._validateEntityId(c);if(e)return e;var e=new g,d=this.getFromCache(c);if(d)return e.fulfilled(d),e;var k=this;this.request(a,b,c,e).response.then(function(a){e.response=a;try{var b=j.createEntity.apply(k,[k,a.data,a]);k._cache&&c?k.fullFillOrRejectPromises.apply(k,[c,b,a]):e.fulfilled(b)}catch(f){a=Error("Invalid response"),a.cause=f,k._cache&&c?k.fullFillOrRejectPromises.apply(k,
[c,a]):e.rejected(a)}},function(a){k._cache&&c?k.fullFillOrRejectPromises.apply(k,[c,a]):e.rejected(a)});return e},updateEntity:function(a,b,c){var a=this.constructUrl(a),j=this,e=new g;this.endpoint.request(a,b,null,e).response.then(function(a){e.response=a;a=c.createEntity.apply(j,[j,a.data,a]);a instanceof g?a.then(function(a){e.fulfilled(a)},function(a){e.rejected(a)}):(a.id&&j.removeFromCache(a.id),a.id&&a.data&&j.addToCache(a.id,a),e.fulfilled(a))},function(a){e.rejected(a)});return e},deleteEntity:function(a,
b,c){var a=this.constructUrl(a),j=this._validateEntityId(c);if(j)return j;var e=this,j=new g;this.endpoint.request(a,b,c,j).response.then(function(a){j.response=a;j.fulfilled(c);e.removeFromCache(c)},function(a){j.rejected(a)});return j},request:function(a,b,g,c){a=this.constructUrl(a);this._cache&&g&&this.pushPromise(g,c);return this.endpoint.request(a,b)},pushPromise:function(a,b){d.debug("pushPromise, id : {0}, promise : {1}",a,b);k[a]||(k[a]=[]);k[a].push(b)},fullFillOrRejectPromises:function(a,
b,g){d.debug("fullFillOrRejectPromises, id : {0}, data : {1}, response : {2}",a,b,g);this.addToCache(a,b);var c=k[a];if(c){delete k[a];for(a=0;a<c.length;a++)this.fullFillOrReject.apply(this,[c[a],b,g])}},fullFillOrReject:function(a,b,g){if(a)try{a.response=g,b instanceof Error?a.rejected(b):a.fulfilled(b)}catch(c){d.debug("fullFillOrReject: "+c.message)}},addToCache:function(a,b){this._cache&&!(b instanceof Error)&&this._cache.put(a,b)},removeFromCache:function(a){this._cache&&this._cache.remove(a)},
getFromCache:function(a){if(this._cache)return this._cache.get(a)},createBadRequestError:function(a){var b=Error();b.code=400;b.message=a;return b},createBadRequestPromise:function(a){return new g(this.createBadRequestError(a))},isEmail:function(a){return a&&0<=a.indexOf("@")},getLocationParameter:function(a,b){var g=a.getHeader("Location")||void 0;if(g)return this.getUrlParameter(g,b)},getUrlParameter:function(a,b){return decodeURIComponent((RegExp("[?|&]"+b+"=([^&;]+?)(&|#|;|$)").exec(a)||[,""])[1].replace(/\+/g,
"%20"))||null},validateField:function(a,g){if(!g){var c;c=b.substitute("Invalid value {0} for field {1}, the field must not be empty or undefined.",[g||"'undefined'",a]);return this.createBadRequestPromise(c)}},validateFields:function(a){for(var b in a){var g=this.validateField(b,a[b]);if(g)return g}},validateHTML5FileSupport:function(){if(!window.File||!window.FormData)return this.createBadRequestPromise("HTML 5 File API is not supported by the Browser.");if(-1!=j.getJavaScriptLibrary().indexOf("Dojo 1.4"))return this.createBadRequestPromise("Dojo 1.4.* is not supported for Update Profile Photo")},
_validateEntityId:function(a){if(!a||!c.isString(a))return a=b.substitute("Invalid argument {0}, expected valid entity identifier.",[a||"'undefined'"]),this.createBadRequestPromise(a)},getFileControl:function(a){var b=null;"string"==typeof a?b=document.getElementById(a):"object"==typeof a&&(b=a);return b}})})},"sbt/base/VCardDataHandler":function(){define(["../declare","../lang","../config","../stringUtil","./XmlDataHandler"],function(i,h,c,d,b){return i(b,{lineDelim:"\n",itemDelim:":",_vcard:null,
constructor:function(){this.parseVCard()},parseVCard:function(){var a=d.trim(this.getAsString("vcard")).split(this.lineDelim);this._vcard={};for(var b=1;b<a.length-1;b++){var c=d.trim(a[b]),k=c.indexOf(this.itemDelim),h=c.substring(0,k),c=c.substring(k+1);this._vcard[h]=c}},_selectText:function(a){var b=this._getXPath(a);if(this._vcard&&this._vcard.hasOwnProperty(b))return this._vcard[b];try{return this.inherited(arguments,[a])}catch(c){return null}}})})},"sbt/smartcloud/SmartcloudConstants":function(){define(["../lang",
"../base/BaseConstants"],function(i,h){return i.mixin(h,{SmartcloudFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"}})})},"sbt/_bridge/declare":function(){define(["dojo/_base/declare"],function(i){return i})},"sbt/i18n":function(){define(["./_bridge/i18n"],function(i){return i})},"sbt/DebugTransport":function(){define("./declare,./lang,./dom,./json,./stringUtil,sbt/_bridge/Transport".split(","),
function(i,h,c,d,b,a){return i(a,{responseMap:{},index:0,createResponse:function(a,j,k,h){var i=this.inherited(arguments,[a,j,k,h]),m=c.byId("mockData");if(m){"json"==j.handleAs&&(k=d.jsonBeanStringify(k));var n=document.createElement("pre");m.appendChild(n);var m=i.status||0,e=j.handleAs||"text",r=j.method||"GET",s=i.getHeader("Location")||"",t=k instanceof Error;t&&(k=i.data.responseText||i.data.response.text||k);var u=a,f=b.hashCode(u);this.responseMap[f]?(this.responseMap[f]+=1,u+="#"+this.responseMap[f]):
this.responseMap[f]=1;n.appendChild(c.createTextNode("<script type='text/template' status='"+m+"' id='"+u+"' index='"+this.index+"' handleAs='"+e+"' method='"+r+"' location='"+s+"' error='"+t+"'>\n"+k+"\n<\/script>"));this.index++}return i}})})},"sbt/connections/ProfileConstants":function(){define(["../lang","./ConnectionsConstants"],function(i,h){return i.mixin({DefaultCacheSize:10,AddressFields:"streetAddress,extendedAddress,locality,region,postalCode,countryName".split(","),ProfileFeedXPath:h.ConnectionsFeedXPath,
ProfileNamespaces:h.Namespaces,TypeColleague:"colleague",StatusPending:"pending",ProfileXPath:i.mixin({},h.AtomEntryXPath,{uid:"a:contributor/snx:userid",entry:"/a:feed/a:entry",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",email:"a:contributor/a:email",altEmail:"a:content/h:div/h:span/h:div[@class='x-groupwareMail']",photoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/image']/@href",fnUrl:"a:content/h:div/h:span/h:div/h:a[@class='fn url']/@href",soundUrl:"a:content/h:div/h:span/h:div/h:a[@class='sound url']/@href",
jobTitle:"a:content/h:div/h:span/h:div[@class='title']",organizationUnit:"a:content/h:div/h:span/h:div[@class='org']/h:span[@class='organization-unit']",telephoneNumber:"a:content/h:div/h:span/h:div[@class='tel']/h:span[@class='value']",building:"a:content/h:div/h:span/h:div/h:span[@class='x-building']",floor:"a:content/h:div/h:span/h:div/h:span[@class='x-floor']",officeNumber:"a:content/h:div/h:span/h:div/h:span[@class='x-office-number']",streetAddress:"a:content/h:div/h:span/h:div/h:div[@class='street-address']",
extendedAddress:"a:content/h:div/h:span/h:div/h:div[@class='extended-address x-streetAddress2']",locality:"a:content/h:div/h:span/h:div/h:span[@class='locality']",postalCode:"a:content/h:div/h:span/h:div/h:span[@class='postal-code']",region:"a:content/h:div/h:span/h:div/h:span[@class='region']",countryName:"a:content/h:div/h:span/h:div/h:div[@class='country-name']",groupwareMail:"a:content/h:div/h:span/h:div[@class='x-groupwareMail']",blogUrl:"a:content/h:div/h:span/h:div/h:a[@class='x-blog-url url']/@href",
role:"a:content/h:div/h:span/h:div[@class='role']",managerUid:"a:content/h:div/h:span/h:div[@class='x-manager-uid']",isManager:"a:content/h:div/h:span/h:div[@class='x-is-manager']"}),ColleagueConnectionXPath:i.mixin({},h.AtomEntryXPath,{entry:"/a:feed/a:entry"}),ProfileVCardXPath:i.mixin({},h.AtomEntryXPath,{entry:"/a:feed/a:entry",uid:"a:contributor/snx:userid",vcard:"a:content",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",email:"a:contributor/a:email",altEmail:"EMAIL;X_GROUPWARE_MAIL",
photoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/image']/@href",fnUrl:"URL",soundUrl:"SOUND;VALUE=URL",jobTitle:"TITLE",organizationUnit:"a:content/h:div/h:span/h:div[@class='org']/h:span[@class='organization-unit']",telephoneNumber:"TEL;WORK",building:"X_BUILDING",floor:"X_FLOOR",officeNumber:"X_OFFICE_NUMBER",workLocation:"ADR;WORK",streetAddress:"a:content/h:div/h:span/h:div/h:div[@class='street-address']",extendedAddress:"a:content/h:div/h:span/h:div/h:div[@class='extended-address x-streetAddress2']",
locality:"a:content/h:div/h:span/h:div/h:span[@class='locality']",postalCode:"a:content/h:div/h:span/h:div/h:span[@class='postal-code']",region:"a:content/h:div/h:span/h:div/h:span[@class='region']",countryName:"a:content/h:div/h:span/h:div/h:div[@class='country-name']",groupwareMail:"EMAIL;X_GROUPWARE_MAIL"}),ProfileTagsXPath:{entries:"/app:categories/a:category",targetEmail:"app:categories/snx:targetEmail",numberOfContributors:"@snx:numberOfContributors",entry:"/app:categories/a:category",uid:"@term",
id:"@term",term:"@term",frequency:"@snx:frequency",intensity:"@snx:intensityBin",visibility:"@snx:visibilityBin",contributorName:"a:name",contributorUserid:"a:userid",contributorEmail:"a:email"},InviteXPath:i.mixin({},h.AtomEntryXPath,{connectionType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/connection/type']/@term",status:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/status']/@term"}),profileCreateAttributes:{guid:"com.ibm.snx_profiles.base.guid",email:"com.ibm.snx_profiles.base.email",
uid:"com.ibm.snx_profiles.base.uid",distinguishedName:"com.ibm.snx_profiles.base.distinguishedName",displayName:"com.ibm.snx_profiles.base.displayName",givenNames:"com.ibm.snx_profiles.base.givenNames",surname:"com.ibm.snx_profiles.base.surname",userState:"com.ibm.snx_profiles.base.userState"},AtomProfileDo:"/${profiles}{authType}/atom/profile.do",AtomProfileEntryDo:"/${profiles}{authType}/atom/profileEntry.do",AtomConnectionsDo:"/${profiles}{authType}/atom/connections.do",AtomReportingChainDo:"/${profiles}{authType}/atom/reportingChain.do",
AtomPeopleManagedDo:"/${profiles}{authType}/atom/peopleManaged.do",AtomConnectionsInCommonDo:"/${profiles}{authType}/atom/connectionsInCommon.do",AtomSearchDo:"/${profiles}{authType}/atom/search.do",AtomPeopleManagedDo:"/${profiles}{authType}/atom/peopleManaged.do",AtomTagsDo:"/${profiles}{authType}/atom/profileTags.do",AdminAtomProfileDo:"/${profiles}/admin/atom/profiles.do",AdminAtomProfileEntryDo:"/${profiles}/admin/atom/profileEntry.do"},h)})},"sbt/connections/FollowConstants":function(){define(["../lang",
"./ConnectionsConstants"],function(i,h){return i.mixin(h,{ActivitiesSource:"activities",ActivityResourceType:"activity",BlogsSource:"blogs",BlogResourceType:"blog",CommunitiesSource:"communities",CommunitiesResourceType:"community",FilesSource:"files",FileResourceType:"file",FileFolderResourceType:"file_folder",ForumsSource:"forums",ForumResourceType:"forum",ForumTopicResourceType:"forum_topic",ProfilesSource:"profiles",ProfilesResourceType:"profile",WikisSource:"wikis",WikiResourceType:"wiki",WikiPageResourceType:"wiki_page",
TagsSource:"tags",TagResourceType:"tag",FollowedResourceFeedXPath:h.ConnectionsFeedXPath,FollowedResourceXPath:i.mixin({},h.AtomEntryXPath,{followedResourceUuid:"a:id",categoryType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",source:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/source']/@term",resourceType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-type']/@term",resourceId:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-id']/@term",
relatedUrl:"a:link[@rel='related']/@href"}),OneFollowedResourceXPath:i.mixin({},h.AtomEntryXPath,{entry:"/a:feed/a:entry",followedResourceUuid:"a:id",categoryType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",source:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/source']/@term",resourceType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-type']/@term",resourceId:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-id']/@term",relatedUrl:"a:link[@rel='related']/@href"}),
AtomFollowAPI:"/{service}/follow/atom/resources",AtomStopFollowAPI:"/{service}/follow/atom/resources/{resourceId}"})})},"sbt/base/AtomEntity":function(){define("../declare,../lang,../stringUtil,./BaseConstants,./BaseEntity,./XmlDataHandler".split(","),function(i,h,c,d,b,a){return i(b,{contentType:"html",categoryScheme:null,constructor:function(a){a.data?this.dataHandler=this.createDataHandler(a.service,a.data||null,a.response||null,a.namespaces||this.namespaces||d.Namespaces,a.xpath||this.xpath||
d.AtomEntryXPath):(this.service=a.service||this.service,this.namespaces=a.namespaces||this.namespaces||d.Namespaces,this.xpath=a.xpath||this.xpath||d.AtomEntryXPath)},createDataHandler:function(b,c,d,h,i){return new a({service:b,data:c,namespaces:h,xpath:i})},setData:function(a,b){this.dataHandler=this.createDataHandler(this.service,a,b||null,this.namespaces||d.Namespaces,this.xpath||d.AtomEntryXPath);this.inherited(arguments)},getId:function(){return this.getAsString("id")},getTitle:function(){return this.getAsString("title")},
setTitle:function(a){return this.setAsString("title",a)},getSummary:function(){return this.getAsString("summary")},setSummary:function(a){return this.setAsString("summary",a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getCategoryTerms:function(){return this.getAsArray("categoryTerm")},setCategoryTerms:function(a){return this.setAsArray("categoryTerm",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName",
"authorEmail","authorUserState"],["userid","name","email","userState"])},getContributor:function(){return this.getAsObject(["contributorUserid","contributorName","contributorEmail","contributorUserState"],["userid","name","email","userState"])},setContributor:function(a){return this.setAsObject(a)},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getAlternateUrl:function(){return this.getAsString("alternateUrl")},getSelfUrl:function(){return this.getAsString("selfUrl")},
getEditUrl:function(){return this.getAsString("editUrl")},createPostData:function(){var a=c.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" ${createNamespaces}>${categoryScheme}${createTitle}${createContent}${createSummary}${createContributor}${createTags}${createEntryData}</entry>',this,function(a){return a},this);return c.trim(a)},createTitle:function(){var a=this.getTitle();return a?c.transform('<title type="text">${title}</title>',{title:c.htmlEntity(a)}):
""},createContent:function(){var a=this.getContent();return a?("html"==this.contentType&&(a=a&&h.isString(a)?c.htmlEntity(a):a),c.transform('<content type="${contentType}">${content}</content>',{contentType:this.contentType,content:a})):""},createSummary:function(){var a=this.getSummary();return a?c.transform('<summary type="text">${summary}</summary>',{summary:a}):""},createContributor:function(){var a=this.getContributor();if(a){var b="",d=a.email||(this.getEmail?this.getEmail():null);d&&(b+=c.transform("<email>${email}</email>",
{email:d}));(a=a.userid||(this.getUserid?this.getUserid():null))&&(b+=c.transform('<snx:userid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${userid}</snx:userid>',{userid:a}));0<b.length&&(b=c.transform("<contributor>${contributor}</contributor>",{contributor:b}));return b}return""},createTags:function(){if(this.getTags&&this.getTags()){var a="",b=this.getTags(),d;for(d in b)a+=c.transform('<category term="${tag}"></category>',{tag:b[d]});return a}return""},createEntryData:function(){return""},createNamespaces:function(){var a=
"",b=this.dataHandler?this.dataHandler.namespaces:this.namespaces;for(prefix in b)"a"!=prefix&&(a+=0<a.length?" ":"",a+="xmlns:"+prefix+'="'+b[prefix]+'"');return a}})})},"sbt/defer":function(){define([],function(){return{load:function(i,h,c){h([i],function(d){c(d)})}}})},"sbt/nls/Endpoint":function(){define({root:{cannot_find_endpoint:"Unable to find endpoint named {0}, creating it now with an error transport."}})},"sbt/nls/ErrorTransport":function(){define({root:{endpoint_not_available:"Required endpoint is not available: {0}"}})},
"sbt/connections/ForumConstants":function(){define(["../lang","./ConnectionsConstants"],function(i,h){return i.mixin(h,{FlagAnswer:"recommendation",FlagAnswer:"answer",FlagPinned:"pinned",FlagLocked:"locked",FlagQuestion:"question",FlagAnswered:"answered",setLocked:'locked scheme="http://www.ibm.com/xmlns/prod/sn/flags"',setPinned:'pinned scheme="http://www.ibm.com/xmlns/prod/sn/flags"',markAsQuestion:'question scheme="http://www.ibm.com/xmlns/prod/sn/flags"',ForumsFeedXPath:h.ConnectionsFeedXPath,
ForumXPath:i.mixin({forumUuid:"a:id",content:"a:content[@type='text']",tags:"a:category[not(@scheme)]/@term",moderation:"snx:moderation/@status",threadCount:"a:link[@rel='replies']/@thr:count",forumUrl:"a:link[@rel='alternate']/@href",communityUuid:"snx:communityUuid"},h.AtomEntryXPath),ForumTopicXPath:i.mixin({topicUuid:"a:id",topicTitle:"a:title",forumUuid:"thr:in-reply-to/@ref",tags:"a:category[not(@scheme)]/@term",permissions:"snx:permissions",communityUuid:"snx:communityUuid",threadCount:"a:link[@rel='replies']/@thr:count",
locked:"a:category[@term='locked' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",pinned:"a:category[@term='pinned' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",question:"a:category[@term='question' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",answered:"a:category[@term='answered' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",notRecommendedByCurrentUser:"a:category[@term='NotRecommendedByCurrentUser']",threadRecommendationCount:"a:category[@term='ThreadRecommendationCount']/@label",
recommendationsUrl:"a:link[@rel='recommendations']/@href"},h.AtomEntryXPath),ForumReplyXPath:i.mixin({replyUuid:"a:id",topicUuid:"thr:in-reply-to/@ref",permissions:"snx:permissions",communityUuid:"snx:communityUuid",answer:"a:category[@term='answer' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",replyTo:"thr:in-reply-to/@ref",notRecommendedByCurrentUser:"a:category[@term='NotRecommendedByCurrentUser']",recommendationsUrl:"a:link[@rel='recommendations']/@href"},h.AtomEntryXPath),ForumRecommendationXPath:i.mixin({postUuid:"a:link[@rel='self']/@href"},
h.AtomEntryXPath),AtomForum:"${forums}/atom/forum",AtomTopic:"/${forums}/atom/topic",AtomReply:"/${forums}/atom/reply",AtomForums:"/${forums}/atom/forums",AtomForumsPublic:"/${forums}/atom/forums/public",AtomForumsMy:"/${forums}/atom/forums/my",AtomTopics:"/${forums}/atom/topics",AtomTopicsMy:"/${forums}/atom/topics/my",AtomReplies:"/${forums}/atom/replies",AtomTagsForum:"/atom/tags/forums",AtomTagsTopics:"/atom/tags/topics",AtomRecommendationEntries:"/${forums}/atom/recommendation/entries"})})},
"sbt/stringUtil":function(){define(["./xml"],function(i){var h=RegExp("{-?[0-9]+}","g");return{substitute:function(c,d,b){return c&&d?c.replace(h,function(a){a=parseInt(a.substring(1,a.length-1));return 0<=a?d[a]?d[a]:b?"":"undefined":-1==a?"{":-2==a?"}":""}):c},replace:function(c,d){return c&&d?c.replace(/{(\w*)}/g,function(b,a){return d.hasOwnProperty(a)?i.encodeXmlEntry(d[a]):""}):c},trim:function(c){return c?c.replace(/^\s+|\s+$/g,""):c},startsWith:function(c,d){return c.length>=d.length&&c.substring(0,
d.length)==d},endsWith:function(c,d){return c.length>=d.length&&c.substring(c.length-d.length)==d},transform:function(c,d,b,a){return c.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(g,c){var k=d[c]||"";if("function"==typeof k)try{k=k.apply(a,[d])}catch(h){k="ERROR:"+c+" "+h}b&&(k=b.call(a,k,c));return"undefined"==typeof k||null==k?"":k.toString()})},hashCode:function(c){if(0==c.length)return 0;var d=0,b,a;for(b=0,l=c.length;b<l;b++)a=c.charCodeAt(b),d=(d<<5)-d+a,d|=0;return d},htmlEntity:function(c){return c.replace(/[\u00A0-\u9999<>\&]/gim,
function(c){return"&#"+c.charCodeAt(0)+";"})}}})},"sbt/base/XmlDataHandler":function(){define("../declare,../lang,../stringUtil,../xml,../xpath,./DataHandler".split(","),function(i,h,c,d,b,a){return i(a,{dataType:"xml",xpath:null,namespaces:null,_values:null,_summary:null,constructor:function(a){h.mixin(this,a);this._values={};this.data=this._fromNodeOrString(a.data)},setData:function(a){this._values={};this.data=this._fromNodeOrString(a)},getAsString:function(a){this._validateProperty(a,"getAsString");
return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectText(a)),this._values[a]):_selectText(a)},getAsNumber:function(a){this._validateProperty(a,"getAsNumber");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectNumber(a)),this._values[a]):this._selectNumber(a)},getAsDate:function(a){this._validateProperty(a,"getAsDate");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectDate(a)),this._values[a]):this._selectDate(a)},
getAsBoolean:function(a){this._validateProperty(a,"getAsBoolean");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectBoolean(a)),this._values[a]):this._selectBoolean(a)},getAsArray:function(a){this._validateProperty(a,"getAsArray");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectArray(a)),this._values[a]):this._selectArray(a)},getAsNodesArray:function(a){this._validateProperty(a,"getNodesArray");return this._values?(this._values.hasOwnProperty(a)||
(this._values[a]=this._selectNodesArray(a)),this._values[a]):this._selectNodesArray(a)},getEntityId:function(){return c.trim(this.getAsString("uid"))},getEntityData:function(a){var c=this.xpath.entry;if(!c)return a;this._values.entry||(this._values.entry=b.selectNodes(a,c,this.namespaces)[0]||null);return this._values.entry},getSummary:function(){if(!this._summary&&this._getXPath("totalResults"))this._summary={totalResults:b.selectNumber(this.data,this._getXPath("totalResults"),this.namespaces),startIndex:b.selectNumber(this.data,
this._getXPath("startIndex"),this.namespaces),itemsPerPage:b.selectNumber(this.data,this._getXPath("itemsPerPage"),this.namespaces)};return this._summary},getEntitiesDataArray:function(){var a=this.xpath.entries;if(!a)return this.data;this._values.entries||(this._values.entries=b.selectNodes(this.data,a,this.namespaces));return this._values.entries},toJson:function(){var a={},b;for(b in this.xpath)this.xpath.hasOwnProperty(b)&&(a[b]=this.getAsString(b));return a},_fromNodeOrString:function(a){return h.isString(a)?
(a=c.trim(a),this.getEntityData(d.parse(a))):a},_getXPath:function(a){return this.xpath[a]||a},_validateProperty:function(a,b){if(!a){var d=c.substitute("Invalid argument for XmlDataHandler.{1} {0}",[a,b]);throw Error(d);}},_selectText:function(a){return!this.data?null:c.trim(b.selectText(this.data,this._getXPath(a),this.namespaces))},_selectNumber:function(a){return!this.data?null:b.selectNumber(this.data,this._getXPath(a),this.namespaces)},_selectDate:function(a){return!this.data?null:(a=this._selectText(a))?
new Date(Date.parse(a)):null},_selectBoolean:function(a){if(!this.data)return!1;var a=b.selectNodes(this.data,this._getXPath(a),this.namespaces),j=!1;if(a){if(1==a.length&&(j=c.trim(a[0].text||a[0].textContent))){j=j.toLowerCase();if("false"==j)return!1;if("true"==j)return!0}j=0<a.length}return j},_selectArray:function(a){if(!this.data)return null;var a=b.selectNodes(this.data,this._getXPath(a),this.namespaces),j=null;if(a)for(var j=[],d=0;d<a.length;d++)j.push(c.trim(a[d].text||a[d].textContent));
return j},_selectNodesArray:function(a){return!this.data?null:b.selectNodes(this.data,this._getXPath(a),this.namespaces)}})})},"sbt/base/BaseEntity":function(){define(["../declare","../lang","../log","../stringUtil"],function(i,h,c,d){return i(null,{id:null,service:null,dataHandler:null,_fields:null,constructor:function(b){h.mixin(this,b);if(!this._fields)this._fields={};if(!this.service)throw Error("Invalid BaseEntity, an associated service must be specified.");},setDataHandler:function(b){this._fields=
{};this.dataHandler=b},setData:function(b){this._fields={};this.dataHandler.setData(b)},isLoaded:function(){return this.dataHandler?this.dataHandler.getData()?!0:!1:!1},getAsString:function(b){this._validateFieldName(b,"getAsString");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsString(b):null},getAsNumber:function(b){this._validateFieldName(b,"getAsNumber");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsNumber(b):
null},getAsDate:function(b){this._validateFieldName(b,"getAsDate");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsDate(b):null},getAsBoolean:function(b){this._validateFieldName(b,"getAsBoolean");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsBoolean(b):!1},getAsArray:function(b){this._validateFieldName(b,"getAsArray");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsArray(b):
null},getAsNodesArray:function(b){this._validateFieldName(b,"getAsNodesArray");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsNodesArray(b):null},getAsObject:function(b,a){for(var c={},j=0;j<b.length;j++){this._validateFieldName(b[j],"getAsObject");var d=this.getAsString(b[j]);d&&(a?c[a[j]]=d:c[b[j]]=d)}return c},setAsString:function(b,a){this._validateFieldName(b,"setAsString",a);null===a||void 0===a?delete this._fields[b]:this._fields[b]=a.toString();
return this},setAsNumber:function(b,a){this._validateFieldName(b,"setAsNumber",a);if(a instanceof Number)this._fields[b]=a;else if(a){var c=new Number(a);if(isNaN(c))throw c=d.substitute("Invalid argument for BaseService.setAsNumber {0},{1}",[b,a]),Error(c);this._fields[b]=c}else delete this._fields[b];return this},setAsDate:function(b,a){this._validateFieldName(b,"setAsDate",a);if(a instanceof Date)this._fields[b]=a;else if(a){var c=new Date(a);if(isNaN(c.getDate()))throw c=d.substitute("Invalid argument for BaseService.setAsDate {0},{1}",
[b,a]),Error(c);this._fields[b]=c}else delete this._fields[b];return this},setAsBoolean:function(b,a){this._validateFieldName(b,"setAsBoolean",a);null!=a?this._fields[b]=a?!0:!1:delete this._fields[b];return this},setAsArray:function(b,a){this._validateFieldName(b,"setAsArray",a);h.isArray(a)?this._fields[b]=a.slice(0):h.isString(a)?this._fields[b]=0<a.length?a.split(/[ ,]+/):[]:a?this._fields[b]=[a]:delete this._fields[b];return this},setAsObject:function(b){for(var a in b)if(b.hasOwnProperty(a)){var c=
b[a];c?this._fields[a]=c:delete this._fields[a]}},remove:function(b){delete this._fields[b]},toJson:function(){return this.dataHandler?this.dataHandler.toJson():{}},_validateFieldName:function(b,a,c){if(!b)throw b=d.substitute("Invalid argument for BaseService.{1} {0},{2}",[b,a,c||""]),Error(b);}})})},"sbt/smartcloud/ProfileConstants":function(){define(["../lang"],function(i){return i.mixin({},{DefaultCacheSize:10,GetProfile:"/lotuslive-shindig-server/social/rest/people/@me/@self",GetMyConnections:"/lotuslive-shindig-server/social/rest/people/@me/@friends",
GetUserIdentity:"/manage/oauth/getUserIdentity",GetContactByGUID:"/lotuslive-shindig-server/social/rest/people/lotuslive:contact:{idToBeReplaced}/@self",GetProfileByGUID:"/lotuslive-shindig-server/social/rest/people/lotuslive:user:{idToBeReplaced}/@self",GetMyContacts:"/lotuslive-shindig-server/social/rest/people/@me/@all",ProfileJsonPath:{thumbnailUrl:"$..photo",address:"$..address",department:"$..name",jobTitle:"$..jobtitle",telephone:"$..telephone",about:"$..aboutMe",id:"$..id",objectId:"$..objectId",
displayName:"$..displayName",emailAddress:"$..emailAddress",profileUrl:"$..profileUrl",country:"$..country",orgId:"$..orgId",org:"$..org.name",global:"$..",firstElement:"$[0]",totalResults:"totalResults",startIndex:"startIndex",itemsPerPage:"itemsPerPage"}})})},"sbt/MockTransport":function(){define("./declare,./lang,./dom,./xml,./json,./stringUtil,./Promise".split(","),function(i,h,c,d,b,a,g){return i(null,{requestMap:{},request:function(d,k){var h=this.createQuery(k.query);d&&h&&(d+=(~d.indexOf("?")?
"&":"?")+h);h=new g;h.response=new g;var i=d,m=a.hashCode(i);this.requestMap[m]?(this.requestMap[m]+=1,i+="#"+this.requestMap[m]):this.requestMap[m]=1;var n=c.byId(i);if(n){i=n.text||n.textContent;"json"==n.getAttribute("handleAs")&&(i=b.parse(i));var m=n.getAttribute("status"),e=n.getAttribute("error");"true"==e?(e=Error(),e.code=Number(m||400),e.message=this.getErrorText(i),e.response=this.createResponse(d,k,i,Number(m||400),{}),h.rejected(e),h.response.rejected(e)):(e={Location:n.getAttribute("location")},
h.fulfilled(i),h.response.fulfilled(this.createResponse(d,k,i,Number(m||200),e)))}else i="Unable to find mock response for: "+d,e=Error(i),e.response={status:400,message:i},h.rejected(e),h.response.rejected(e);return h},createResponse:function(a,b,c,g,d){return{url:a,options:b,data:c,text:"text"==(b.handleAs||"text")?c:null,status:g,getHeader:function(a){return d[a]}}},createQuery:function(a){if(!a)return null;var b=[],c;for(c in a){var g=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(g))}return b.join("&")},
getErrorText:function(a){if(a){try{var b=d.parse(a).getElementsByTagName("message");b&&0!=b.length&&(a=b[0].text||b[0].textContent,a=h.trim(a))}catch(c){}return a.replace(/(\r\n|\n|\r)/g,"")}return a}})})},"sbt/lang":function(){define(["./_bridge/lang"],function(i){return i})},"sbt/Endpoint":function(){define("./declare,./lang,./ErrorTransport,./Promise,./pathUtil,./compat,./log,./stringUtil,sbt/i18n!sbt/nls/Endpoint,./xml".split(","),function(i,h,c,d,b,a,g,j,k,o){return i(null,{baseUrl:null,proxy:null,
proxyPath:null,transport:null,authenticator:null,authType:null,loginUi:"",loginPage:null,dialogLoginPage:null,autoAuthenticate:null,isAuthenticated:!1,authenticationErrorCode:null,constructor:function(a){h.mixin(this,a||{})},request:function(a,c){var g=a;0!=g.indexOf("http")&&(g=this.proxy?this.proxy.rewriteUrl(this.baseUrl,a,this.proxyPath):b.concat(this.baseUrl,a));c||(c={method:"GET",handleAs:"text"});c.name=this.name;var e=new d;e.response=new d;var j=this;this.transport.request(g,c).response.then(function(b){"form"==
j.authType&&j._isAuthRequiredFormBasedEP(b,c)&&j._authenticate(a,c,e);e.fulfilled(b.data);e.response.fulfilled(b)},function(b){if(!b.message)b.message=j.getErrorMessage(b.cause);j._isAuthRequired(b,c).then(function(g){g?j._authenticate(a,c,e):(e.rejected(b),e.response.rejected(b))},function(a){e.rejected(a);e.response.rejected(a)})});return e},xhr:function(a,c,g){var e=this,d=h.mixin({},c);if(!d.url)d.url=this.proxy?this.proxy.rewriteUrl(this.baseUrl,d.serviceUrl,this.proxyPath):b.concat(this.baseUrl,
d.serviceUrl);delete d.load;delete d.error;d.handle=function(b,j){if(b instanceof Error){if(!b.message)b.message=e.getErrorMessage(b.cause);var k=!1;403==b.code&&403==e.authenticationErrorCode&&e.isAuthenticated&&(k=!0);if(401==b.code||!k&&b.code==e.authenticationErrorCode)if(k=d.autoAuthenticate||e.autoAuthenticate,void 0==k&&(k=!0),k&&e.authenticator&&(options={dialogLoginPage:e.loginDialogPage,loginPage:e.loginPage,transport:e.transport,proxy:e.proxy,proxyPath:e.proxyPath,loginUi:d.loginUi||e.loginUi,
name:e.name,callback:function(){e.xhr(a,c,g)}},e.authenticator.authenticate(options)))return;e._notifyError(c,b,j)}else e._notifyResponse(c,b,j)};this.transport.xhr(a,d,g)},xhrGet:function(a){this.xhr("GET",a)},xhrPost:function(a){this.xhr("POST",a,!0)},xhrPut:function(a){this.xhr("PUT",a,!0)},xhrDelete:function(a){this.xhr("DELETE",a)},authenticate:function(a){var b=new d,a=a||{};a.forceAuthentication||!this.isAuthenticated?this.authenticator.authenticate({dialogLoginPage:this.loginDialogPage,loginPage:this.loginPage,
transport:this.transport,proxy:this.proxy,proxyPath:this.proxyPath,loginUi:a.loginUi||this.loginUi,name:this.name,callback:function(a){b.fulfilled(a)},cancel:function(a){b.rejected(a)}}):b.fulfilled(!0);return b},logout:function(a){var b=new d,a=a||{},c=this,e="";a.actionUrl?e=a.actionUrl:(a=this.proxy.proxyUrl,e=a.substring(0,a.lastIndexOf("/"))+"/authHandler/"+this.proxyPath+"/logout");this.transport.xhr("POST",{handleAs:"json",url:e,load:function(a){c.isAuthenticated=!1;b.fulfilled(a)},error:function(a){c.isAuthenticated=
!1;b.rejected(a)}},!0);return b},isAuthenticated:function(a){var b=new d,a=a||{},c=this,e="";a.actionUrl?e=a.actionUrl:(a=this.proxy.proxyUrl,e=a.substring(0,a.lastIndexOf("/"))+"/authHandler/"+this.proxyPath+"/isAuth");this.transport.xhr("POST",{handleAs:"json",url:e,load:function(a){c.isAuthenticated=!0;b.fulfilled(a)},error:function(a){b.rejected(a)}},!0);return b},isAuthenticationValid:function(a){var b=new d,a=a||{},c=this,e="";a.actionUrl?e=a.actionUrl:(a=this.proxy.proxyUrl,e=a.substring(0,
a.lastIndexOf("/"))+"/authHandler/"+this.proxyPath+"/isAuthValid");this.transport.xhr("POST",{handleAs:"json",url:e,load:function(a){c.isAuthenticated=a.result;b.fulfilled(a)},error:function(a){b.rejected(a)}},!0);return b},_notifyError:function(a,b,c){if(a.handle)try{a.handle(b,c)}catch(e){}if(a.error)try{a.error(b,c)}catch(g){}},_notifyResponse:function(a,b,c){if(a.handle)try{a.handle(b,c)}catch(e){}if(a.load)try{a.load(b,c)}catch(g){}},_authenticate:function(a,b,c){var e=this;return this.authenticator.authenticate({dialogLoginPage:this.loginDialogPage,
loginPage:this.loginPage,transport:this.transport,proxy:this.proxy,proxyPath:this.proxyPath,actionUrl:b.actionUrl,loginUi:b.loginUi||this.loginUi,name:this.name,callback:function(){e.request(a,b).response.then(function(a){c.fulfilled(a.data);c.response.fulfilled(a)},function(a){c.rejected(a);c.response.rejected(a)})},cancel:function(){e._authRejected=!0;var a=Error();a.message="Authentication is required and has failed or has not yet been provided.";a.code=401;c.rejected(a);c.response.rejected(a)}})},
_isAuthRequired:function(a,b){var c=new d,e=a.response.status||null,e=401==e||e==this.authenticationErrorCode;if(this.isAuthenticated)e?this.isAuthenticationValid().then(function(a){c.fulfilled(!a.result)},function(a){c.rejected(a)}):c.fulfilled(!1);else{var g=b.autoAuthenticate||this.autoAuthenticate;void 0==g&&(g=!0);c.fulfilled(e&&g&&this.authenticator&&!this._authRejected)}return c},_isAuthRequiredFormBasedEP:function(a){return 200==a.status&&"text/html"==a.getHeader("Content-Type")?!0:!1},getErrorMessage:function(a){var b=
a.responseText||a.response&&a.response.text;if(b){try{var c=o.parse(b).getElementsByTagName("message");c&&0!=c.length&&(b=c[0].text||c[0].textContent,b=h.trim(b))}catch(e){}return b.replace(/(\r\n|\n|\r)/g,"")?b:a.message}return a},getProxyUrl:function(){return this.proxy.proxyUrl+"/"+this.proxyPath},modifyUrlContextRoot:function(a,b){var c=b?{}:h.mixin({},b),c=h.mixin(c,this.serviceMapping);return j.transform(a,c,function(a,b){return a?a:b},this)}})})},"sbt/Portlet":function(){define([],function(){sbt.getUserPref=
function(){}})},"sbt/connections/CommunityService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./CommunityConstants,./ConnectionsService,../base/AtomEntity,../base/XmlDataHandler,./ForumService,./BookmarkService,../pathUtil".split(","),function(i,h,c,d,b,a,g,j,k,o,p){var m=i(k,{getEntityId:function(){var a=d.trim(this.getAsString("uid"));return u(this.service,a)}}),n=i(j,{xpath:a.CommunityXPath,namespaces:a.CommunityNamespaces,categoryScheme:'<category term="community" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',
constructor:function(){},createDataHandler:function(a,b,f,e,c){return new m({service:a,data:b,namespaces:e,xpath:c})},createEntryData:function(){var a,b=function(a){return a};a=""+d.transform("<snx:communityType>${getCommunityType}</snx:communityType>",this,b,this);a+=d.transform("<snx:isExternal>${isExternal}</snx:isExternal>",this,b,this);this.getCommunityUuid()&&(a+=d.transform('<snx:communityUuid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${getCommunityUuid}</snx:communityUuid><id>instance?communityUuid=${getCommunityUuid}</id> ',
this,b,this));this.isSubCommunity()&&(a+=d.transform('<link href="${getParentCommunityUrl}" rel="http://www.ibm.com/xmlns/prod/sn/parentcommunity" type="application/atom+xml"> </link>',this,b,this));this.getCommunityTheme()&&(a+=d.transform('<snx:communityTheme xmlns:snx="http://www.ibm.com/xmlns/prod/sn" snx:uuid="default">${getCommunityTheme}</snx:communityTheme>',this,b,this));return d.trim(a)},getCommunityUuid:function(){var a=this.getAsString("communityUuid");return u(this.service,a)},setCommunityUuid:function(a){return this.setAsString("communityUuid",
a)},getCommunityType:function(){var b=this.getAsString("communityType");if(!b)b=a.Restricted;return b},setCommunityType:function(a){return this.setAsString("communityType",a)},getCommunityTheme:function(){return this.getAsString("communityTheme")},setCommunityTheme:function(a){return this.setAsString("communityTheme",a)},isExternal:function(){return this.getAsBoolean("isExternal")},setExternal:function(a){return this.setAsBoolean("isExternal",a)},isSubCommunity:function(){var a=this.getParentCommunityUrl();
return null!=a&&""!=a?!0:!1},getParentCommunityUrl:function(){return this.getAsString("parentCommunityUrl")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getCommunityUrl:function(){return this.getAlternateUrl()},getLogoUrl:function(){return this.getAsString("logoUrl")},getMemberCount:function(){return this.getAsNumber("memberCount")},getForumTopics:function(a){return this.service.getForumTopics(this.getCommunityUuid(),a)},createForumTopic:function(a,
b,f){c.isString(a)||(f=b,b=a);return this.service.createForumTopic(b,f)},getSubCommunities:function(a){return this.service.getSubCommunities(this.getCommunityUuid(),a)},getMembers:function(a){return this.service.getMembers(this.getCommunityUuid(),a)},addMember:function(a,b){return this.service.addMember(this.getCommunityUuid(),a,b)},removeMember:function(a,b){return this.service.removeMember(this.getCommunityUuid(),a,b)},getMember:function(a,b){return this.service.getMember(this.getCommunityUuid(),
a,b)},getAllInvites:function(a){return this.service.getAllInvites(this.getCommunityUuid(),a)},getForums:function(a){var b=this.service.getForumService(),a=c.mixin(a||{},{communityUuid:this.getCommunityUuid()});return b.getForums(a)},load:function(b){var f=this.getCommunityUuid(),e=this.service._validateCommunityUuid(f);if(e)return e;var g=this,b={handleAs:"text",query:c.mixin({communityUuid:f},b||{})};return this.service.getEntity(a.AtomCommunityInstance,b,f,{createEntity:function(a,b,f){g.setData(b,
f);return g}})},remove:function(a){return this.service.deleteCommunity(this.getCommunityUuid(),a)},update:function(a){return this.service.updateCommunity(this,a)},save:function(a){return this.getCommunityUuid()?this.service.updateCommunity(this,a):this.service.createCommunity(this,a)}}),e=i(j,{xpath:a.MemberXPath,namespaces:a.CommunityNamespaces,categoryScheme:'<category term="person" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',communityUuid:null,constructor:function(){this.getRole()||
this.setRole(a.Member)},createEntryData:function(){var a;a=""+d.transform('<snx:role xmlns:snx="http://www.ibm.com/xmlns/prod/sn" component="http://www.ibm.com/xmlns/prod/sn/communities">${getRole}</snx:role>',this,function(a){return a},this);return d.trim(a)},getCommunityUuid:function(){return this.communityUuid},getName:function(){return this.getAsString("contributorName")},setName:function(a){return this.setAsString("contributorName",a)},getUserid:function(){return this.getAsString("contributorUserid")},
setUserid:function(a){return this.setAsString("contributorUserid",a)},getEmail:function(){return this.getAsString("contributorEmail")},setEmail:function(a){return this.setAsString("contributorEmail",a)},getRole:function(){return this.getAsString("role")},setRole:function(a){return this.setAsString("role",a)},load:function(b){var f=this.communityUuid,e=this.service._validateCommunityUuid(f);if(e)return e;var g=this,f={communityUuid:f},e=null,e=this.getUserid()?f.userid=this.getUserid():f.email=this.getEmail(),
f=c.mixin(f,b||{});return this.service.getEntity(a.AtomCommunityMembers,{handleAs:"text",query:f},e,{createEntity:function(a,b,f){g.setData(b,f);return g}})},remove:function(a){var b=this.getUserid()||this.getEmail();return this.service.removeMember(this.getCommunityUuid(),b,a)}}),r=i(j,{xpath:a.InviteXPath,namespaces:a.CommunityNamespaces,categoryScheme:'<category term="invite" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',communityUuid:null,inviteeUuid:null,constructor:function(a){this.inherited(arguments,
[a])},getInviteUuid:function(){var a=this.getAsString("inviteUuid");return a&&0==a.indexOf("urn:lsid:ibm.com:communities:invite-")?a.substring(36):a},setInviteUuid:function(a){return this.setAsString("inviteUuid",a)},setCommunityUuid:function(a){this.communityUuid=a;return this},getCommunityUuid:function(){if(!this.communityUuid)this.communityUuid=this.service.getUrlParameter(this.getAsString("communityUrl"),"communityUuid");return this.communityUuid},setInviteeUuid:function(a){this.inviteeUuid=a;
return this},getInviteeUuid:function(){if(!this.inviteeUuid){var a=this.getInviteUuid(),b=this.getCommunityUuid();this.inviteeUuid=a&&0==a.indexOf(b)?a.substring(b.length+1):a}return this.inviteeUuid},setUserid:function(a){return this.setAsString("contributorUserid",a)},getUserid:function(){return this.getAsString("contributorUserid")},setEmail:function(a){return this.setAsString("contributorEmail",a)},getEmail:function(){return this.getAsString("contributorEmail")},load:function(b){var f=this.getCommunityUuid(),
e=this.service._validateCommunityUuid(f);if(e)return e;var g=this.getInviteeUuid();if(e=this.service._validateUserid(g))return e;var q=this,b={handleAs:"text",query:c.mixin({communityUuid:f,userid:g},b||{})};return this.service.getEntity(a.AtomCommunityInvites,b,f+"-"+g,{createEntity:function(a,b,f){q.setData(b,f);return q}})},remove:function(a){return this.service.removeInvite(this,a)},update:function(a){return this.service.updateInvite(this,a)},save:function(a){return this.getInviteUuid()?this.service.updateInvite(this,
a):this.service.createInvite(this,a)}}),s=i(j,{constructor:function(){},getEventUuid:function(){return this.getAsString("eventUuid")},getLocation:function(){return this.getAsString("location")},getAllDay:function(){return 0!==this.getAsString("allDay")},getSelfLink:function(){return this.getAsString("selfLink")},getSource:function(){return this.getAsObject(["id","title","link"],["id","title","link"])},getRecurrence:function(){return this.getAsObject("frequency,interval,until,allDay,startDate,endDate,byDay".split(","),
"frequency,interval,until,allDay,startDate,endDate,byDay".split(","))},getCommunityLink:function(){this.getAsString("communityLink")},getCommunityUuid:function(){return this.getAsString("communityUuid")}}),t=i(s,{constructor:function(){},getEventInstUuid:function(){return this.getAsString("eventInstUuid")},getFollowed:function(){return this.getAsString("followed")},getAttended:function(){return this.getAsString("attended")},getParentEventId:function(){return this.getAsString("parentEventId")},getParentEventLink:function(){return this.getAsString("parentEventLink")},
getStartDate:function(){return this.getAsString("instStartDate")},getEndDate:function(){return this.getAsString("instEndDate")}}),u=function(a,b){return b&&0==b.indexOf("http")?a.getUrlParameter(b,"communityUuid"):b},f={createEntities:function(b,f){return new m({service:b,data:f,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(a,b,f){return new n({service:a,data:b,response:f})}},q={createEntities:function(b,f){return new k({service:b,data:f,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})}},
v={createEntities:function(b,f){return new k({service:b,data:f,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(a,b,f){return new r({service:a,data:b,response:f})}},y={createEntities:function(b,f){return new k({service:b,data:f,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(b,f){var e=new k({service:b,data:f,namespaces:a.Namespaces,xpath:a.EventXPath});return new s({service:b,id:e.getEntityId(),dataHandler:e})}},x={createEntities:function(b,
f){return new k({service:b,data:f,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(b,f){var e=new k({service:b,data:f,namespaces:a.Namespaces,xpath:a.EventXPath});return new t({service:b,id:e.getEntityId(),dataHandler:e})}},z={createEntity:function(b,f){var e=new k({service:b,data:f,namespaces:a.Namespaces,xpath:a.EventXPath});return new t({service:b,id:e.getEntityId(),dataHandler:e})}};return i(g,{forumService:null,bookmarkService:null,contextRootMap:{communities:"communities"},
serviceName:"communities",constructor:function(){if(!this.endpoint)this.endpoint=h.findEndpoint(this.getDefaultEndpointName())},getForumService:function(){if(!this.forumService)this.forumService=new o,this.forumService.endpoint=this.endpoint;return this.forumService},getBookmarkService:function(){if(!this.bookmarkService)this.bookmarkService=new p,this.bookmarkService.endpoint=this.endpoint;return this.bookmarkService},getPublicCommunities:function(b){return this.getEntities(a.AtomCommunitiesAll,
{method:"GET",handleAs:"text",query:b||{}},f)},getMyCommunities:function(b){return this.getEntities(a.AtomCommunitiesMy,{method:"GET",handleAs:"text",query:b||{}},f)},getMembers:function(b,f){var g=this._validateCommunityUuid(b);if(g)return g;var g={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},f||{})},d=c.mixin({createEntity:function(a,f,c){return new e({service:a,communityUuid:b,data:f,response:c})}},q);return this.getEntities(a.AtomCommunityMembers,g,d)},getMember:function(a,b,f){a=
new e({service:this,communityUuid:a});this.isEmail(b)?a.setEmail(b):a.setUserid(b);return a.load(f)},getEventInsts:function(b){var f=this._validateEventUuid(b);return f?f:this.getEntities(a.AtomCommunityEvents,{method:"GET",handleAs:"text",query:{eventUuid:b,mode:"list"}},x)},_getCommunityEvents:function(b,f,e,g,q){var d=this._validateCommunityUuid(b)||this._validateDateTimes(f,e);if(d)return d;b={calendarUuid:b};f&&c.mixin(b,{startDate:f});e&&c.mixin(b,{endDate:e});g=c.mixin(g,b);return this.getEntities(a.AtomCommunityEvents,
{method:"GET",handleAs:"text",query:g||{}},q)},getCommunityEventInsts:function(a,b,f,e){return this._getCommunityEvents(a,b,f,e,x)},getCommunityEvents:function(a,b,f,e){return this._getCommunityEvents(a,b,f,c.mixin(e,{type:"event"}),y)},getEventInst:function(b){return this.getEntity(a.AtomCommunityEvents,{method:"GET",handleAs:"text",query:{eventInstUuid:b}},b,z)},getMyInvites:function(b){return this.getEntities(a.AtomCommunityInvitesMy,{method:"GET",handleAs:"text",query:b||{}},v)},getAllInvites:function(b,
f){var e=this._validateCommunityUuid(b);if(e)return e;e={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},f||{})};return this.getEntities(a.AtomCommunityInvites,e,v)},getSubCommunities:function(b,e){var g=this._validateCommunityUuid(b);if(g)return g;g={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},e||{})};return this.getEntities(a.AtomCommunitySubCommunities,g,f)},getForumTopics:function(a,b){return this.getForumService().getCommunityForumTopics(a,b)},newCommunity:function(a){return this._toCommunity(a)},
newMember:function(a){return this._toMember(a)},newInvite:function(a,b){return this._toInvite(a,b)},getCommunity:function(a,b){return(new n({service:this,_fields:{communityUuid:a}})).load(b)},createCommunity:function(b,f){var e=this._toCommunity(b),c=this._validateCommunity(e,!1,f);if(c)return c;c={method:"POST",query:f||{},headers:a.AtomXmlHeaders,data:e.createPostData()};return this.updateEntity(a.AtomCommunitiesMy,c,{createEntity:function(a,b,f){a=this.getLocationParameter(f,"communityUuid");e.setCommunityUuid(a);
return e}},f)},updateCommunity:function(b,f){var e=this._toCommunity(b),g=this._validateCommunity(e,!0,f);if(g)return g;g={method:"PUT",query:c.mixin({communityUuid:e.getCommunityUuid()},f||{}),headers:a.AtomXmlHeaders,data:e.createPostData()};return this.updateEntity(a.AtomCommunityInstance,g,{createEntity:function(a,b,f){a=e.getCommunityUuid();b&&e.setData(b,f);e.setCommunityUuid(a);return e}},f)},deleteCommunity:function(b,f){var e=this._validateCommunityUuid(b);if(e)return e;e={method:"DELETE",
query:c.mixin({communityUuid:b},f||{}),handleAs:"text"};return this.deleteEntity(a.AtomCommunityInstance,e,b)},addMember:function(b,f,e){var g=this._validateCommunityUuid(b);if(g)return g;var q=this._toMember(f);if(g=this._validateMember(q))return g;f={method:"POST",query:c.mixin({communityUuid:b},e||{}),headers:a.AtomXmlHeaders,data:q.createPostData()};return this.updateEntity(a.AtomCommunityMembers,f,{createEntity:function(a,f,e){a=this.getLocationParameter(e,"userid");q.setUserid(a);q.communityUuid=
b;return q}},e)},updateMember:function(b,f,e){var g=this.validateField("communityUuid",b);if(g)return g;f=this._toMember(f);if(g=this._validateMember(f,!0,!0))return g;var b={communityUuid:b},g=f.getEmail()?"email":"userid",q=f.getEmail()?f.getEmail():f.getUserid();b[g]=q;b=c.mixin(b,e||{});e={method:"PUT",headers:a.AtomXmlHeaders,query:b,data:f.createPostData()};return this.updateEntity(a.AtomCommunityMembers,e,{createEntity:function(a,b,f){return f}})},removeMember:function(b,f,e){var g=this._validateCommunityUuid(b);
if(g)return g;f=this._toMember(f);if(g=this._validateMember(f))return g;b={communityUuid:b};g=f.getEmail()?"email":"userid";f=f.getEmail()?f.getEmail():f.getUserid();b[g]=f;b=c.mixin(b,e||{});return this.deleteEntity(a.AtomCommunityMembers,{method:"DELETE",query:b,handleAs:"text"},f)},getInvite:function(a,b){return(new r({service:this,_fields:{communityUuid:a,userid:b}})).load()},createInvite:function(b,f){var e=this._toInvite(b),g=this._validateInvite(e,!0);if(g)return g;g={method:"POST",query:c.mixin({communityUuid:e.getCommunityUuid()},
f||{}),headers:a.AtomXmlHeaders,data:e.createPostData()};return this.updateEntity(a.AtomCommunityInvites,g,{createEntity:function(a,b,f){e.setData(b,f);return e}},f)},removeInvite:function(b,f){var e=this._toInvite(b),g=this._validateInvite(e,!0);if(g)return g;g={method:"DELETE",query:c.mixin({communityUuid:e.getCommunityUuid(),userid:e.getInviteeUuid()},f||{}),handleAs:"text"};e=e.getCommunityUuid()+"-"+e.getInviteeUuid();return this.deleteEntity(a.AtomCommunityInvites,g,e)},acceptInvite:function(b,
f){var e=this._toInvite(b),g=this._validateInvite(e,!0);if(g)return g;g={method:"POST",query:c.mixin({communityUuid:e.getCommunityUuid()},f||{}),headers:a.AtomXmlHeaders,data:e.createPostData()};return this.updateEntity(a.AtomCommunityMembers,g,{createEntity:function(a,b,f){e.setData(b,f);return e}},f)},createForumTopic:function(a,b,f){c.isString(a)||(f=b,b=a);return this.getForumService().createForumTopic(b,f)},updateCommunityLogo:function(b,f){var e=this.validateField("File Control Or Id",b);if(e||
(e=this.validateHTML5FileSupport()))return e;if(e=this.validateField("CommunityUuid",f))return e;e=null;e=this.getFileControl(b);if(!e)return this.createBadRequestPromise("File Control or ID is required");e=e.files;if(1!=e.length)return this.createBadRequestPromise("Only one file can be upload as a community logo.");var c=e[0],e=new FormData;e.append("file",c);var g={communityUuid:f},c=this.constructUrl(a.AtomUpdateCommunityLogo,null,{endpointName:this.endpoint.proxyPath,fileName:encodeURIComponent(c.name)});
if(this.endpoint.proxy)c=h.Properties.serviceUrl+c;else return this.createBadRequestPromise("File Proxy is required to upload a community logo");return this.updateEntity(c,{method:"PUT",headers:{"Content-Type":!1,"Process-Data":!1},query:g,data:e},{createEntity:function(a,b){return b}})},uploadCommunityFile:function(b,f){var e=this.validateField("File Control Or Id",b);if(e||(e=this.validateHTML5FileSupport()))return e;if(e=this.validateField("CommunityUuid",f))return e;e=null;e=this.getFileControl(b);
if(!e)return this.createBadRequestPromise("File Control or ID is required");e=e.files;if(1!=e.length)return this.createBadRequestPromise("Only one file can be uploaded to a community at a time");var c=e[0],e=new FormData;e.append("file",c);c=this.constructUrl(a.AtomUploadCommunityFile,null,{endpointName:this.endpoint.proxyPath,communityUuid:f});if(this.endpoint.proxy)c=h.Properties.serviceUrl+c;else return this.createBadRequestPromise("File proxy is required to upload a community file");return this.updateEntity(c,
{method:"POST",headers:{"Content-Type":!1,"Process-Data":!1,"X-Endpoint-name":this.endpoint.name},query:{},data:e},{createEntity:function(a,b){return b}})},createBookmark:function(b,f,e){e=c.mixin({url:a.AtomCommunityBookmarks,communityUuid:b},e||{});return this.getBookmarkService().createBookmark(f,e)},_toCommunity:function(a){if(a instanceof n)return a;c.isString(a)&&(a={communityUuid:a});return new n({service:this,_fields:c.mixin({},a)})},_toInvite:function(a){if(a instanceof r)return a;c.isString(a)&&
(a={communityUuid:a});return new r({service:this,_fields:c.mixin({},a)})},_toCommunityUuid:function(a){var b=null;a&&(c.isString(a)?b=a:a instanceof n&&(b=a.getCommunityUuid()));return b},_toMember:function(a){if(a){if(a instanceof e)return a;var b=new e({service:this});if(c.isString(a))this.isEmail(a)?b.setEmail(a):b.setUserid(a);else{if(a.id&&!a.userid&&!a.email)this.isEmail(a.id)?a.email=a.id:a.userid=a.id,delete a.id;b._fields=c.mixin({},a)}return b}},_validateCommunityUuid:function(a){if(!a||
0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateUserid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid.")},_validateDateTimes:function(a,b){if((!a||0===a.length)&&(!b||0===b.length))return this.createBadRequestPromise("Invalid date arguments, expected either a startDate, endDate or both as parameters.")},_validateContributorId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected contributorId.")},
_validateCommunity:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, community with title must be specified.");if(b&&!a.getCommunityUuid())return this.createBadRequestPromise("Invalid argument, community with UUID must be specified.")},_validateInvite:function(a,b){if(!a||!a.getEmail()&&!a.getUserid()&&!a.getInviteeUuid())return this.createBadRequestPromise("Invalid argument, invite with email or userid or invitee must be specified.");if(b&&!a.getCommunityUuid())return this.createBadRequestPromise("Invalid argument, invite with community UUID must be specified.")},
_validateMember:function(a){if(!a||!a.getUserid()&&!a.getEmail())return this.createBadRequestPromise("Invalid argument, member with userid or email must be specified.")},_validateEventInstUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected event inst uuid.")},_validateEventUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected eventUuid.")}})})},"sbt/smartcloud/Subscriber":function(){define(["../declare",
"../Endpoint"],function(i){return i(null,{endpoint:null,constructor:function(h,c){this.endpoint=h;c&&this.load(c)},load:function(h){var c=this;this.endpoint.xhrGet({serviceUrl:"/manage/oauth/getUserIdentity",loginUi:this.endpoint.loginUi,handleAs:"json",load:function(d){h(c,d)},error:function(){h(c,null);console.log("Error fetching feed for getUserIdentity")}})},getSubscriberId:function(h){return h&&h.subscriberid?h.subscriberid:null}})})},"sbt/connections/WikiConstants":function(){define(["../lang",
"./ConnectionsConstants"],function(i,h){var c=i.mixin({uuid:"td:uuid",label:"td:label",permissions:"td:permissions",tags:"a:category[not(@scheme)]/@term",modifierName:"td:modifier/a:name",modifierEmail:"td:modifier/a:email",modifierUserid:"td:modifier/snx:userid",modifierUserState:"td:modifier/snx:userState",created:"td:created",modified:"td:modified",member:"ca:member",memberId:"ca:member/@ca:id",memberType:"ca:member/@ca:type",memberRole:"ca:member/@ca:role"},h.AtomEntryXPath);return i.mixin(h,
{WikiFeedXPath:h.ConnectionsFeedXPath,WikiXPath:i.mixin({communityUuid:"snx:communityUuid",themeName:"td:themeName",librarySize:"td:librarySize",libraryQuota:"td:libraryQuota",totalRemovedSize:"td:totalRemovedSize"},c,h.AtomEntryXPath),WikiPageXPath:i.mixin({lastAccessed:"td:lastAccessed",versionUuid:"td:versionUuid",versionLabel:"td:versionLabel",propagation:"td:propagation",totalMediaSize:"td:totalMediaSize",recommendations:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",
comment:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",hit:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",anonymous_hit:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/anonymous_hit']",share:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/share']",collections:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/collections']",attachments:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/attachments']",versions:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/versions']"},
c,h.AtomEntryXPath),WikisAll:"/{wikis}/{authType}/api/wikis/feed",WikisPublic:"/{wikis}/{authType}/api/wikis/public",WikisMy:"/{wikis}/{authType}/api/mywikis/feed",WikisMostCommented:"/{wikis}/{authType}/anonymous/api/wikis/mostcommented",WikisMostRecommended:"/{wikis}/{authType}/api/wikis/mostrecommended",WikisMostVisited:"/{wikis}/{authType}/api/wikis/mostvisited",WikiPages:"/{wikis}/{authType}/anonymous/api/wiki/{wikiLabel}/feed",WikiMyPages:"/{wikis}/{authType}/api/wiki/{wikiLabel}/mypages",WikiRecycleBin:"/{wikis}/{authType}/anonymous/api/wiki/{wikiLabelOrId}/recyclebin/feed",
WikiEntry:"/{wikis}/{authType}/api/wiki/{wikiLabel}/entry",WikiPageEntry:"/{wikis}/{authType}/api/wiki/{wikiLabel}/page/{pageLabel}/entry",WikiFeed:"/{wikis}/{authType}/api/wiki/{wikiLabel}/feed"})})},"sbt/_bridge/text":function(){define(["dojo/text"],function(i){return{load:function(h,c,d){i.load(h,c,d)}}})},"sbt/_bridge/Transport":function(){define(["dojo/_base/declare","dojo/_base/xhr","dojo/_base/lang","../util","../Promise"],function(i,h,c,d,b){return i(null,{request:function(a,c){var d=c.method||
"GET",d=d.toUpperCase(),k=this.createQuery(c.query),h=a;h&&k&&(h+=(~h.indexOf("?")?"&":"?")+k);k={url:h,handleAs:c.handleAs||"text"};if(c.headers)k.headers=c.headers;h=!1;if("PUT"==d)k.putData=c.data||null,h=!0;else if("POST"==d)k.postData=c.data||null,h=!0;else if("GET"==d)k.preventCache=!0;var i=new b;i.response=new b;var m=this;k.handle=function(b,e){b instanceof Error?(b.response=m.createResponse(a,c,b,e),i.rejected(b),i.response.rejected(b)):(i.fulfilled(b),i.response.fulfilled(m.createResponse(a,
c,b,e)))};this.xhr(d,k,h);return i},createResponse:function(a,b,c,d){var h=d._ioargs.xhr;return{url:a,options:b,data:c,text:"text"==(b.handleAs||"text")?c:null,status:h.status,getHeader:function(a){return h.getResponseHeader(a)},xhr:h,_ioargs:d._ioargs}},createQuery:function(a){if(!a)return null;var b=[],d;for(d in a){var h=a[d];if(c.isArray(h)){d=encodeURIComponent(d);for(var i=0;i<h.length;i++)b.push(d+"="+encodeURIComponent(h[i]))}else b.push(encodeURIComponent(d)+"="+encodeURIComponent(h))}return b.join("&")},
xhr:function(a,b,d){var k=c.mixin({},b),i=this;k.handle=function(a,c){i.handleResponse(a,c,b)};h(a,k,d)},handleResponse:function(a,b,c){var h=a;a instanceof Error&&(h=this.createError(a,b));try{var i={args:c,headers:d.getAllResponseHeaders(b.xhr),_ioargs:b};c.handle(h,i)}catch(p){console.log(p)}},createError:function(a){var b=Error();b.code=a.status||a.response&&a.response.status||400;b.cause=a;if(a.response)b.response=c.mixin({},a.response);return b}})})},"sbt/connections/WikiService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./WikiConstants,./ConnectionsService,../base/AtomEntity,../base/XmlDataHandler".split(","),
function(i,h,c,d,b,a,g,j,k){var b=i(j,{includeLabelInPost:!1,constructor:function(){},createEntryData:function(){var a="",b=function(a){return a};this.getLabel()&&this.includeLabelInPost&&(a+=d.transform("<td:label>${getLabel}</td:label>",this,b,this));this.getPermissions()&&(a+=d.transform("<td:permissions>${getPermissions}</td:permissions>",this,b,this));return d.trim(a)},getTags:function(){this.getAsArray("tags");return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",
a)},getUuid:function(){var a=this.getAsString("uuid");return a&&0==a.indexOf("urn:lsid:ibm.com:td:")?a.substring(20):a},setUuid:function(a){return this.setAsString("uuid",a)},getLabel:function(){return this.getAsString("label")},setLabel:function(a){return this.setAsString("label",a)},getPermissions:function(){return this.getAsString("permissions")},setPermissions:function(a){return this.setAsString("permissions",a)},getModifier:function(){return this.getAsObject(["modifierUserid","modifierName",
"modifierEmail","modifierUserState"],["userid","name","email","userState"])},getCreated:function(){return this.getAsDate("created")},getModified:function(){return this.getAsDate("modified")}}),o=i(b,{xpath:a.WikiXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="wiki" label="wiki"></category>',constructor:function(){},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",
a)},getThemeName:function(){return this.getAsString("themeName")},getLibrarySize:function(){return this.getAsNumber("librarySize")},getLibraryQuota:function(){return this.getAsNumber("libraryQuota")},getTotalRemovedSize:function(){return this.getAsNumber("totalRemovedSize")},getPages:function(a){return this.service.getWikiPages(this.getLabel(),a)},load:function(b){var c=this.getLabel(),g=this.service._validateWikiLabel(c);if(g)return g;var d=this,b={method:"GET",handleAs:"text",query:b||{}};return this.service.getEntity(this.service.constructUrl(a.WikiEntry,
null,{wikiLabel:encodeURIComponent(c)}),b,c,{createEntity:function(a,b){d.setData(b);return d}})},remove:function(a){return this.service.deleteWiki(this.getLabel(),a)},update:function(a){return this.service.updateWiki(this,a)},save:function(a){return this.getWikiUuid()?this.service.updateWiki(this,a):this.service.createWiki(this,a)}}),p=i(b,{xpath:a.WikiPageXPath,contentType:"html",categoryScheme:'<category term="page" scheme="tag:ibm.com,2006:td/type" label="page"/>',wikiLabel:null,constructor:function(){},
getWikiLabel:function(){return this.wikiLabel?this.wikiLabel:this.getAsString("label")},setWikiLabel:function(a){this.wikiLabel=a;return this},getLastAccessed:function(){return this.getAsDate("lastAccessed")},getVersionUuid:function(){return this.getAsString("versionUuid")},getVersionLabel:function(){return this.getAsString("versionLabel")},getPropagation:function(){return this.getAsBoolean("propagation")},getTotalMediaSize:function(){return this.getAsNumber("totalMediaSize")},getRecommendations:function(){return this.getAsNumber("recommendations")},
getComments:function(){return this.getAsNumber("comment")},getHits:function(){return this.getAsNumber("hit")},getAnonymousHits:function(){return this.getAsNumber("anonymous_hit")},getShare:function(){return this.getAsNumber("share")},getCollections:function(){return this.getAsNumber("collections")},getAttachments:function(){return this.getAsNumber("attachments")},getVersions:function(){return this.getAsNumber("versions")},load:function(b){var c=this.getLabel(),g=this.service._validatePageLabel(c);
if(g)return g;var d=this.getWikiLabel();if(g=this.service._validateWikiLabel(d))return g;var j=this,b={method:"GET",handleAs:"text",query:b||{}},d={pageLabel:encodeURIComponent(c),wikiLabel:encodeURIComponent(d)};return this.service.getEntity(this.service.constructUrl(a.WikiPageEntry,null,d),b,c,{createEntity:function(a,b){j.setData(b);return j}})},remove:function(a){return this.service.deleteWikiPage(this.getLabel(),a)},update:function(a){return this.service.updateWikiPage(this,a)},save:function(a){return this.getWikiUuid()?
this.service.updateWikiPage(this,a):this.service.createWikiPage(this,a)}}),m={createEntities:function(b,c){return new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.WikiFeedXPath})},createEntity:function(a,b){return new o({service:a,data:b})}},n={createEntities:function(b,c){return new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.WikiFeedXPath})}};return i(g,{contextRootMap:{wikis:"wikis"},serviceName:"wikis",constructor:function(){if(!this.endpoint)this.endpoint=h.findEndpoint(this.getDefaultEndpointName())},
newWiki:function(a){return this._toWiki(a)},newWikiPage:function(a){return this._toWikiPage(a)},getAllWikis:function(b){return this.getEntities(a.WikisAll,{method:"GET",handleAs:"text",query:b||{}},m)},getPublicWikis:function(b){return this.getEntities(a.WikisPublic,{method:"GET",handleAs:"text",query:b||{}},m)},getMyWikis:function(b){return this.getEntities(a.WikisMy,{method:"GET",handleAs:"text",query:b||{}},m)},getMostCommentedWikis:function(b){return this.getEntities(a.WikisMostCommented,{method:"GET",
handleAs:"text",query:b||{}},m)},getMostRecommendedWikis:function(b){return this.getEntities(a.WikisMostRecommended,{method:"GET",handleAs:"text",query:b||{}},m)},getMostVisitedWikis:function(b){return this.getEntities(a.WikisMostVisited,{method:"GET",handleAs:"text",query:b||{}},m)},getWikiPages:function(b,g){var d=this._validateWikiLabel(b);if(d)return d;var d={method:"GET",handleAs:"text",query:g||{}},j=c.mixin(n,{createEntity:function(a,f){return new p({service:a,wikiLabel:b,data:f})}});return this.getEntities(this.constructUrl(a.WikiPages,
null,{wikiLabel:encodeURIComponent(b)}),d,j)},getMyWikiPages:function(b,g){var d=this._validateWikiLabel(b);if(d)return d;var d={method:"GET",handleAs:"text",query:g||{}},j=c.mixin(n,{createEntity:function(a,f){return new p({service:a,wikiLabel:b,data:f})}});return this.getEntities(this.constructUrl(a.WikiMyPages,null,{wikiLabel:encodeURIComponent(b)}),d,j)},getRecycledWikiPages:function(b,g){var d=this._validateWikiLabel(b);if(d)return d;var d={method:"GET",handleAs:"text",query:g||{}},j=c.mixin(n,
{createEntity:function(a,f){return new p({service:a,wikiLabelOrId:b,data:f})}});return this.getEntities(this.constructUrl(a.WikiRecycleBin,null,{wikiLabelOrId:encodeURIComponent(b)}),d,j)},getWiki:function(a,b){return(new o({service:this,_fields:{label:a}})).load(b)},createWiki:function(b,c){var g=this._toWiki(b),d=this._validateWiki(g,!1,c);if(d)return d;d={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:g.createPostData()};return this.updateEntity(a.WikisAll,d,{createEntity:function(a,b){g.setData(b);
return g}},c)},updateWiki:function(b,c){var g=this._toWiki(b),d=this._validateWiki(g,!0,c);if(d)return d;d={method:"PUT",query:c||{},headers:a.AtomXmlHeaders,data:g.createPostData()};return this.updateEntity(this.constructUrl(a.WikiEntry,null,{wikiLabel:encodeURIComponent(g.getLabel())}),d,{createEntity:function(a,b){g.setData(b);return g}},c)},deleteWiki:function(b,c){var g=this._validateWikiLabel(b);if(g)return g;g={method:"DELETE",query:c||{},handleAs:"text"};return this.deleteEntity(this.constructUrl(a.WikiEntry,
null,{wikiLabel:encodeURIComponent(b)}),g,b)},getWikiPage:function(a,b,c){return(new p({service:this,wikiLabel:a,_fields:{label:b}})).load(c)},createWikiPage:function(b,c){var g=this._toWikiPage(b),d=this._validateWikiPage(g,!1,c);if(d)return d;d={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:g.createPostData()};return this.updateEntity(this.constructUrl(a.WikiFeed,null,{wikiLabel:encodeURIComponent(g.getWikiLabel())}),d,{createEntity:function(a,b){wiki.setData(b);return wiki}},c)},updateWikiPage:function(b,
c){var g=this._toWikiPage(b),d=this._validateWikiPage(g,!0,c);if(d)return d;var d={method:"PUT",query:c||{},headers:a.AtomXmlHeaders,data:g.createPostData()},j={pageLabel:encodeURIComponent(g.getLabel()),wikiLabel:encodeURIComponent(g.getWikiLabel())};return this.updateEntity(this.constructUrl(a.WikiPageEntry,null,j),d,{createEntity:function(a,b){g.setData(b);return g}},c)},deleteWikiPage:function(b,c,g){var d=this._validateWikiLabel(b);if(d||(d=this._validatePageLabel(c)))return d;c={method:"DELETE",
query:g||{},handleAs:"text"};g={pageLabel:encodeURIComponent(label),wikiLabel:encodeURIComponent(b)};return this.deleteEntity(this.constructUrl(a.WikiPageEntry,null,g),c,b)},constructUrl:function(a,b,g){if(!a)throw Error("BaseService.constructUrl: Invalid argument, url is undefined or null.");g=c.mixin({authType:this.endpoint.authType},this.contextRootMap,this.endpoint.serviceMappings,g||{});a=d.replace(a,g);if(b)for(param in b)-1==a.indexOf("?")?a+="?":a.indexOf("&")!=a.length-1&&(a+="&"),(g=encodeURIComponent(b[param]))&&
(a+=param+"="+g);return a},_validateWiki:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, wiki with title must be specified.");if(b&&!a.getLabel())return this.createBadRequestPromise("Invalid argument, wiki with label must be specified.")},_validateWikiPage:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, wiki page with title must be specified.");if(b&&!a.getLabel())return this.createBadRequestPromise("Invalid argument, wiki page with label must be specified.");
if(b&&!a.getWikiLabel())return this.createBadRequestPromise("Invalid argument, wiki page with wiki label must be specified.")},_validateWikiLabel:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected wiki label.")},_validatePageLabel:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected wiki page label.")},_validateWikiUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected wikiUuid.")},
_toWiki:function(a){if(a instanceof o)return a;c.isString(a)&&(a={handle:a});return new o({service:this,_fields:c.mixin({},a)})},_toWikiPage:function(a){if(a instanceof p)return a;c.isString(a)&&(a={handle:a});return new p({service:this,_fields:c.mixin({},a)})}})})},"sbt/Jsonpath":function(){define(["./declare"],function(){return function(i,h,c){var d={resultType:c&&c.resultType||"VALUE",result:[],normalize:function(a){var b=[];return a.replace(/[\['](\??\(.*?\))[\]']/g,function(a,c){return"[#"+(b.push(c)-
1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").replace(/#([0-9]+)/g,function(a,c){return b[c]})},asPath:function(a){for(var a=a.split(";"),b="$",c=1,d=a.length;c<d;c++)b+=/^[0-9*]+$/.test(a[c])?"["+a[c]+"]":"['"+a[c]+"']";return b},store:function(a,b){a&&(d.result[d.result.length]="PATH"==d.resultType?d.asPath(a):b);return!!a},trace:function(a,b,c){if(a){var a=a.split(";"),h=a.shift(),a=a.join(";");if(b&&b.hasOwnProperty(h))d.trace(a,b[h],c+";"+h);else if("*"===
h)d.walk(h,a,b,c,function(a,b,c,g,j){d.trace(a+";"+c,g,j)});else if(".."===h)d.trace(a,b,c),d.walk(h,a,b,c,function(a,b,c,g,j){"object"===typeof g[a]&&d.trace("..;"+c,g[a],j+";"+a)});else if(/,/.test(h))for(var h=h.split(/'?,'?/),i=0,p=h.length;i<p;i++)d.trace(h[i]+";"+a,b,c);else/^\(.*?\)$/.test(h)?d.trace(d.eval(h,b,c.substr(c.lastIndexOf(";")+1))+";"+a,b,c):/^\?\(.*?\)$/.test(h)?d.walk(h,a,b,c,function(a,b,c,g,j){d.eval(b.replace(/^\?\((.*?)\)$/,"$1"),g[a],a)&&d.trace(a+";"+c,g,j)}):/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(h)&&
d.slice(h,a,b,c)}else d.store(c,b)},walk:function(a,b,c,d,h){if(c instanceof Array)for(var i=0,m=c.length;i<m;i++)i in c&&h(i,a,b,c,d);else if("object"===typeof c)for(i in c)c.hasOwnProperty(i)&&h(i,a,b,c,d)},slice:function(a,b,c,h){if(c instanceof Array){var i=c.length,p=0,m=i,n=1;a.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function(a,b,c,g){p=parseInt(b||p);m=parseInt(c||m);n=parseInt(g||n)});p=0>p?Math.max(0,p+i):Math.min(i,p);m=0>m?Math.max(0,m+i):Math.min(i,m);for(a=p;a<m;a+=n)d.trace(a+
";"+b,c,h)}},eval:function(a,c){try{return b&&c&&eval(a.replace(/@/g,"_v"))}catch(d){throw new SyntaxError("jsonPath: "+d.message+": "+a.replace(/@/g,"_v").replace(/\^/g,"_a"));}}},b=i;if(h&&i&&("VALUE"==d.resultType||"PATH"==d.resultType))return d.trace(d.normalize(h).replace(/^\$;/,""),i,"$"),d.result.length?d.result:!1}})},"sbt/Gadget":function(){define(function(){})},"sbt/IWidget":function(){define([],function(){sbt.getUserPref=function(){}})},"sbt/connections/ProfileService":function(){define("../declare,../lang,../config,../stringUtil,./ProfileConstants,./ConnectionsService,../base/BaseEntity,../base/AtomEntity,../base/XmlDataHandler,../base/VCardDataHandler,../Cache,../util".split(","),
function(i,h,c,d,b,a,g,j,k,o,p){var m=i(j,{xpath:b.ProfileXPath,namespaces:b.ProfileNamespaces,categoryScheme:'<category term="profile" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',_update:!1,constructor:function(){},createDataHandler:function(a,f,c,e,g){return c.options&&c.options.query&&"vcard"==c.options.query.output?new o({service:a,data:f,namespaces:e,xpath:b.ProfileVCardXPath}):new k({service:a,data:f,namespaces:e,xpath:g})},getUserid:function(){return this.getAsString("userid")},
getName:function(){return this.getAsString("name")},getEmail:function(){return this.getAsString("email")},getGroupwareMail:function(){return this.getAsString("groupwareMail")},getThumbnailUrl:function(){return this.getAsString("photoUrl")},getJobTitle:function(){return this.getAsString("jobTitle")},getDepartment:function(){return this.getAsString("organizationUnit")},getAddress:function(){return this.getAsObject(b.AddressFields)},getTelephoneNumber:function(){return this.getAsString("telephoneNumber")},
getProfileUrl:function(){return this.getAsString("fnUrl")},getBuilding:function(){return this.getAsString("building")},getFloor:function(){return this.getAsString("floor")},getPronunciationUrl:function(){return this.getAsString("soundUrl")},getSummary:function(){return this.getAsString("summary")},setTelephoneNumber:function(a){this.setAsString("telephoneNumber",a)},setBuilding:function(a){this.setAsString("building",a)},setFloor:function(a){this.setAsString("floor",a)},setJobTitle:function(a){this.setAsString("jobTitle",
a)},setPhotoLocation:function(a){this.setAsString("imageLocation",a)},setAddress:function(a){this.setAsObject(a)},load:function(a){var f=this.getUserid()||this.getEmail(),c=this.service._validateProfileId(f);if(c)return c;var e=this,c={};this.service.isEmail(f)?c.email=f:c.userid=f;h.mixin(c,a||{});c={handleAs:"text",query:c};return this.service.getEntity(this.service.constructUrl(b.AtomProfileDo,{},{authType:this.service._getProfileAuthString()}),c,f,{createEntity:function(a,b,f){e.setData(b,f);
return e}},a)},update:function(a){return this.service.updateProfile(this,a)},getColleagues:function(a){return this.service.getColleagues(this,a)},getColleagueConnections:function(a){return this.service.getColleagueConnections(this,a)},createContent:function(){if(this._update){this._update=!1;var a;return(a=d.transform("\nBEGIN:VCARD\nVERSION:2.1\n${jobTitle}${address}${telephoneNumber}${building}${floor}END:VCARD\n",this,function(a,f){return a="address"==f?this.service._isAddressSet(this)?d.transform("ADR;WORK:;;${streetAddress},${extendedAddress};${locality};${region};${postalCode};${countryName}\n",
{streetAddress:this._fields.streetAddress,extendedAddress:this._fields.extendedAddress,locality:this._fields.locality,region:this._fields.region,postalCode:this._fields.postalCode,countryName:this._fields.countryName}):null:this._fields[f]?d.transform("${attributeName}:${attributeValue}\n",{attributeName:b.ProfileVCardXPath[f],attributeValue:this._fields[f]}):null},this))?d.transform('<content type="${contentType}">${content}</content>',{contentType:"text",content:a}):""}return(a=d.transform('<person xmlns="http://ns.opensocial.org/2008/opensocial"><com.ibm.snx_profiles.attrib>${guid}${email}${uid}${distinguishedName}${displayName}${givenNames}${surname}${userState}</com.ibm.snx_profiles.attrib></person>',
this,function(a,f){if(this._fields[f])return a=d.transform("<entry><key>${attributeName}</key><value><type>text</type><data>${attributeValue}</data></value></entry>",{attributeName:b.profileCreateAttributes[f],attributeValue:this._fields[f]})},this))?d.transform('<content type="${contentType}">${content}</content>',{contentType:"application/xml",content:a}):""},createTags:function(){return""}}),n=i(j,{constructor:function(){}}),e=i(g,{constructor:function(){},getTerm:function(){return this.getAsString("term")},
getFrequency:function(){return this.getAsNumber("frequency")},getIntensity:function(){return this.getAsNumber("intensity")},getVisibility:function(){return this.getAsNumber("visibility")}}),r=i(j,{xpath:b.InviteXPath,contentType:"html",categoryScheme:'<category term="connection" scheme="http://www.ibm.com/xmlns/prod/sn/type" />',constructor:function(){},createEntryData:function(){var a;a=""+d.transform('<category term="${getConnectionType}" scheme="http://www.ibm.com/xmlns/prod/sn/connection/type" />',
this,function(a){return a},this);a+=d.transform('<category term="${getStatus}" scheme="http://www.ibm.com/xmlns/prod/sn/status" />',this,function(a){return a},this);return d.trim(a)},createTags:function(){return""},getConnectionType:function(){return this.getAsString("connectionType")||b.TypeColleague},setConnectionType:function(a){return this.setAsString("connectionType",a)},getStatus:function(){return this.getAsString("status")||b.StatusPending},setStatus:function(a){return this.setAsString("status",
a)},getConnectionId:function(){return this.getAsString("connectionId")},setConnectionId:function(a){return this.setAsString("connectionId",a)}}),s={createEntity:function(a,b,f){return new m({service:a,data:b,response:f})}},t={createEntities:function(a,f){return new k({data:f,namespaces:b.Namespaces,xpath:b.ProfileFeedXPath})},createEntity:function(a,b,f){return new m({service:a,data:b,response:f})}},u={createEntities:function(a,f){return new k({data:f,namespaces:b.Namespaces,xpath:b.ProfileFeedXPath})},
createEntity:function(a,b,f){return new n({service:a,data:b,response:f})}},f={createEntities:function(a,f){return new k({data:f,namespaces:b.Namespaces,xpath:b.ProfileTagsXPath})},createEntity:function(a,f){var c=new k({data:f,namespaces:b.Namespaces,xpath:b.ProfileTagsXPath});return new e({service:a,id:c.getEntityId(),dataHandler:c})}};return i(a,{contextRootMap:{profiles:"profiles"},serviceName:"profiles",constructor:function(){if(!this.endpoint)this.endpoint=c.findEndpoint(this.getDefaultEndpointName());
if(!this._cache&&(c.Properties.ProfileCacheSize||b.DefaultCacheSize))this._cache=new p(c.Properties.ProfileCacheSize||b.DefaultCacheSize)},newProfile:function(a){return this._toProfile(a)},newInvite:function(a){return this._toInvite(a)},getProfile:function(a,b){var f=this._toProfile(a),c=this._validateProfile(f);return c?c:f.load(b)},updateProfile:function(a,f){var c=this._toProfile(a);c._update=!0;var e=this._validateProfile(c);if(e)return e;e={};c.getUserid()?e.userid=c.getUserid():e.email=c.getEmail();
h.mixin(e,f||{});e={method:"PUT",query:e,headers:b.AtomXmlHeaders,data:c.createPostData()};return this.updateEntity(this.constructUrl(b.AtomProfileEntryDo,{},{authType:this._getProfileAuthString()}),e,{createEntity:function(){return c}},f)},getTags:function(a,f){var c=this._toTargetObject(a),e=this._validateTargetObject(c);if(e)return e;c={method:"GET",handleAs:"text",query:h.mixin(c,f||{})};return this.getEntities(this.constructUrl(b.AtomTagsDo,{},{authType:this._getProfileAuthString()}),c,this.getProfileTagFeedCallbacks(),
f)},getColleagues:function(a,f){var c=this._toIdObject(a),e=this._validateIdObject(c);if(e)return e;c={method:"GET",handleAs:"text",query:h.mixin(c,{connectionType:"colleague",outputType:"profile"},f||{})};return this.getEntities(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),c,this.getProfileFeedCallbacks(),f)},getColleagueConnections:function(a,f){var c=this._toIdObject(a),e=this._validateIdObject(c);if(e)return e;c={method:"GET",handleAs:"text",query:h.mixin(c,
{connectionType:"colleague",outputType:"connection"},f||{})};return this.getEntities(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),c,this.getColleagueConnectionFeedCallbacks(),f)},getReportingChain:function(a,f){var c=this._toIdObject(a),e=this._validateIdObject(c);if(e)return e;c={method:"GET",handleAs:"text",query:h.mixin(c,f||{})};return this.getEntities(this.constructUrl(b.AtomReportingChainDo,{},{authType:this._getProfileAuthString()}),c,this.getProfileFeedCallbacks(),
f)},getPeopleManaged:function(a,f){var c=this._toIdObject(a),e=this._validateIdObject(c);if(e)return e;c={method:"GET",handleAs:"text",query:h.mixin(c,f||{})};return this.getEntities(this.constructUrl(b.AtomPeopleManagedDo,{},{authType:this._getProfileAuthString()}),c,this.getProfileFeedCallbacks(),f)},search:function(a){if(!a)return this.createBadRequestPromise("Invalid arguments, one or more of the input parameters to narrow the search must be specified.");var f={method:"GET",handleAs:"text",query:a};
return this.getEntities(this.constructUrl(b.AtomSearchDo,{},{authType:this._getProfileAuthString()}),f,this.getProfileFeedCallbacks(),a)},updateProfilePhoto:function(a,b,f){var e=this.validateField("File Control Or Id",a);if(e)return e;promose=this.validateHTML5FileSupport();if(e)return e;b=this._toIdObject(b);e=null;if("string"==typeof a)a=document.getElementById(a),filePath=a.value,e=a.files;else if("object"==typeof a)filePath=a.value,e=a.files;else return this.createBadRequestPromise("File Control or ID is required");
if(1!=e.length)return this.createBadRequestPromise("Only one file needs to be provided to this API");a=e[0];e=new FormData;e.append("file",a);b=h.mixin(b,f||{});return this.updateEntity(this.constructUrl(c.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/UpdateProfilePhoto/"+encodeURIComponent(a.name),f&&f.parameters?f.parameters:{}),{method:"PUT",headers:{"Content-Type":!1,"Process-Data":!1},query:b||{},data:e},{createEntity:function(a,b){return b}})},createInvite:function(a,
f,c){var a=this._toIdObject(a),e=this._validateIdObject(a);if(e)return e;var g=this._toInvite(f),f={method:"POST",query:h.mixin(a,c||{}),headers:b.AtomXmlHeaders,data:g.createPostData()};return this.updateEntity(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),f,{createEntity:function(a,b,f){g.setData(b);a=this.getLocationParameter(f,"connectionId");g.setConnectionId(a);return g}},c)},updateTags:function(a,f,c,e){var g=this._validateProfileId(f);if(g||(g=this._validateProfileId(c)))return g;
g={};this.isEmail(f)?g.targetEmail=f:g.targetKey=f;this.isEmail(c)?g.sourceEmail=c:g.sourceKey=c;h.mixin(g,e||{});a={method:"PUT",query:g,headers:b.AtomXmlHeaders,data:this._createTagsPostData(a)};return this.updateEntity(this.constructUrl(b.AtomTagsDo,{},{authType:this._getProfileAuthString()}),a,{createEntity:function(a,b){return b}},e)},getProfileFeedCallbacks:function(){return t},getColleagueConnectionFeedCallbacks:function(){return u},getProfileCallbacks:function(){return s},getProfileTagFeedCallbacks:function(){return f},
_toIdObject:function(a){var b={};if(h.isString(a))this.isEmail(a)?b.email=a:b.userid=a;else if(a instanceof m)if(a.getUserid())b.userid=a.getUserid();else if(a.getEmail())b.email=a.getEmail();return b},_toTargetObject:function(a){var b={};if(h.isString(a))this.isEmail(a)?b.targetEmail=a:b.targetKey=a;else if(a instanceof m)if(a.getUserid())b.targetKey=a.getUserid();else if(a.getEmail())b.targetEmail=a.getEmail();return b},_validateIdObject:function(a){if(!a.userid&&!a.email)return this.createBadRequestPromise("Invalid argument, userid or email must be specified.")},
_validateTargetObject:function(a){if(!a.targetKey&&!a.targetEmail)return this.createBadRequestPromise("Invalid argument, userid or email must be specified.")},_toProfile:function(a){if(a instanceof m)return a;var b=a;if(h.isString(a))b={},this.isEmail(a)?b.email=a:b.userid=a;else if(b&&b.id&&!b.userid&&!b.email)this.isEmail(b.id)?b.email=b.id:b.userid=b.id,delete b.id;return new m({service:this,_fields:h.mixin({},b)})},_toInvite:function(a){if(a instanceof r)return a;h.isString(a)&&(a={content:a});
return new r({service:this,_fields:h.mixin({},a)})},_isAddressSet:function(a){return a._fields.streetAddress||a._fields.extendedAddress||a._fields.locality||a._fields.region||a._fields.postalCode||a._fields.countryName},_validateProfile:function(a){if(!a||!a.getUserid()&&!a.getEmail())return this.createBadRequestPromise("Invalid argument, profile with valid userid or email must be specified.")},_validateProfileId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid or email")},
_getProfileAuthString:function(){return this.endpoint.authType==b.AuthTypes.Basic?"":this.endpoint.authType==b.AuthTypes.OAuth?"/oauth":""},_createTagsPostData:function(a){for(var b="",f=0;f<a.length;f++)b+=d.transform('<atom:category term="${tag}"></atom:category>',{tag:a[f]});a=d.transform('<?xml version="1.0" encoding="UTF-8"?><app:categories xmlns:snx="http://www.ibm.com/xmlns/prod/sn" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app">${createTags}</app:categories>',
{createTags:b});return d.trim(a)}})})},"sbt/Cache":function(){define(["./declare"],function(i){return i(null,{constructor:function(h){this.limit=h;this._cache={};this.tail=this.head=null;this.count=0},get:function(h){if(h=this._cache[h]){if(this.head!=h){if(h.prev)h.prev.next=h.next;h.next?h.next.prev=h.prev:this.tail=h.prev;h.next=this.head;this.head.prev=h;h.prev=null;this.head=h}return h.value}return null},put:function(h,c){this._cache[h]&&(this.remove(h),this.count--);var d=this._cache[h]={key:h,
value:c};this.count==this.limit&&(this.remove(this.tail.key),this.count--);d.next=this.head;d.next?d.next.prev=d:this.tail=d;this.head=d;d.prev=null;this.count++},remove:function(h){var c=this._cache[h];if(c)c.next?c.next.prev=c.prev:this.tail=c.prev,c.prev?c.prev.next=c.next:this.head=c.next,c.next=c.prev=null,delete this._cache[h],this.count--},browse:function(h){if(h)for(var c in this._cache){var d=this._cache[c];if(d=h(d.key,d.value))return d}return null}})})},"sbt/GadgetTransport":function(){define(["./declare",
"./lang"],function(i,h){var c={POST:gadgets.io.MethodType.POST,PUT:gadgets.io.MethodType.PUT,DELETE:gadgets.io.MethodType.DELETE,GET:gadgets.io.MethodType.GET},d={XML:gadgets.io.ContentType.DOM,JSON:gadgets.io.ContentType.JSON,TEXT:gadgets.io.ContentType.TEXT,"JSON-COMMENT-OPTIONAL":gadgets.io.ContentType.JSON,"JSON-COMMENT-FILTERED":gadgets.io.ContentType.JSON,JAVASCRIPT:gadgets.io.ContentType.JSON},b={NONE:gadgets.io.AuthorizationType.NONE,OAUTH:gadgets.io.AuthorizationType.OAUTH,OAUTH2:gadgets.io.AuthorizationType.OAUTH2,
SIGNED:gadgets.io.AuthorizationType.SIGNED};return i(null,{serviceName:null,constructor:function(a){this.serviceName=a.serviceName||null},xhr:function(a,g){if(g.sync)throw Error("Gadget transport does not support synchronous requests.");var j={};j[gadgets.io.RequestParameters.METHOD]=c[a.toUpperCase()]||gadgets.io.MethodType.GET;j[gadgets.io.RequestParameters.CONTENT_TYPE]=d[g.handleAs?g.handleAs.toUpperCase():"TEXT"];j[gadgets.io.RequestParameters.HEADERS]=g.headers||{};j[gadgets.io.RequestParameters.POST_DATA]=
this.getPostData(j[gadgets.io.RequestParameters.METHOD],g.postData||g.putData);g.preventCache&&(j[gadgets.io.RequestParameters.REFRESH_INTERVAL]=0);if(this.serviceName||g.serviceName)j[gadgets.io.RequestParameters.OAUTH_SERVICE_NAME]=this.serviceName||g.serviceName;if(g.authType){var h=g.authType.toUpperCase();j[gadgets.io.RequestParameters.AUTHORIZATION]=b[h]||b.NONE}var i=this,h=this.buildUrl(g);gadgets.io.makeRequest(h,function(a){i.handleResponse(g,a)},j)},handleResponse:function(a,b){if(b.errors&&
0<b.errors.length){if(a.error||a.handle){var c=this.createError(b);this.notifyError(a,c)}}else b.oauthApprovalUrl?this.handleApproval(a,b):this.notifyResponse(a,b)},handleApproval:function(a,b){var c=Error();c.code=401;c.response=h.mixin({},b);this.notifyError(a,c)},notifyResponse:function(a,b){if(a.load||a.handle){var c={args:a,headers:b.headers,_ioargs:b};a.handle&&a.handle(b.data||b.text,c);a.load&&a.load(b.data||b.text,c)}},notifyError:function(a,b){a.handle&&a.handle(b);a.error&&a.error(b)},
createError:function(a){var b=Error();b.code=a.rc;b.message=a.errors[0];b.response=h.mixin({},a);return b},getPostData:function(a,b){return a==gadgets.io.MethodType.POST||a==gadgets.io.MethodType.PUT?b:""},buildUrl:function(a){var b=[],c=a.url;if(a.content){for(name in a.content){var d=encodeURIComponent(name)+"="+encodeURIComponent(a.content[name]);b.push(d)}0<b.length&&(a=b.join("&"),c+=(~c.indexOf("?")?"&":"?")+a)}return c}})})},"sbt/connections/BlogPost":function(){define(["../declare","../lang",
"../base/AtomEntity","./BlogConstants","../base/XmlDataHandler"],function(i,h,c,d,b){return i(c,{xpath:d.BlogPostXPath,namespaces:d.BlogPostNamespaces,constructor:function(){},getBlogPostUuid:function(){var a=this.getAsString("postUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:entry-")&&(a=a.substring(29,a.length));return a},setBlogPostUuid:function(a){return this.setAsString("postUuid",a)},getPostUuid:function(){var a=this.getAsString("postUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:entry-")&&
(a=a.substring(29,a.length));return a},setPostUuid:function(a){return this.setAsString("postUuid",a)},getEntryAnchor:function(){var a=this.dataHandler.getData();if(a&&(a=a.getAttribute("xml:base"))){var b=a.lastIndexOf("/");return a.substring(b+1)}},getBlogHandle:function(){var a=this.getAsString("blogHandle");return a?a:a=this.service._extractBlogHandle(this.getAsString("alternateUrl"))},setBlogHandle:function(a){return this.setAsString("blogHandle",a)},getRepliesUrl:function(){return this.getAsString("replies")},
getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getRepliesUrl:function(){return this.getAsString("repliesUrl")},getRecommendationsURL:function(){return this.getAsString("recommendationsUrl")},getRecommendationsCount:function(){return this.getAsNumber("rankRecommendations")},getCommentCount:function(){return this.getAsNumber("rankComment")},getHitCount:function(){return this.getAsNumber("rankHit")},getSource:function(){return this.getAsObject("sourceId,sourceTitle,sourceLink,sourceLinkAlternate,sourceUpdated,sourceCategory".split(","))},
load:function(a){var c=this.getBlogPostUuid(),j=this.service._validateBlogUuid(c);if(j)return j;var i=this,a={handleAs:"text",query:h.mixin({},a||{})},j=null,j=this.service.constructUrl(d.AtomBlogPostInstance,null,{blogHomepageHandle:this.service.handle,postUuid:c});return this.service.getEntity(j,a,c,{createEntity:function(a,c){i.setDataHandler(new b({service:a,data:c,namespaces:d.Namespaces,xpath:d.BlogPostXPath}));return i}})},remove:function(a){return this.service.deletePost(this.getBlogPostUuid(),
a)},update:function(a){return this.service.updatePost(this,a)},save:function(a){return this.getBlogPostUuid()?this.service.updatePost(this,a):this.service.createPost(this,a)},getComments:function(a){var b=this.getBlogHandle(),c=this.getEntryAnchor();return this.service.getEntryComments(b,c,a)}})})},"sbt/connections/ActivityService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./ActivityConstants,./ConnectionsService,../base/AtomEntity,../base/BaseEntity,../base/XmlDataHandler,../xml".split(","),
function(i,h,c,d,b,a,g,j,k,o,p){var m=function(a,b){a&&(a=decodeURIComponent(a));if(a){var f=a.indexOf(b);-1!=f&&(a=a.substring(f+b.length))}return a},n=function(a){if(a)return a},e=i(null,{name:null,fid:null,position:null,type:null,getName:function(){return this.name},setName:function(a){this.name=a},getFid:function(){return this.fid},getPosition:function(){return this.position},getType:function(){return this.type}}),r=i(e,{summary:null,getSummary:function(){return this.summary},setSummary:function(){this.summary=
newSummary}}),s=i(e,{date:null,getDate:function(){return this.date},setDate:function(a){this.date=a}}),t=i(e,{url:null,title:null,getUrl:function(){return this.url},setUrl:function(a){this.url=a},getTitle:function(){return this.title},setTitle:function(a){this.title=a}}),u=i(e,{url:null,fileType:null,size:null,length:null,getUrl:function(){return this.url},getFileType:function(){return this.type},getSize:function(){return this.size},getLength:function(){return this.length}}),f=i(e,{personName:null,
userId:null,email:null,getPersonName:function(){return this.personName},setPersonName:function(a){this.personName=a},getUserId:function(){return this.userId},setUserId:function(a){this.userId=a},getEmail:function(){return this.email},setEmail:function(a){this.email=a}}),q=i(k,{constructor:function(){},getTerm:function(){return this.getAsString("term")},getFrequency:function(){return this.getAsString("frequency")},getBin:function(){return this.getAsString("bin")}}),v=i(j,{xpath:a.ActivityNodeXPath,
namespaces:a.ActivityNamespaces,contentType:"html",categoryScheme:null,constructor:function(){},setCategoryScheme:function(){this.categoryScheme=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="${getType}" label="${getType}" />',this,n,this)},getUuid:function(){var a=this.id||this._fields.id||this.getId();this.id=a;return this._fields.id=a},getActivityUuid:function(){return m(this.getUuid(),"urn:lsid:ibm.com:oa:")},getAuthorLdapId:function(){return this.getAsString("authorLdapid")},
getContributorLdapId:function(){return this.getAsString("contributorLdapid")},getType:function(){return this.getAsString("type")},setType:function(a){return this.setAsString("type",a)},getPriority:function(){return this.getAsString("priority")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getDueDate:function(){return this.getAsDate("dueDate")},setDueDate:function(a){return this.setAsDate("dueDate",a)},getMembersUrl:function(){return this.getAsString("membersUrl")},
getHistoryUrl:function(){return this.getAsString("historyUrl")},getTemplatesUrl:function(){return this.getAsString("templatesUrl")},getPosition:function(){return this.getAsString("position")},setPosition:function(a){return this.setAsString("position",a)},isCompleted:function(){return this.getAsBoolean("categoryFlagCompleted")},setCompleted:function(a){return this.setAsBoolean("categoryFlagCompleted",a)},isDeleted:function(){return this.getAsBoolean("categoryFlagDelete")},isTemplate:function(){return this.getAsBoolean("categoryFlagTemplate")},
setTemplate:function(a){return this.setAsBoolean("categoryFlagTemplate",a)},getDepth:function(){return this.getAsString("depth")},getPermissions:function(){return this.getAsString("permissions")},getIconUrl:function(){return this.getAsString("iconUrl")},setIconUrl:function(a){return this.setAsString("iconUrl",a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getCommunityUrl:function(){return this.getAsString("communityUrl")},
setCommunityUrl:function(a){return this.setAsString("communityUrl",a)},load:function(){var b=this.service.validateField("activityUuid",this.getActivityUuid());if(b)return b;var b={method:"GET",handleAs:"text",query:{activityNodeUuid:this.getActivityUuid()}},f=this;return this.service.getEntity(a.AtomActivityNode,b,this.getActivityUuid(),{createEntity:function(a,b,c){f.setData(b,c);return f}})},create:function(){return this.service.createActivity(this)},update:function(){return this.service.updateActivity(this)},
deleteActivity:function(){return this.service.deleteActivity(this.getActivityUuid())},restore:function(){return this.service.restoreActivity(this.getActivityUuid())},addMember:function(a){return this.service.addMember(this.getActivityUuid(),a)},removeMember:function(a){return this.service.deleteMember(this.getActivityUuid(),a)},updateMember:function(a){return this.service.updateMember(this.getActivityUuid(),a)},getMember:function(a){return this.service.getMember(this.getActivityUuid(),a)},getMembers:function(a){return this.service.getMembers(this.getActivityUuid(),
a)},createActivityNode:function(a){return this.service.createActivityNode(this.getActivityUuid(),a)},getActivityTags:function(a){return this.service.getActivityTags(this.getActivityUuid(),a)},createContributor:function(){return""},createEntryData:function(){var a="";this.getPosition&&this.getPosition()&&(a+=d.transform("<snx:position>${getPosition}</snx:position>",this,n,this));this.getCommunityUuid&&this.getCommunityUuid()&&(a+=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="community_activity" label="Community Activity"/><snx:communityUuid>${getCommunityUuid}</communityUuid><link rel="http://www.ibm.com/xmlns/prod/sn/container" type="application/atom+xml" href="${getCommunityUrl}"/>',
this,n,this));this.getActivityUuid&&this.getActivityUuid()&&(a+=d.transform("<snx:activity>${getActivityUuid}</snx:activity>",this,n,this));this.getActivityNodeUuid&&this.getActivityNodeUuid()&&(a+=d.transform("<id>urn:lsid:ibm.com:oa:${getActivityNodeUuid}</id>",this,n,this));this.isCompleted&&this.isCompleted()&&(a+='<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="completed" label="Completed"/>');this.getDueDate&&this.getDueDate()&&(a+=d.transform("<snx:duedate>${getDueDate}</duedate>",
this,n,this));this.getInReplyToId&&this.getInReplyToId()&&(a+=d.transform('<thr:in-reply-to ref="${getInReplyToId}" type="application/atom+xml" href="${getInReplyToUrl}" source="${getActivityUuid}" />',this,n,this));this.getAssignedToUserId&&this.getAssignedToUserId()&&(a+=d.transform('<snx:assignedto name="${getAssignedToName}" userid="${getAssignedToUserId}">${getAssignedToEmail}</snx:assignedto>',this,n,this));this.getIconUrl&&this.getIconUrl()&&(a+=d.transform("<snx:icon>${getIconUrl}</snx:icon>",
this,n,this));this.isTemplate&&this.isTemplate()&&(a+='<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="template"/>');if(this.getFields&&0<this.getFields().length){var b=this.getFields(),f;for(f in b){var c=b[f],e="",g=function(a,b){c[b]?a=p.encodeXmlEntry(c[b]):""!=e&&(a=e);return a},h='<summary type="text">${summary}</summary>';"person"==c.type?h="<name>${personName}</name> <email>{email}</email> <snx:userid>${userId}</snx:userid>":"link"==c.type?h='<link href="${url}" title="${title}" />':
"date"==c.type&&(h="${date}");e=d.transform(h,this,g,this);a+=d.transform('<snx:field name="${name}" fid="${fid}" position="${position}" type="${type}">${getText}${getPerson}${getDate}${getLink}${getFile}</snx:field>',this,g,this)}}return a}}),y=i(v,{constructor:function(){},getActivityNodeUuid:function(){return m(this.getUuid(),"urn:lsid:ibm.com:oa:")},getActivityUuid:function(){return this.getAsString("activityUuid")},setActivityUuid:function(a){return this.setAsString("activityUuid",a)},getInReplyToId:function(){return this.getAsString("inReplyToId")},
getInReplyToUrl:function(){return this.getAsString("inReplyToUrl")},setInReplyTo:function(a,b){return this.setAsObject({inReplyToId:"urn:lsid:ibm.com:oa:"+a,inReplyToUrl:b})},getAssignedToUserId:function(){return this.getAsString("assignedToUserId")},getAssignedToName:function(){return this.getAsString("assignedToName")},getAssignedToEmail:function(){return this.getAsString("assignedToEmail")},setAssignedTo:function(a,b,f){return this.setAsObject({assignedToUserId:a,assignedToName:b,assignedToEmail:f})},
getTextFields:function(){var b=this.getAsNodesArray("textFields"),f=[],c;for(c in b){for(var e=b[c],g=new r,d=0;d<e.attributes.length;d++){var h=e.attributes[d];g[h.name]=h.value}e=new o({service:this.service,data:e,namespaces:a.Namespaces,xpath:a.TextFieldXPath});g.summary=e.getAsString("summary");f.push(g);this.addTextField(g)}return f},addTextField:function(a){return this._fields.fields?(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getDateFields:function(){var a=this.getAsNodesArray("dateFields"),
b=[],f;for(f in a){for(var c=a[f],e=new s,g=0;g<c.attributes.length;g++){var h=c.attributes[g];e[h.name]=h.value}e.date=new Date(d.trim(c.textContent));b.push(e);this.addDateField(e)}return b},addDateField:function(a){return this._fields.fields?(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getLinkFields:function(){var b=this.getAsNodesArray("linkFields"),f=[],c;for(c in b){for(var e=b[c],g=new t,d=0;d<e.attributes.length;d++){var h=e.attributes[d];g[h.name]=h.value}e=new o({service:this.service,
data:e,namespaces:a.Namespaces,xpath:a.LinkFieldXPath});g.url=e.getAsString("url");g.title=e.getAsString("title");f.push(g);this.addLinkField(g)}return f},addLinkField:function(a){return this._fields.fields?(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getPersonFields:function(){var b=this.getAsNodesArray("personFields"),c=[],e;for(e in b){for(var g=b[e],d=new f,h=0;h<g.attributes.length;h++){var q=g.attributes[h];d[q.name]=q.value}g=new o({service:this.service,data:g,namespaces:a.Namespaces,
xpath:a.PersonFieldXPath});d.personName=g.getAsString("name");d.userId=g.getAsString("userId");d.email=g.getAsString("email");c.push(d);this.addPersonField(d)}return c},addPersonField:function(a){return this._fields.fields?(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getFileFields:function(){var b=this.getAsNodesArray("fileFields"),f=[],c;for(c in b){for(var e=b[c],g=new u,d=0;d<e.attributes.length;d++){var h=e.attributes[d];g[h.name]=h.value}e=new o({service:this.service,data:e,
namespaces:a.Namespaces,xpath:a.FileFieldXPath});g.url=e.getAsString("url");g.size=e.getAsString("size");g.type=e.getAsString("type");g.length=e.getAsString("length");f.push(g)}return f},getFields:function(){if(this._fields.fields&&0<this._fields.fields.length)return this._fields.fields;var a=this.getTextFields(),b=this.getPersonFields(),f=this.getLinkFields(),c=this.getFileFields(),e=this.getDateFields(),g;for(g in a){var d=a[g];feilds.push(d)}for(g in b)d=b[g],feilds.push(d);for(g in f)d=f[g],feilds.push(d);
for(g in c)d=c[g],feilds.push(d);for(g in e)d=e[g],feilds.push(d);return[]},setFields:function(a){this._fields.fields=a},load:function(){var b=this.service.validateField("activityNodeUuid",this.getActivityNodeUuid());if(b)return b;var b={method:"GET",handleAs:"text",query:{activityNodeUuid:this.getActivityNodeUuid()}},f=this;return this.service.getEntity(a.AtomActivityNode,b,this.getActivityNodeUuid(),{createEntity:function(a,b,c){f.setData(b,c);return f}})},create:function(a){return this.service.createActivityNode(a,
this)},update:function(){return this.service.updateActivityNode(this)},deleteActivityNode:function(){return this.service.deleteActivityNode(this.getActivityNodeUuid())},restore:function(){return this.service.restoreActivityNode(this.getActivityNodeUuid())},changeEntryType:function(a){this.setType(a);return this.service.changeEntryType(this)},moveToSection:function(a){return this.service.moveEntryToSection(this,a)}}),x=i(j,{xpath:a.MemberXPath,namespaces:a.ActivityNamespaces,categoryScheme:null,setCategoryScheme:function(){this.categoryScheme=
d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="${getCategory}" label="${getCategory}" />',this,n,this)},getMemberId:function(){return m(this.getId(),"&memberid=")},getRole:function(){return this.getAsString("role")},setRole:function(a){return this.setAsString("role",a)},getPermissions:function(){var a=this.getAsString("permissions");return a?a.split(", "):a},getCategory:function(){this.getAsString("category")},setCategory:function(a){this.setAsString("category",a)},getUserId:function(){return this.getContributor().userid},
setUserId:function(a){return this.setAsString("contributorUserid",a)},createTitle:function(){return""},createContent:function(){return""},createSummary:function(){return""},createEntryData:function(){var a;a=""+d.transform('<snx:role xmlns:snx="http://www.ibm.com/xmlns/prod/sn" component="http://www.ibm.com/xmlns/prod/sn/activities">${getRole}</snx:role>',this,n,this);return d.trim(a)},load:function(b){var f=this.service.validateField("memberId",this.getMemberId());f||(f=this.service.validateField("activityUuid",
b));if(f)return f;var c=this;return this.service.getEntity(this.service.constructUrl(a.AtomActivitiesMember,null,{activityUuid:b,memberId:this.getMemberId()}),{method:"GET",handleAs:"text"},this.getMemberId(),{createEntity:function(b,f,e){b=(new o({data:f,namespaces:a.ActivityNamespaces,xpath:a.MemberXPath})).data;c.setData(b,e);return c}})},addToActivity:function(a){return this.service.addMember(a,this)},removeFromActivity:function(a){return this.service.deleteMember(a,this.getMemberId())},updateInActivity:function(a){return this.service.updateMember(a,
this)}}),z={createEntities:function(b,f){return new o({service:b,data:f,namespaces:a.Namespaces,xpath:a.TagXPath})},createEntity:function(b,f){var c=new o({service:b,data:f,namespaces:a.Namespaces,xpath:a.TagXPath});return new q({service:b,dataHandler:c})}},D={createEntities:function(b,f){return new o({service:b,data:f,namespaces:a.Namespaces,xpath:a.ActivitiesFeedXPath})},createEntity:function(b,f){var c=null,c="object"==typeof f?f:(new o({data:f,namespaces:a.Namespaces,xpath:a.MemberXPath})).data,
c=new o({data:c,namespaces:a.Namespaces,xpath:a.MemberXPath});return new x({service:b,dataHandler:c})}},w={createEntities:function(b,f){return new o({service:b,data:f,namespaces:a.ActivityNamespaces,xpath:a.ActivitiesFeedXPath})},createEntity:function(a,b){return new v({service:a,data:b})}},A={createEntities:function(b,f){return new o({service:b,data:f,namespaces:a.ActivityNamespaces,xpath:a.ActivitiesFeedXPath})},createEntity:function(b,f){var c=null,c="object"==typeof f?f:(new o({data:f,namespaces:a.ActivityNamespaces,
xpath:a.ActivityNodeXPath})).data;return new y({service:b,data:c})}};return i(g,{contextRootMap:{activities:"activities"},serviceName:"activities",constructor:function(){if(!this.endpoint)this.endpoint=h.findEndpoint(this.getDefaultEndpointName())},getMyActivities:function(b){return this.getEntities(a.AtomActivitiesMy,{method:"GET",handleAs:"text",query:b||{}},w)},getActivityNodes:function(b,f){var e={method:"GET",handleAs:"text",query:c.mixin(f||{},{nodeUuid:b})};return this.getEntities(a.AtomActivityNodes,
e,A)},getAllActivities:function(b){return this.getEntities(a.AtomActivitiesEverything,{method:"GET",handleAs:"text",query:b||{}},w)},getCompletedActivities:function(b){return this.getEntities(a.AtomActivitiesCompleted,{method:"GET",handleAs:"text",query:b||{}},w)},getActivityNode:function(a){var b=this.validateField("activityNodeUuid",a);return b?b:this.newActivityNode(a).load()},getActivity:function(a){var b=this.validateField("activityUuid",a);return b?b:this.newActivity(a).load()},createActivityNode:function(b,
f){var c=this.validateField("activityUuid",b);c||(c=this.validateField("activityNodeOrJson",f));if(c)return c;c=this.newActivityNode(f);c.setActivityUuid(b);c.setCategoryScheme();c=c.createPostData();return this.updateEntity(a.AtomCreateActivityNode,{method:"POST",headers:a.AtomXmlHeaders,query:{activityUuid:b},data:c},A)},createActivity:function(b){var f=this.validateField("activityOrJson",b);if(f)return f;b=this.newActivity(b);b.setType(a.ActivityNodeTypes.Activity);b.setCategoryScheme();b=b.createPostData();
return this.updateEntity(a.AtomActivitiesMy,{method:"POST",headers:a.AtomXmlHeaders,data:b},w)},_validateActivityNode:function(a,b,f){if(b&&!a.getActivityNodeUuid())return this.createBadRequestPromise("Invalid argument, activity node with UUID must be specified.");if(f&&!a.getType())return this.createBadRequestPromise("Invalid argument, activity node with Type must be specified.")},_validateActivity:function(a,b){if(b&&!a.getActivityUuid())return this.createBadRequestPromise("Invalid argument, activity with UUID must be specified.")},
updateActivityNode:function(a){var b=this.validateField("activityNodeOrJson",a);if(b)return b;a=this.newActivityNode(a);return(b=this._validateActivityNode(a,!0))?b:this._update(a,A)},updateActivity:function(a){var b=this.validateField("activityOrJson",a);return b?b:(b=this._validateActivity(this.newActivity(a),!0))?b:this._update(a,w)},_update:function(f,c){var e=new b,g=this,d=m(f.getUuid()),h=function(){f.setCategoryScheme();var b=f.createPostData();g.updateEntity(a.AtomActivityNode,{method:"PUT",
headers:a.AtomXmlHeaders,query:{activityNodeUuid:d},data:b},c).then(function(a){e.fulfilled(a)},function(a){e.rejected(a)})};if(f.isLoaded())h();else{var q=f._fields;f.load().then(function(){f._fields=q;h()},function(a){e.rejected(a)})}return e},changeEntryType:function(a){var b=this.validateField("activityNodeOrJson",a);if(b)return b;a=this.newActivityNode(a);this._validateActivityNode(a,!0,!0);return this.updateActivityNode(a)},moveEntryToSection:function(a,f){var c=this,e=this.validateField("activityNodeOrJson",
a);e||(e=this.validateField("sectionNodeOrJsonOrId",f));if(e)return e;var g=this.newActivityNode(a),d=this.newActivityNode(f),e=new b,h=function(){g.setInReplyTo(d.getActivityNodeUuid(),d.getSelfUrl());c.updateActivityNode(g).then(function(a){e.fulfilled(a)},function(a){e.rejected(a)})};d.isLoaded()?h():d.load().then(function(){h()},function(a){e.rejected(a)});return e},deleteActivityNode:function(b){var f=this.validateField("activityNodeUuid",b);return f?f:this.deleteEntity(a.AtomActivityNode,{method:"DELETE",
headers:a.AtomXmlHeaders,query:{activityNodeUuid:b}},b)},deleteActivity:function(a){var b=this.validateField("activityUuid",a);return b?b:this.deleteActivityNode(a)},restoreActivity:function(f){var c=this.validateField("activityUuid",f);if(c)return c;var e=this,c=new b;this.getActivityNodeFromTrash(f).then(function(a){return a}).then(function(b){if(b.isDeleted()){var g={activityNodeUuid:f};b.setCategoryScheme();b={method:"PUT",headers:a.AtomXmlHeaders,query:g,data:b.createPostData()};e.updateEntity(a.AtomActivityNodeTrash,
b,{createEntity:function(a,b,f){return f}}).then(function(a){c.fulfilled(a)},function(a){c.rejected(a)})}else c.rejected("Activity is not in Trash")});return c},restoreActivityNode:function(f){var c=this.validateField("activityNodeUuid",f);if(c)return c;var e=this,c=new b;this.getActivityNodeFromTrash(f).then(function(a){return a}).then(function(b){if(b.isDeleted()){var g={activityNodeUuid:f};b.setCategoryScheme();b={method:"PUT",headers:a.AtomXmlHeaders,query:g,data:b.createPostData()};e.updateEntity(a.AtomActivityNodeTrash,
b,{createEntity:function(a,b,f){return f}}).then(function(a){c.fulfilled(a)},function(a){c.rejected(a)})}else c.rejected("Activity Node is not in Trash")});return c},getActivityNodeFromTrash:function(b){var f=this.validateField("activityNodeUuid",b);return f?f:this.getEntity(a.AtomActivityNodeTrash,{method:"GET",handleAs:"text",query:{activityNodeUuid:b}},b,A)},newActivityNode:function(a){if(a instanceof y||a instanceof v)return a;c.isString(a)&&(a={id:a});return new y({service:this,_fields:c.mixin({},
a)})},getActivityNodesInTrash:function(b,f){var e=this.validateField("activityUuid",b);if(e)return e;e={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityUuid:b})||{}};return this.getEntities(a.AtomActivitiesTrash,e,A)},newActivity:function(a){if(a instanceof v)return a;c.isString(a)&&(a={id:a});return new v({service:this,_fields:c.mixin({},a)})},getAllToDos:function(b){return this.getEntities(a.AtomActivitiesToDos,{method:"GET",handleAs:"text",query:b||{}},w)},getAllTags:function(b){return this.getEntities(a.AtomActivitiesTags,
{method:"GET",handleAs:"text",query:b||{}},z)},getActivitiesInTrash:function(b){return this.getEntities(a.AtomActivitiesTrash,{method:"GET",handleAs:"text",query:b||{}},w)},getActivityTags:function(b,f){var e=this.validateField("activityUuid",b);if(e)return e;e={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityUuid:b})||{}};return this.getEntities(a.AtomActivitiesTags,e,z)},getActivityNodeTags:function(b,f){var e=this.validateField("activityNodeUuid",b);if(e)return e;e={method:"GET",handleAs:"text",
query:c.mixin(f||{},{activityNodeUuid:b})||{}};return this.getEntities(a.AtomActivitiesTags,e,z)},getMembers:function(b,f){var e=this.validateField("activityUuid",b);if(e)return e;e={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityUuid:b})||{}};return this.getEntities(a.AtomActivitiesMembers,e,D)},_validateMember:function(a,b,f){if(b&&!a.getMemberId())return this.createBadRequestPromise("Invalid argument, member with ID must be specified.");if(f&&!a.getContributor().userid&&!a.getContributor().email)return this.createBadRequestPromise("Invalid argument, member with User ID or Email must be specified.")},
getMember:function(a,b){var f=this.validateField("memberId",b);f||(f=this.validateField("activityUuid",a));return f?f:this._toMember(b).load(a)},addMember:function(b,f){var c=this.validateField("memberOrJson",f);c||(c=this.validateField("activityUuid",b));if(c)return c;var e=this._toMember(f);if(c=this._validateMember(e,!1,!0))return c;e.getRole()||e.setRole("member");e.setCategoryScheme();c=e.createPostData();return this.updateEntity(a.AtomActivitiesMembers,{method:"POST",headers:a.AtomXmlHeaders,
query:{activityUuid:b},data:c},{createEntity:function(a,b,f){return f}})},updateMember:function(b,f){var c=this.validateField("memberOrJson",f);c||(c=this.validateField("activityUuid",b));if(c)return c;var e=this._toMember(f);if(c=this._validateMember(e,!0,!0))return c;e.setCategoryScheme();c=e.createPostData();e={activityUuid:b,memberid:e.getMemberId()};return this.updateEntity(a.AtomActivitiesMembers,{method:"PUT",headers:a.AtomXmlHeaders,query:e,data:c},{createEntity:function(a,b,f){return f}})},
deleteMember:function(b,f){var c=this.validateField("activityUuid",b);c||(c=this.validateField("memberId",f));return c?c:this.deleteEntity(a.AtomActivitiesMembers,{method:"DELETE",headers:a.AtomXmlHeaders,query:{activityUuid:b,memberid:f}},f)},_toMember:function(a){if(a){if(a instanceof x)return a;var b=new x({service:this});c.isString(a)&&(a={id:a});b._fields=c.mixin({},a);if(b._fields.userId)b._fields.contributorUserid=b._fields.userId;return b}},newMember:function(a){return this._toMember(a)}})})},
"sbt/connections/Tag":function(){define(["../declare","../base/BaseEntity"],function(i,h){return i(h,{constructor:function(){},getTerm:function(){return this.getAsString("term")},getFrequency:function(){return this.getAsNumber("frequency")}})})},"sbt/base/JsonDataHandler":function(){define("../declare,../lang,../json,./DataHandler,../Jsonpath,../stringUtil".split(","),function(i,h,c,d,b,a){return i(d,{dataType:"json",jsonpath:null,_values:null,constructor:function(a){h.mixin(this,a);this._values=
{};this.data=a.data},getAsString:function(a){this._validateProperty(a,"getAsString");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._get(a).toString()),this._values[a]):_get(a)},getAsNumber:function(a){this._validateProperty(a,"getAsNumber");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._getNumber(a)),this._values[a]):_getNumber(a)},getAsDate:function(a){this._validateProperty(a,"getAsDate");return this._values?(this._values.hasOwnProperty(a)||
(this._values[a]=this._getDate(a)),this._values[a]):_getDate(a)},getAsBoolean:function(a){this._validateProperty(a,"getAsBoolean");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._getBoolean(a)),this._values[a]):_getBoolean(a)},getAsArray:function(a){this._validateProperty(a,"getAsArray");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._get(a)),this._values[a]):_get(a)},getEntityId:function(){return a.trim(this.getAsString(this.jsonpath.id))},
getEntityData:function(){return this.data},getSummary:function(){if(!this._summary&&this._get("totalResults")[0])this._summary={totalResults:this.getAsNumber("totalResults"),startIndex:this.getAsNumber("startIndex"),itemsPerPage:this.getAsNumber("itemsPerPage")};return this._summary},getEntitiesDataArray:function(){return this._get(this._getJPath("entry"))[0]},toJson:function(){return this.data},_getDate:function(a){a=this._get(a)[0];return a instanceof Date?a:new Date(a)},_getBoolean:function(a){return this._get(a)[0]?
!0:!1},_getNumber:function(a){a=this._get(a)[0];return"number"===typeof a?a:h.isArray(a)?a.length:Number(a)},_validateProperty:function(b,c){if(!b){var d=a.substitute("Invalid argument for JsonDataHandler.{1} {0}",[b,c]);throw Error(d);}},_validateObject:function(b){if(!b)throw b=a.substitute("Invalid argument for JsonDataHandler.{0}",[b]),Error(b);},_evalJson:function(a){return b(this.data,a)},_evalJsonWithData:function(a,c){return b(c,a)},_get:function(a){this._validateObject(this.data);return this._evalJson(this._getJPath(a))},
_getJPath:function(a){return this.jsonpath[a]||a},extractFirstElement:function(a){return this._evalJsonWithData("$[0]",a)}})})},"sbt/connections/FileService":function(){define("../declare,../lang,../stringUtil,../Promise,./FileConstants,./ConnectionsService,../base/BaseEntity,../base/XmlDataHandler,../config,../util,../xml".split(","),function(i,h,c,d,b,a,g,j,k,o,p){var m=i(g,{getId:function(){return this.getAsString("id")},getLibraryUuid:function(){return this.getAsString("uuid")},getLibrarySize:function(){return this.getAsNumber("librarySize")},
getLibraryQuota:function(){return this.getAsNumber("libraryQuota")},getTotalRemovedSize:function(){return this.getAsNumber("totalRemovedSize")},getTotalResults:function(){return this.getAsNumber("totalResults")}}),n=i(g,{getCommentId:function(){return this.id||this.getAsString("uid")},getTitle:function(){return this.getAsString("title")},getContent:function(){return this.getAsString("content")},getCreated:function(){return this.getAsDate("created")},getModified:function(){return this.getAsDate("modified")},
getVersionLabel:function(){return this.getAsString("versionLabel")},getUpdated:function(){return this.getAsDate("updated")},getPublished:function(){return this.getAsDate("published")},getModifier:function(){return this.getAsObject(["modifierName","modifierUserId","modifierEmail","modifierUserState"])},getAuthor:function(){return this.getAsObject(["authorName","authorUserId","authorEmail","authorUserState"])},getLanguage:function(){return this.getAsString("language")},getDeleteWithRecord:function(){return this.getAsBoolean("deleteWithRecord")}}),
e=i(g,{getFileId:function(){return this.id||this.getAsString("uid")||this._fields.id},getLabel:function(){return this.getAsString("label")},getSelfUrl:function(){return this.getAsString("selfUrl")},getAlternateUrl:function(){return this.getAsString("alternateUrl")},getDownloadUrl:function(){return k.Properties.serviceUrl+"/files/"+this.service.endpoint.proxyPath+"/connections/DownloadFile/"+this.getFileId()+"/"+this.getLibraryId()},getType:function(){return this.getAsString("type")},getCategory:function(){return this.getAsString("category")},
getSize:function(){return this.getAsNumber("length")},getEditLink:function(){return this.getAsString("editLink")},getEditMediaLink:function(){return this.getAsString("editMediaLink")},getThumbnailUrl:function(){return this.getAsString("thumbnailUrl")},getCommentsUrl:function(){return this.getAsString("commentsUrl")},getAuthor:function(){return this.getAsObject(["authorName","authorUserId","authorEmail","authorUserState"])},getTitle:function(){return this.getAsString("title")},getPublished:function(){return this.getAsDate("published")},
getUpdated:function(){return this.getAsDate("updated")},getCreated:function(){return this.getAsDate("created")},getModified:function(){return this.getAsDate("modified")},getLastAccessed:function(){return this.getAsDate("lastAccessed")},getModifier:function(){return this.getAsObject(["modifierName","modifierUserId","modifierEmail","modifierUserState"])},getVisibility:function(){return this.getAsString("visibility")},getLibraryId:function(){return this.getAsString("libraryId")},setLibraryId:function(a){return this.setAsString("libraryId",
a)},getLibraryType:function(){return this.getAsString("libraryType")},getVersionUuid:function(){return this.getAsString("versionUuid")},getVersionLabel:function(){return this.getAsString("versionLabel")},getPropagation:function(){return this.getAsString("propagation")},getRecommendationsCount:function(){return this.getAsNumber("recommendationsCount")},getCommentsCount:function(){return this.getAsNumber("commentsCount")},getSharesCount:function(){return this.getAsNumber("sharesCount")},getFoldersCount:function(){return this.getAsNumber("foldersCount")},
getAttachmentsCount:function(){return this.getAsNumber("attachmentsCount")},getVersionsCount:function(){return this.getAsNumber("versionsCount")},getReferencesCount:function(){return this.getAsNumber("referencesCount")},getTotalMediaSize:function(){return this.getAsNumber("totalMediaSize")},getSummary:function(){return this.getAsString("summary")},getContentUrl:function(){return this.getAsString("contentUrl")},getContentType:function(){return this.getAsString("contentType")},getObjectTypeId:function(){return this.getAsString("objectTypeId")},
getLockType:function(){return this.getAsString("lock")},getAcls:function(){return this.getAsString("acls")},getHitCount:function(){return this.getAsNumber("hitCount")},getAnonymousHitCount:function(){return this.getAsNumber("anonymousHitCount")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},setLabel:function(a){return this.setAsString("label",a)},setSummary:function(a){return this.setAsString("summary",a)},setVisibility:function(a){return this.setAsString("visibility",
a)},setNotification:function(a){return this.setAsBoolean("notification",a?"on":"off")},load:function(a,c,f){var e=this.getFileId(),d=this.service.validateField("fileId",e);if(d||c&&(d=this.service.validateField("libraryId",this.getLibraryId())))return d;var g=this,a={query:h.mixin({fileUuid:e},a||{})};f||(f=c?this.service.constructUrl(b.AtomFileInstancePublic,null,{documentId:e,libraryId:this.getLibraryId()}):this.service.constructUrl(b.AtomFileInstance,null,{documentId:e}));return this.service.getEntity(f,
a,e,{createEntity:function(a,f){g.dataHandler=new j({data:f,namespaces:b.Namespaces,xpath:b.FileXPath});return g}})},save:function(a){if(this.getFileId())return this.service.updateFileMetadata(this,a)},addComment:function(a,b){return this.service.addCommentToFile(this.getAuthor().authorUserId,this.getFileId(),a,b)},pin:function(a){return this.service.pinFile(this.getFileId(),a)},unpin:function(a){return this.service.unpinFile(this.getFileId(),a)},lock:function(a){return this.service.lockFile(this.getFileId(),
a)},unlock:function(a){return this.service.unlockFile(this.getFileId(),a)},remove:function(a){return this.service.deleteFile(this.getFileId(),a)},update:function(a){return this.service.updateFileMetadata(this,a)},download:function(){return this.service.downloadFile(this.getFileId(),this.getLibraryId())}}),r={createEntities:function(a,c){return new j({data:c,namespaces:b.Namespaces,xpath:b.FileFeedXPath})},createEntity:function(a,c){var f=null,f="object"==typeof c?c:(new j({data:c,namespaces:b.Namespaces,
xpath:b.FileXPath})).data,f=new j({data:f,namespaces:b.Namespaces,xpath:b.FileXPath});return new e({service:a,dataHandler:f})}},s={createEntities:function(a,c){return new j({data:c,namespaces:b.Namespaces,xpath:b.CommentFeedXPath})},createEntity:function(a,c){var f=null,f="object"==typeof c?c:(new j({data:c,namespaces:b.Namespaces,xpath:b.CommentXPath})).data,f=new j({data:f,namespaces:b.Namespaces,xpath:b.CommentXPath});return new n({service:a,dataHandler:f})}};return i(a,{contextRootMap:{files:"files"},
serviceName:"files",constructor:function(a){a=a?a.endpoint?a.endpoint:this.getDefaultEndpointName():this.getDefaultEndpointName();if(!this.endpoint)this.endpoint=k.findEndpoint(a)},getMyLibrary:function(){var a=this;return this.getEntity(b.AtomFilesMy,{method:"GET",handleAs:"text",query:{ps:1,includeQuota:!0}},"my",{createEntity:function(c,f){var e=new j({data:f,namespaces:b.Namespaces,xpath:b.LibraryXPath});return new m({service:a,dataHandler:e})}})},newFile:function(a){if(a instanceof e)return a;
h.isString(a)&&(a={id:a});return new e({service:this,_fields:h.mixin({},a)})},getFile:function(a,b){var f=this.validateField("fileId",a);return f?f:this.newFile({id:a}).load(b)},getCommunityFile:function(a,c,f){var e=this.validateField("fileId",a);e||(e=this.validateField("communityId",c));if(e)return e;a=this.newFile({id:a});c=this.constructUrl(b.AtomGetCommunityFile,null,{communityId:c,documentId:a.getFileId()});return a.load(f,null,c)},getMyFiles:function(a){return this.getEntities(b.AtomFilesMy,
{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getCommunityFiles:function(a,c){var f={method:"GET",handleAs:"text",query:c||{}};return this.getEntities(this.constructUrl(b.AtomGetAllFilesInCommunity,null,{communityId:a}),f,this.getFileFeedCallbacks())},getFilesSharedWithMe:function(a){a={method:"GET",handleAs:"text",query:h.mixin({direction:"inbound"},a?a:{})};return this.getEntities(b.AtomFilesShared,a,this.getFileFeedCallbacks())},getFilesSharedByMe:function(a){a={method:"GET",
handleAs:"text",query:h.mixin({direction:"outbound"},a?a:{})};return this.getEntities(b.AtomFilesShared,a,this.getFileFeedCallbacks())},getPublicFiles:function(a){return this.getEntities(b.AtomFilesPublic,{method:"GET",handleAs:"text",query:a||{},headers:{}},this.getFileFeedCallbacks())},getMyFolders:function(a){return this.getEntities(b.AtomFoldersMy,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getMyFileComments:function(a,b,f){return this.getFileComments(b,a,!1,null,
f)},getPublicFileComments:function(a,b,f){return this.getFileComments(b,a,!0,null,f)},addCommentToFile:function(a,c,f,e,d){var g=this.validateField("fileId",c);g||(g=this.validateField("comment",f));if(g)return g;f={method:"POST",query:d||{},headers:b.AtomXmlHeaders,data:this._constructPayloadForComment(!1,f)};e||(e=a?this.constructUrl(b.AtomAddCommentToFile,null,{userId:a,documentId:c}):this.constructUrl(b.AtomAddCommentToMyFile,null,{documentId:c}));return this.updateEntity(e,f,this.getCommentFeedCallbacks())},
addCommentToMyFile:function(a,b,f){return this.addCommentToFile(null,a,b,null,f)},addCommentToCommunityFile:function(a,c,f,e){f=this.constructUrl(b.AtomAddCommentToCommunityFile,null,{communityId:f,documentId:a});return this.addCommentToFile(null,a,c,f,e)},updateFileMetadata:function(a,c,f){var e=this.validateField("fileOrJson",a);if(e)return e;a=this.newFile(a);f={method:"PUT",query:f||{},headers:b.AtomXmlHeaders,data:this._constructPayload(a._fields,a.getFileId())};c||(c=this.constructUrl(b.AtomUpdateFileMetadata,
null,{documentId:a.getFileId()}));return this.updateEntity(c,f,this.getFileFeedCallbacks())},updateCommunityFileMetadata:function(a,c,f){var e=this.validateField("fileOrJson",a);if(e)return e;var g=this.newFile(a),e=new d,h=this,j=function(){var a=h.constructUrl(b.AtomUpdateCommunityFileMetadata,null,{libraryId:g.getLibraryId(),documentId:g.getFileId()});h.updateFileMetadata(g,a,f).then(function(a){e.fulfilled(a)},function(a){e.rejected(a)})};g.isLoaded()?j():(a=h.constructUrl(b.AtomGetCommunityFile,
null,{communityId:c,documentId:g.getFileId()}),g.load(null,null,a).then(function(){j()},function(a){e.rejected(a)}));return e},pinFile:function(a,c){var f=this.validateField("fileId",a);if(f)return f;f=c?h.mixin({},c):{};f.itemId=a;return this.updateEntity(b.AtomPinFile,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:f},{createEntity:function(){return"Success"}})},unpinFile:function(a,c){var f=this.validateField("fileId",a);if(f)return f;f=c?h.mixin({},c):{};f.itemId=a;return this.deleteEntity(b.AtomPinFile,
{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:f},a)},addFilesToFolder:function(a,c){var f=this.validateField("fileIds",a);f||(f=this.validateField("folderId",c));var f=this.constructUrl(b.AtomAddFilesToFolder,null,{collectionId:c}),e="?",d;for(d in a)f+=e+"itemId="+a[d],e="&";return this.updateEntity(f,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},{createEntity:function(){return"Success"}})},getPinnedFiles:function(a){return this.getEntities(b.AtomFilesMyPinned,
{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},deleteFile:function(a){var c=this.validateField("fileId",a);return c?c:this.deleteEntity(this.constructUrl(b.AtomDeleteFile,null,{documentId:a}),{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},lockFile:function(a,c){var f=c?h.mixin({},c):{};f.type="HARD";var e={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:c||{}};return this.updateEntity(this.constructUrl(b.AtomLockUnlockFile,f,{documentId:a}),
e,{createEntity:function(){return"Success"}},c)},unlockFile:function(a,c){var f=c?h.mixin({},c):{};f.type="NONE";var e={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:c||{}};return this.updateEntity(this.constructUrl(b.AtomLockUnlockFile,f,{documentId:a}),e,{createEntity:function(){return"Success"}},c)},uploadFile:function(a,b){var f=this.validateField("File Control Or Id",a);if(f||(f=this.validateHTML5FileSupport()))return f;f=null;if("string"==typeof a)f=document.getElementById(a).files;
else if("object"==typeof a)f=a.files;else return this.createBadRequestPromise("File Control or ID is required");if(0==f.length)return this.createBadRequestPromise("No files selected for upload");var f=f[0],c=new FormData;c.append("file",f);return this.uploadFileBinary(c,f.name,b)},uploadFileBinary:function(a,b,f){var c=this.validateField("Binary Content",a);return c?c:(c=this.validateField("File Name",b))?c:-1!=o.getJavaScriptLibrary().indexOf("Dojo 1.4.3")?this.createBadRequestPromise("Dojo 1.4.3 is not supported for File upload"):
this.updateEntity(this.constructUrl(k.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/UploadFile/"+encodeURIComponent(b),f&&f.parameters?f.parameters:{}),{method:"POST",headers:{"Content-Type":!1,"Process-Data":!1},query:f||{},data:a},this.getFileFeedCallbacks())},uploadNewVersion:function(a,b,f){var c=this.validateField("File Control Or Id",b);c||(c=this.validateField("File ID",a));if(c||(c=this.validateHTML5FileSupport()))return c;c=null;if("string"==typeof b)b=document.getElementById(b),
filePath=b.value,c=b.files;else if("object"==typeof b)filePath=b.value,c=b.files;else return this.createBadRequestPromise("File Control or ID is required");b=c[0];c=new FormData;c.append("file",b);return this.uploadNewVersionBinary(c,a,b.name,f)},uploadNewVersionBinary:function(a,b,f,c){var e=this.validateField("Binary Content",a);if(e||(e=this.validateField("File ID",b)))return e;if(e=this.validateField("File Name",f))return e;if(-1!=o.getJavaScriptLibrary().indexOf("Dojo 1.4.3"))return this.createBadRequestPromise("Dojo 1.4.3 is not supported for File Upload");
var b=this.constructUrl(k.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/UploadNewVersion/"+encodeURIComponent(b)+"/"+encodeURIComponent(f),c&&c.parameters?c.parameters:{}),a={method:"PUT",headers:{"Content-Type":!1,"Process-Data":!1},data:a},e=new d,g=this;this.updateEntity(b,a,this.getFileFeedCallbacks()).then(function(a){c?g.updateFile(a.getFileId(),c).then(function(a){e.fulfilled(a)}):e.fulfilled(a)},function(a){e.rejected(a)});return e},updateFile:function(a,e){var f=this.validateField("File ID",
a);if(f)return f;var f=this.constructUrl(b.AtomFileInstance,null,{documentId:a}),d="?";if(e&&e.tags){var g=e.tags.split(","),h;for(h in g)f+=d+"tag="+c.trim(g[h]),d="&";delete e.tags}if(e&&e.removeTags){g=e.removeTags.split(",");for(h in g)f+=d+"removeTag="+c.trim(g[h]),d="&";delete e.removeTags}return this.updateEntity(f,{method:"PUT",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:e||{}},this.getFileFeedCallbacks())},downloadFile:function(a,b){window.open(k.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+
"/connections/DownloadFile/"+a+"/"+b)},actOnCommentAwaitingApproval:function(){},actOnFileAwaitingApproval:function(){},addFileToFolders:function(a,c,f){var e=this.validateField("fileId",a);e||(e=this.validateField("folderIds",c));if(e)return e;e=null;e=f?this.constructUrl(b.AtomAddFileToFolders,null,{userId:f,documentId:a}):this.constructUrl(b.AtomAddMyFileToFolders,null,{documentId:a});a=this._constructPayloadForMultipleEntries(c,"itemId","collection");return this.updateEntity(e,{method:"POST",
headers:b.AtomXmlHeaders,data:a},{createEntity:function(){}})},createFolder:function(a,c,f){var e=this.validateField("folderName",a);if(e)return e;e=b.AtomCreateFolder;a=this._constructPayloadFolder(a,c,f,"create");a={method:"POST",headers:h.mixin(b.AtomXmlHeaders,{"X-Update-Nonce":"{X-Update-Nonce}"}),data:a};return this.updateEntity(e,a,this.getFileFeedCallbacks())},deleteAllFilesFromRecycleBin:function(a){var c=null,c=a?this.constructUrl(b.AtomDeleteAllFilesFromRecyclebBin,null,{userId:a}):b.AtomDeleteMyFilesFromRecyclebBin;
return this.deleteEntity(c,{method:"DELETE"},"")},deleteAllVersionsOfFile:function(a,c,f){var e=this.validateField("fileId",a);e||(e=this.validateField("versionLabel",c));if(e)return e;c={method:"DELETE",query:h.mixin({category:"version",deleteFrom:c},f||{}),headers:{"X-Update-Nonce":"{X-Update-Nonce}"}};return this.deleteEntity(this.constructUrl(b.AtomDeleteAllVersionsOfAFile,null,{documentId:a}),c,a)},deleteComment:function(a,c,f,e){var d=this.validateField("fileId",a);d||(d=this.validateField("commentId",
c));if(d)return d;d=null;d=f?this.constructUrl(b.AtomDeleteComment,null,{userId:f,documentId:a,commentId:c}):this.constructUrl(b.AtomDeleteMyComment,null,{documentId:a,commentId:c});return this.deleteEntity(d,{method:"DELETE",query:e||{},headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},c)},deleteFileFromRecycleBin:function(a,c,f){var e=this.validateField("fileId",a);if(e)return e;e=null;e=c?this.constructUrl(b.AtomDeleteFileFromRecycleBin,null,{userId:c,documentId:a}):this.constructUrl(b.AtomDeleteMyFileFromRecycleBin,
null,{documentId:a});return this.deleteEntity(e,{method:"DELETE",query:f||{},headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},deleteFileShare:function(a,c,f){var e=this.validateField("fileId",a);if(e)return e;f=h.mixin({sharedWhat:a},f||{});if(c)f.sharedWith=c;return this.deleteEntity(b.AtomDeleteFileShare,{method:"DELETE",query:f,headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},deleteFolder:function(a){var c=this.validateField("folderId",a);return c?c:this.deleteEntity(this.constructUrl(b.AtomDeleteFFolder,
null,{collectionId:a}),{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},getAllUserFiles:function(a,c){var f=this.validateField("userId",a);if(f)return f;f={method:"GET",handleAs:"text",query:c||{}};return this.getEntities(this.constructUrl(b.AtomGetAllUsersFiles,null,{userId:a}),f,this.getFileFeedCallbacks())},getFileComments:function(a,c,f,e,d,g){var h=this.validateField("fileId",a);if(h)return h;h=null;if(d)h=this.constructUrl(b.AtomAddCommentToCommunityFile,null,{communityId:d,
documentId:a});else if(e)h=c?this.constructUrl(b.AtomGetFileComment,null,{userId:c,documentId:a,commentId:e}):this.constructUrl(b.AtomGetMyFileComment,null,{documentId:a,commentId:e});else{if(h=this.validateField("userId",c))return h;h=f?this.constructUrl(b.AtomFileCommentsPublic,null,{userId:c,documentId:a}):this.constructUrl(b.AtomFileCommentsMy,null,{userId:c,documentId:a})}return this.getEntities(h,{method:"GET",handleAs:"text",query:g||{}},this.getCommentFeedCallbacks())},getAllCommunityFileComments:function(a,
b,f){var c=this.validateField("fileId",a);c||(c=this.validateField("communityId",b));return c?c:this.getFileComments(a,null,null,null,b,f)},getFileFromRecycleBin:function(a,c,f){var e=this.validateField("fileId",a);if(e)return e;f={method:"GET",handleAs:"text",query:f||{}};return this.getEntity(this.constructUrl(b.AtomGetFileFromRecycleBin,null,{userId:c,documentId:a}),f,{createEntity:function(a,f){self.dataHandler=new j({data:f,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},getFilesAwaitingApproval:function(a){return this.getEntities(b.AtomGetFilesAwaitingApproval,
{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getFileShares:function(a){return this.getEntities(b.AtomGetFileShares,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getFilesInFolder:function(a,c){return this.getEntities(this.constructUrl(b.AtomGetFilesInFolder,null,{collectionId:a}),{method:"GET",handleAs:"text",query:c||{}},this.getFileFeedCallbacks())},getFilesInMyRecycleBin:function(a){return this.getEntities(b.AtomGetFilesInMyRecycleBin,{method:"GET",
handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getFileWithGivenVersion:function(a,c,f){var e=this.validateField("fileId",a);if(e)return e;if(!c)return this.getFile(a,f);f={method:"GET",handleAs:"text",query:f||{}};return this.getEntity(this.constructUrl(b.AtomGetFileWithGivenVersion,null,{documentId:a,versionId:c}),f,{createEntity:function(a,f){self.dataHandler=new j({data:f,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},getFolder:function(a){var c=this.validateField("folderId",
a);return c?c:this.getEntity(this.constructUrl(b.AtomGetFolder,null,{collectionId:a}),{method:"GET",handleAs:"text"},{createEntity:function(a,c){self.dataHandler=new j({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},getFoldersWithRecentlyAddedFiles:function(a){return this.getEntities(b.AtomGetFoldersWithRecentlyAddedFiles,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getPinnedFolders:function(a){return this.getEntities(b.AtomGetPinnedFolders,{method:"GET",
handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getPublicFolders:function(a){return this.getEntities(b.AtomGetPublicFolders,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},pinFolder:function(a,c){var f=this.validateField("folderId",a);if(f)return f;f=c?h.mixin({},c):{};f.itemId=a;return this.updateEntity(b.AtomPinFolder,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:f},{createEntity:function(){}})},removeFileFromFolder:function(a,c){var f=this.validateField("folderId",
a);if(f||(f=this.validateField("fileId",c)))return f;f=args?h.mixin({},args):{};f.itemId=c;return this.deleteEntity(this.constructUrl(b.AtomRemoveFileFromFolder,null,{collectionId:a}),{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:f},c)},restoreFileFromRecycleBin:function(a,c){var f=this.validateField("fileId",a);if(f||(f=this.validateField("userId",c)))return f;f=args?h.mixin({},args):{};f.undelete="true";f={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:f};
return this.updateEntity(this.constructUrl(b.AtomRestoreFileFromRecycleBin,null,{userId:c,documentId:a}),f,{createEntity:function(a,c){self.dataHandler=new j({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},shareFileWithCommunities:function(a,c){var f=this.validateField("fileId",a);f||(f=this.validateField("communityIds",c));if(f)return f;var f=this.constructUrl(b.AtomShareFileWithCommunities,null,{documentId:a}),e=this._constructPayloadForMultipleEntries(c,"itemId","community");
return this.updateEntity(f,{method:"POST",headers:b.AtomXmlHeaders,data:e},{createEntity:function(a,b,c){return c}})},unpinFolder:function(a,c){var f=this.validateField("folderId",a);if(f)return f;f=c?h.mixin({},c):{};f.itemId=a;return this.deleteEntity(b.AtomPinFolder,{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:f},a)},updateMyComment:function(a,b,c,e){return updateComment(a,b,c,null,e)},updateComment:function(a,c,f,e,d){var g=this.validateField("fileId",a);g||(g=this.validateField("comment",
f));if(g)return g;g||(g=this.validateField("commentId",c));if(g)return g;f={method:"POST",query:d||{},headers:b.AtomXmlHeaders,data:this._constructPayloadForComment(!1,f)};d=null;d=e?this.constructUrl(b.AtomUpdateComment,null,{userId:e,documentId:a,commentId:c}):this.constructUrl(b.AtomUpdateMyComment,null,{documentId:a,commentId:c});return this.updateEntity(d,f,this.getCommentFeedCallbacks())},addFileToFolder:function(a,b,c,e){return this.addFileToFolders(a,[b],c,e)},getFileFeedCallbacks:function(){return r},
getCommentFeedCallbacks:function(){return s},_constructPayloadFolder:function(a,b,f,e,d){var g=this,h=null,j=null,i=null;f&&""!=c.trim(f)&&(f=f.split(","),3==f.length&&(h=f[0],j=f[1],i=f[2]));var k=function(c,f){"category"==f?c=p.encodeXmlEntry("collection"):"id"==f?c=p.encodeXmlEntry(d):"label"==f?c=p.encodeXmlEntry(a):"title"==f?c=p.encodeXmlEntry(a):"summary"==f?c=p.encodeXmlEntry(b):"visibility"==f?c=p.encodeXmlEntry("private"):"shareWithId"==f&&h?c=p.encodeXmlEntry(h):"shareWithWhat"==f&&j?c=
p.encodeXmlEntry(j):"shareWithRole"==f&&i&&(c=p.encodeXmlEntry(i));return c},f=c.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom">${getCategory}${getId}${getFolderLabel}${getTitle}${getSummary}${getVisibility}${getVisibilityShare}</entry>',this,function(a,b){"getCategory"==b?a=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',g,k,g):"getId"==b&&d?a=c.transform("<id>${id}</id>",g,k,g):"getFolderLabel"==b?a=
c.transform('<label xmlns="urn:ibm.com/td" makeUnique="true">${label}</label>',g,k,g):"getTitle"==b?a=c.transform("<title>${title}</title>",g,k,g):"getSummary"==b?a=c.transform('<summary type="text">${summary}</summary>',g,k,g):"getVisibility"==b?a=c.transform('<visibility xmlns="urn:ibm.com/td">${visibility}</visibility>',g,k,g):"getVisibilityShare"==b&&h&&(a=c.transform('<sharedWith xmlns="urn:ibm.com/td"> <member xmlns="http://www.ibm.com/xmlns/prod/composite-applications/v1.0" ca:type="${shareWithWhat}" xmlns:ca="http://www.ibm.com/xmlns/prod/composite-applications/v1.0" ca:id="${shareWithId}" ca:role="${shareWithRole}"/> </sharedWith>',
g,k,g));return a},this);return c.trim(f)},_constructPayloadForMultipleEntries:function(a,b,f){var b='<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">${getEntries}</feed>',e="",d="",g="",h="",j=function(a,b){"category"==b?a=p.encodeXmlEntry(f):"getCategory"==b?a=d:"fileId"==b?a=p.encodeXmlEntry(h):"getItem"==b?a=g:"getEntries"==b&&(a=e);return a},i;for(i in a){var h=a[i],k="<entry>${getCategory}${getItem}</entry>";f&&(d=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',
this,j,this));g=c.transform('<itemId xmlns="urn:ibm.com/td">${fileId}</itemId>',this,j,this);k=c.transform(k,this,j,this);e+=k}""!=e&&(b=c.transform(b,this,j,this));return b},_constructPayloadForComment:function(a,b){var f='<entry xmlns="http://www.w3.org/2005/Atom">${getCategory}${getDeleteComment}${getContent}</entry>',e="",d="",g="",h=function(a,c){"category"==c?a=p.encodeXmlEntry("comment"):"content"==c?a=p.encodeXmlEntry(b):"deleteWithRecord"==c?a="true":"getCategory"==c&&""!=e?a=e:"getContent"==
c&&""!=d?a=d:"getDeleteComment"==c&&""!=g&&(a=g);return a},e=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',this,h,this),d=c.transform('<content type="text/plain">${content}</content>',this,h,this);a&&(g=c.transform('<deleteWithRecord xmlns="urn:ibm.com/td">${deleteWithRecord}</deleteWithRecord>',this,h,this));return f=c.transform(f,this,h,this)},_constructPayload:function(a){var b='<entry xmlns="http://www.w3.org/2005/Atom">${getCategory}${getId}${getUuid}${getLabel}${getTitle}${getSummary}${getVisibility}${getItem}${getTags}${getNotification}</entry>',
f="",e="",d="",g="",h="",j="",i="",k="",m="",r="",s=null,o=function(a,b){s?a=p.encodeXmlEntry(s):"getCategory"==b&&""!=f?a=f:"getId"==b&&""!=e?a=e:"getUuid"==b&&""!=d?a=d:"getLabel"==b&&""!=g?a=g:"getTitle"==b&&""!=h?a=h:"getSummary"==b&&""!=j?a=j:"getVisibility"==b&&""!=i?a=i:"getItem"==b&&""!=k?a=k:"getTags"==b&&""!=m?a=m:"getNotification"==b&&""!=r&&(a=r);return a},n;for(n in a)if(s=a[n],-1!=n.indexOf("category"))f=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',
this,o,this);else if(-1!=n.indexOf("id"))e=c.transform("<id>${id}</id>",this,o,this);else if(-1!=n.indexOf("uuid"))d=c.transform('<uuid xmlns="urn:ibm.com/td">${uuid}</uuid>',this,o,this);else if(-1!=n.indexOf("label"))g=c.transform('<label xmlns="urn:ibm.com/td">${label}</label>',this,o,this),h=c.transform("<title>${title}</title>",this,o,this);else if(-1!=n.indexOf("summary"))j=c.transform('<summary type="text">${summary}</summary>',this,o,this);else if(-1!=n.indexOf("visibility"))i=c.transform('<visibility xmlns="urn:ibm.com/td">${visibility}</visibility>',
this,o,this);else if(-1!=n.indexOf("itemId"))k=c.transform('<itemId xmlns="urn:ibm.com/td">${fileId}</itemId>',this,o,this);else if(-1!=n.indexOf("tags")){var B=s,C;for(C in B)m+=c.transform('<category term="${tag}" /> ',{tag:B[C]})}else n.contains("notification")&&(r=c.transform("<td:notification>${notification}</td:notification>",this,o,this));s=null;return b=c.transform(b,this,o,this)}})})},"sbt/authenticator/SSO":function(){define(["../declare","../lang","../util","../i18n!../nls/messageSSO"],
function(i,h,c,d){return i(null,{loginUi:"",messageSSO:"/sbt/authenticator/templates/MessageSSO.html",dialogMessageSSO:"authenticator/templates/MessageDialogSSO.html",url:"",constructor:function(b){h.mixin(this,b||{})},authenticate:function(b){var a=this;require(["sbt/config"],function(c){var d=b.loginUi||c.Properties.loginUi||a.loginUi,h=b.messageSSO||c.Properties.messageSSO||a.messageSSO,c=b.dialogMessageSSO||c.Properties.dialogMessageSSO||a.dialogMessageSSO;"popup"==d?a._authPopup(b,h,a.url):"dialog"==
d?a._authDialog(b,c):a._authMainWindow(b,h,a.url)});return!0},_authPopup:function(b,a,g){var h=c.createQuery({loginUi:"popup"},"&"),a=g+a+"?"+h,g=c.createQuery({width:window.screen.availWidth/2,height:window.screen.availHeight/2,left:window.screen.availWidth/4,top:window.screen.availHeight/4,menubar:0,toolbar:0,status:0,location:0,scrollbars:1,resizable:1},","),a=window.open(a,"Authentication",g);a.globalSSOStrings=d;a.globalEndpointAlias=b.name;a.focus();return!0},_authDialog:function(b,a){require(["sbt/_bridge/ui/SSO_Dialog",
"sbt/dom"],function(c,h){c.show(b,a,d);h.setText("reloginMessage",d.message);h.setAttr(h.byId("ssoLoginFormOK"),"value",d.relogin_button_text)});return!0},_authMainWindow:function(b,a,g){b=c.createQuery({redirectURL:document.URL,loginUi:"mainWindow",message_title:d.message_title,message:d.message,relogin_button_text:d.relogin_button_text},"&");window.location.href=g+a+"?"+b;return!0}})})},"sbt/nls/validate":function(){define({root:{error_callback:"Error running error callback : {0}",error_console:"Error received. Error Code = {0}. Error Message = {1}",
validate_nullObject:"{0}.{1} : Null argument provided for {2}. Expected type is {3}",validate_expectedType:"{0}.{1} : {2} argument type does not match expected type {3} for {4}"}})},"sbt/emailService":function(){define(["./declare","./lang","./config","./_bridge/Transport","./json"],function(i,h,c,d,b){var a=new d;return{send:function(d){var h=c.Properties.serviceUrl+"/mailer",d={method:"POST",data:b.stringify(d),headers:{"Content-Type":"application/json"},handleAs:"json"};return a.request(h,d)}}})},
"sbt/main":function(){define("sbt/Cache,sbt/DebugTransport,sbt/Endpoint,sbt/ErrorTransport,sbt/Gadget,sbt/GadgetTransport,sbt/IWidget,sbt/Jsonpath,sbt/MockTransport,sbt/Portlet,sbt/Promise,sbt/Proxy,sbt/_config,sbt/compat,sbt/config,sbt/declare,sbt/defer,sbt/dom,sbt/emailService,sbt/i18n,sbt/itemFactory,sbt/json,sbt/lang,sbt/log,sbt/pathUtil,sbt/ready,sbt/stringUtil,sbt/text,sbt/url,sbt/util,sbt/validate,sbt/xml,sbt/xpath,sbt/xsl,sbt/WPSProxy,sbt/authenticator/Basic,sbt/authenticator/GadgetOAuth,sbt/authenticator/OAuth,sbt/authenticator/SSO,sbt/base/AtomEntity,sbt/base/BaseConstants,sbt/base/BaseEntity,sbt/base/BaseService,sbt/base/DataHandler,sbt/base/JsonDataHandler,sbt/base/VCardDataHandler,sbt/base/XmlDataHandler,sbt/base/core,sbt/connections/ActivityConstants,sbt/connections/ActivityService,sbt/connections/ActivityStreamConstants,sbt/connections/ActivityStreamService,sbt/connections/BlogConstants,sbt/connections/BlogService,sbt/connections/BookmarkConstants,sbt/connections/BookmarkService,sbt/connections/CommunityConstants,sbt/connections/CommunityService,sbt/connections/ConnectionsConstants,sbt/connections/ConnectionsService,sbt/connections/FileConstants,sbt/connections/FileService,sbt/connections/FollowConstants,sbt/connections/FollowService,sbt/connections/ForumConstants,sbt/connections/ForumService,sbt/connections/ProfileAdminService,sbt/connections/ProfileConstants,sbt/connections/ProfileService,sbt/connections/SearchConstants,sbt/connections/SearchService,sbt/connections/Tag,sbt/connections/WikiConstants,sbt/connections/WikiService,sbt/data/AtomReadStore,sbt/nls/Endpoint,sbt/nls/ErrorTransport,sbt/nls/loginForm,sbt/nls/messageSSO,sbt/nls/util,sbt/nls/validate,sbt/smartcloud/CommunityConstants,sbt/smartcloud/ProfileConstants,sbt/smartcloud/ProfileService,sbt/smartcloud/SmartcloudConstants,sbt/smartcloud/Subscriber,sbt/store/AtomStore,sbt/store/parameter,sbt/authenticator/nls/SSO,sbt/authenticator/templates/ConnectionsLogin.html,sbt/authenticator/templates/ConnectionsLoginDialog.html,sbt/authenticator/templates/Message.html,sbt/authenticator/templates/MessageDialogSSO.html,sbt/authenticator/templates/MessageSSO.html,sbt/authenticator/templates/login.html,sbt/authenticator/templates/login,sbt/authenticator/templates/loginDialog.html,sbt/authenticator/templates/messageSSO,sbt/connections/nls/CommunityService,sbt/connections/nls/ConnectionsService,sbt/connections/nls/ProfileService".split(","),
function(){})},"sbt/Proxy":function(){define(["./declare","./lang","./pathUtil"],function(i,h,c){return i(null,{proxyUrl:null,constructor:function(c){h.mixin(this,c)},rewriteUrl:function(d,b,a){d=b;return this.proxyUrl?(0==d.indexOf("http://")?d="/http/"+d.substring(7):0==d.indexOf("https://")&&(d="/https/"+d.substring(8)),a&&(d=c.concat(a,d)),c.concat(this.proxyUrl,d)):d}})})},"sbt/validate":function(){define(["./log","./stringUtil","sbt/i18n!sbt/nls/validate","./util"],function(i,h,c,d){return{_validateInputTypeAndNotify:function(b,
a,g,j,i,o){return!j||"object"==typeof j&&j.declaredClass&&j.declaredClass!=i||"object"==typeof j&&!j.declaredClass&&typeof j!=i||"object"!=typeof j&&typeof j!=i?(b=j?h.substitute(c.validate_expectedType,[b,a,"object"==typeof j&&j.declaredClass?j.declaredClass:typeof j,i,g]):h.substitute(c.validate_nullObject,[b,a,g,i]),d.notifyError({code:400,message:b},o),!1):!0},_validateInputTypesAndNotify:function(b,a,c,d,h,i){for(var p in d)if(!this._validateInputTypeAndNotify(b,a,c[p],d[p],h[p],i))return!1;
return!0}}})},"sbt/data/AtomReadStore":function(){define("../declare,../config,../lang,../base/core,../xml,../xpath,../entities".split(","),function(i,h,c,d,b,a,g){return i(null,{_endpoint:null,_xmlData:null,totalResults:0,startIndex:0,itemsPerPage:5,items:null,url:"",sendQuery:!0,unescapeHTML:!1,urlPreventCache:!1,atom:d.feedXPath,attributes:d.entryXPath,namespaces:d.namespaces,paramSchema:{},constructor:function(a){this._endpoint=h.findEndpoint(a.endpoint||"connections");if(a&&(this.url=a.url,this.attributes=
a.attributes||this.attributes,this.atom=a.feedXPath||this.atom,this.namespaces=a.namespaces||this.namespaces,this.paramSchema=a.paramSchema||this.paramSchema,this.rewriteUrl=a.rewriteUrl,this.label=a.label||this.label,this.sendQuery=a.sendQuery||a.sendquery||this.sendQuery,this.unescapeHTML=a.unescapeHTML,"urlPreventCache"in a))this.urlPreventCache=a.urlPreventCache?!0:!1;if(!this.url)throw Error("sbt.data.AtomReadStore: A service URL must be specified when creating the data store");},getEndpoint:function(){return this._endpoint},
setUrl:function(a){this.url=a},getUrl:function(){return this.url},setAttributes:function(a){this.attributes=a},getValue:function(b,d,h){var i=/^count\(.*\)$/;this._assertIsItem(b);this._assertIsAttribute(d);if(!b._attribs[d]){var m=this.attributes[d];if(c.isFunction(m))b._attribs[d]=m(b,d);else if(m.match(i))b._attribs[d]=a.selectNumber(b.element,this.attributes[d],this.namespaces)+"";else if((i=a.selectNodes(b.element,this.attributes[d],this.namespaces))&&1==i.length)b._attribs[d]=i[0].text||i[0].textContent;
else if(i){b._attribs[d]=[];for(m=0;m<i.length;m++)b._attribs[d].push(i[m].text||i[m].textContent)}else b._attribs[d]=null}if(!b._attribs[d])return h;if("object"==typeof b._attribs[d])for(h=0;h<b._attribs[d].length;h++)b._attribs[d][h]=g.encode(b._attribs[d][h]);else b._attribs[d]=g.encode(b._attribs[d]);return b._attribs[d]},getValues:function(b,c){this._assertIsItem(b);this._assertIsAttribute(c);if(!b._attribs[c]){for(var d=a.selectNodes(b.element,this.attributes[c],this.namespaces),g=[],h=0;h<
d.length;h++)g[h]=d[h].text||d[h].textContent;b._attribs[c]=g}return b._attribs[c]},getAttributes:function(){var a=[],b;for(b in this.attributes)this.attributes.hasOwnProperty(b)&&a.push(b);return a},hasAttribute:function(a,b){return void 0!=this.attributes[b]},containsValue:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},isItem:function(a){return a&&a.element&&a.store&&a.store===this?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");
},fetch:function(c){var d=this,g=c.scope||d,h=this._getServiceUrl(this._getQuery(c));h?this._endpoint.xhrGet({serviceUrl:h,handleAs:"text",preventCache:!0,load:function(h){try{d.response=h;d._xmlData=b.parse(h);d.totalResults=parseInt(a.selectText(d._xmlData,d.atom.totalResults,d.namespaces));d.startIndex=parseInt(a.selectText(d._xmlData,d.atom.startIndex,d.namespaces));d.itemsPerPage=parseInt(a.selectText(d._xmlData,d.atom.itemsPerPage,d.namespaces));d.items=d._createItems(d._xmlData);c.onBegin&&
c.onBegin.call(g,d.totalResults,c);if(c.onItem)for(h=0;h<d._entries;h++)c.onItem.call(g,d.entries[h],c);c.onComplete&&c.onComplete.call(g,c.onItem?null:d.items,c)}catch(i){c.onError&&c.onError.call(i)}},error:function(a){c.onError&&c.onError.call(a)}}):c.onError&&c.onError.call(Error("sbt.data.AtomReadStore: No service URL specified."))},getFeatures:function(){return{"dojo.data.api.Read":!0}},close:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},getLabel:function(a){return this.getValue(a,
this.label)},getLabelAttributes:function(){return[this.label]},_getQuery:function(a){var b=a.query||{};b.pageSize=a.count||b.pageSize;b.pageNumber=Math.floor(a.start/a.count)+1;if(a.sort&&a.sort[0])if(a=a.sort[0],b.sortBy=a.attribute,!0===a.descending)b.sortOrder="desc";else if(!1===a.descending)b.sortOrder="asc";return b},_getServiceUrl:function(a){if(!this.sendQuery||!a)return this.url;if(c.isString(a))return this.url+a;var b="",d=this.paramSchema,g;for(g in a)if(g in d){var h=d[g].format(a[g]);
h&&(b+=h+"&")}else b+=g+"="+a[g]+"&";if(!b)return this.url;a=this.url;a=0>a.indexOf("?")?a+"?":a+"&";return a+b},_createItems:function(b){for(var b=a.selectNodes(b,this.atom.entries,this.namespaces),c=[],d=0;d<b.length;d++)c.push(this._createItem(b[d]));return c},_createItem:function(b){for(var d=this.getAttributes(),h=/^count\(.*\)$/,i={element:b,getValue:function(a){var b=[];if("object"==typeof this[a])for(var c=0;c<this[a].length;c++)b[c]=g.encode(this[a][c]);else b=g.encode(this[a]);return b}},
m=0;m<d.length;m++){var n=d[m],e=this.attributes[n];if(c.isFunction(e))i[n]=e(this,i);else if(e.match(h))i[n]=a.selectNumber(b,e,this.namespaces)+"";else if((e=a.selectNodes(b,e,this.namespaces))&&1==e.length)i[n]=g.encode(e[0].text)||g.encode(e[0].textContent);else if(e){i[n]=[];for(var r=0;r<e.length;r++)i[n].push(g.encode(e[r].text)||g.encode(e[r].textContent))}else i[n]=null}return i},_assertIsItem:function(a){if(!this.isItem(a))throw Error("sbt.data.AtomReadStore: Invalid item argument.");},
_assertIsAttribute:function(a){if(!this.attributes[a])throw Error("sbt.data.AtomReadStore: Invalid attribute argument.");}})})},"sbt/Promise":function(){define(["./declare","./log"],function(i){var h=i(null,{_isRejected:!1,_isFulfilled:!1,_isCanceled:!1,_deferreds:null,response:null,error:null,constructor:function(c){c?c instanceof Error?this.rejected(c):this.fulfilled(c):this._deferreds=[]},then:function(c,d){var b=new h;this._isFulfilled?this._fulfilled(c,d,b,this.data):this._isRejected?this._rejected(d,
b,this.error):this._deferreds.push([c,d,b]);return b},cancel:function(){this._isCanceled=!0},isResolved:function(){return this._isRejected||this._isFulfilled},isRejected:function(){return this._isRejected},isFulfilled:function(){return this._isFulfilled},isCanceled:function(){return this._isCanceled},fulfilled:function(c){if(!this._isCanceled&&(this._isFulfilled=!0,this.data=c,this._deferreds))for(;0<this._deferreds.length;){var d=this._deferreds.shift();this._fulfilled(d[0],d[1],d[2],c)}},rejected:function(c){if(!this._canceled&&
(this._isRejected=!0,this.error=c,this._deferreds))for(;0<this._deferreds.length;){var d=this._deferreds.shift();this._rejected(d[1],d[2],c)}},_fulfilled:function(c,d,b,a){if(c)try{var g=c(a);g instanceof h?g.then(function(a){b.fulfilled(a)},function(a){b.rejected(a)}):b.fulfilled(g)}catch(i){b.rejected(i)}else b.fulfilled(a)},_rejected:function(c,d,b){if(c)try{var a=c(b);a||d.rejected(a)}catch(g){d.rejected(g)}else d.rejected(b)}});return h})},"sbt/_bridge/json":function(){define(["dojo/json"],function(i){return i})},
"sbt/connections/SearchConstants":function(){define(["../lang","./ConnectionsConstants"],function(i,h){return i.mixin(h,{SearchNamespaces:{a:"http://www.w3.org/2005/Atom",ibmsc:"http://www.ibm.com/search/content/2010",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",snx:"http://www.ibm.com/xmlns/prod/sn",spelling:"http://a9.com/-/opensearch/extensions/spelling/1.0/"},SearchFeedXPath:h.ConnectionsFeedXPath,SingleFacetXPath:{entries:"/a:feed/ibmsc:facets/ibmsc:facet[@id='{facet.id}']/ibmsc:facetValue"},
FacetValueXPath:{entry:"/ibmsc:facetValue",uid:"@id",id:"@id",label:"@label",weight:"@weight"},ScopeXPath:i.mixin({},h.AtomEntryXPath,{link:"link"}),SearchXPath:i.mixin({},h.AtomEntryXPath,{rank:"snx:rank",relevance:"relevance:score",type:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",application:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/component']/@term",applicationCount:"count(a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/component']/@term)",primaryComponent:"a:category[ibmsc:field[@id='primaryComponent']]/@term",
tags:"a:category[not(@scheme)]/@term",commentCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",resultLink:"a:link[not(@rel)]/@href",bookmarkLink:"ibmsc:field[@id='dogearURL']",eventStartDate:"ibmsc:field[@id='eventStartDate']",authorJobTitle:"a:content/xhtml:div/xhtml:span/xhtml:div[@class='title']",authorJobLocation:"a:content/xhtml:div/xhtml:span/xhtml:div[@class='location']",authorCount:"count(a:contributor)",contributorCount:"count(a:author)",tagCount:"count(a:category[not(@scheme)])",
highlightField:"ibmsc:field[@id='highlight']",fileExtension:"ibmsc:field[@id='fileExtension']",memberCount:"snx:membercount",communityUuid:"snx:communityUuid",containerType:"ibmsc:field[@id='container_type']",communityParentLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container' and @type='text/html']/@href",parentageMetaID:"ibmsc:field[contains(@id, 'ID')]/@id",parentageMetaURL:"ibmsc:field[contains(@id, 'URL')]",parentageMetaURLID:"ibmsc:field[contains(@id, 'URL')]/@id",objectRefDisplayName:"ibmsc:field[@id='FIELD_OBJECT_REF_DISPLAY_NAME']",
objectRefUrl:"ibmsc:field[@id='FIELD_OBJECT_REF_URL']",accessControl:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/accesscontrolled']/@term",commentsSummary:"ibmsc:field[@id='commentsSummary']"}),AtomScopes:"/${search}/atom/scopes",AtomSearch:"/${search}/atom/search",AtomMySearch:"/${search}/atom/mysearch",publicSearch:"/${search}/atom/search/results",mySearch:"/${search}/atom/mysearch/results",peopleSearch:"/${search}/atom/search/facets/people",myPeopleSearch:"/${search}/atom/mysearch/facets/people",
tagsSearch:"/${search}/atom/search/facets/tags",myTagsSearch:"/${search}/atom/mysearch/facets/tags",dateSearch:"/${search}/atom/search/facets/date",myDateSearch:"/${search}/atom/mysearch/facets/date",sourceSearch:"/${search}/atom/search/facets/source",mySourceSearch:"/${search}/atom/mysearch/facets/source"})})},"sbt/ready":function(){define(["./_bridge/ready"],function(i){return i})},"sbt/smartcloud/CommunityConstants":function(){define(["../lang","../smartcloud/SmartcloudConstants"],function(i,h){return i.mixin({CommunityNamespaces:{a:"http://www.w3.org/2005/Atom",
app:"http://www.w3.org/2007/app",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/"},CommunityFeedXPath:h.SmartcloudFeedXPath,CommunityXPath:i.mixin({},h.AtomEntryXPath,{communityUuid:"a:id",communityTheme:"snx:communityTheme",logoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/logo']/@href",tags:"a:category[not(@scheme)]/@term",memberCount:"snx:membercount",communityType:"snx:communityType",isExternal:"snx:isExternal"}),MemberXPath:i.mixin({},h.AtomEntryXPath,
{id:"a:contributor/snx:userid",uid:"a:contributor/snx:userid",role:"snx:role"}),AtomCommunityMembers:"${communities}/service/atom/community/members"},h)})},"sbt/_bridge/i18n":function(){define(["dojo/i18n"],function(i){return i})},"sbt/nls/util":function(){define({root:{error_callback:"Error running error callback : {0}",error_console:"Error received. Error Code = {0}. Error Message = {1}"}})},"sbt/declare":function(){define(["./_bridge/declare"],function(i){return i})},"sbt/connections/ActivityStreamService":function(){define("../declare,../lang,../stringUtil,../config,../Promise,./ActivityStreamConstants,./ConnectionsService,../base/BaseEntity,../base/DataHandler,sbt/json".split(","),
function(i,h,c,d,b,a,g,j,k,o){var p=i(k,{constructor:function(a){h.mixin(this,a);this.data=a.data},getSummary:function(){if(!this._summary&&this.data.totalResults)this._summary={totalResults:this.data.totalResults,startIndex:this.data.startIndex,itemsPerPage:this.data.itemsPerPage};return this._summary},getEntitiesDataArray:function(){return this.data.list}}),m=i(j,{data:null,getPublishedDate:function(){return this.dataHandler.data.published},getPlainTitle:function(){return this.dataHandler.data.connections.plainTitle},
getActorDisplayName:function(){return this.dataHandler.data.actor.displayName},getActor:function(){return this.dataHandler.data.actor},getVerb:function(){return this.dataHandler.data.verb},getId:function(){return this.dataHandler.data.id}}),n={createEntities:function(a,b){return new p({data:b})},createEntity:function(a,b){var c=new p({data:b});return new m({service:a,dataHandler:c})}};return i(g,{contextRootMap:{connections:"connections"},serviceName:"connections",constructor:function(){if(!this.endpoint)this.endpoint=
d.findEndpoint(this.getDefaultEndpointName())},getActivityStreamCallbacks:function(){return n},getStream:function(b,c,d,g){return this.getEntities(this.constructUrl(a.ActivityStreamUrls.activityStreamBaseUrl+"{authType}"+a.ActivityStreamUrls.activityStreamRestUrl+"{userType}/{groupType}/{appType}",{},{authType:"sso"==this.endpoint.authType?"":this.endpoint.authType,userType:b||a.ASUser.PUBLIC,groupType:c||a.ASGroup.ALL,appType:d||a.ASApplication.STATUS}),{method:"GET",handleAs:"json",query:g||{}},
this.getActivityStreamCallbacks())},getAllUpdates:function(b){return this.getStream(a.ASUser.PUBLIC,a.ASGroup.ALL,a.ASApplication.ALL,b)},getMyStatusUpdates:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ALL,a.ASApplication.STATUS,b)},getStatusUpdatesFromMyNetwork:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.FRIENDS,a.ASApplication.STATUS,b)},getUpdatesFromMyNetwork:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.FRIENDS,a.ASApplication.ALL,b)},getUpdatesFromPeopleIFollow:function(b){return this.getStream(a.ASUser.ME,
a.ASGroup.FOLLOWING,a.ASApplication.STATUS,b)},getUpdatesFromCommunitiesIFollow:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ALL,a.ASApplication.COMMUNITIES,b)},getUpdatesFromCommunity:function(b,c){var d=this._validateCommunityUuid(b);return d?d:this.getStream(a.ASUser.COMMUNITY+b,a.ASGroup.ALL,a.ASApplication.ALL,c)},getUpdatesFromUser:function(b,c){var d=this._validateUserId(b);return d?d:this.getStream(b,a.ASGroup.INVOLVED,a.ASApplication.ALL,c)},getNotificationsForMe:function(b){return this.getStream(a.ASUser.ME,
a.ASGroup.RESPONSES,a.ASApplication.ALL,b)},getNotificationsFromMe:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.NOTESFROMME,a.ASApplication.ALL,b)},getResponsesToMyContent:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.RESPONSES,a.ASApplication.ALL,b)},getMyActionableItems:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ACTIONS,a.ASApplication.ALL,b)},getMyActionableItemsForApplication:function(b,c){var d=this._validateApplicationName(b);return d?d:this.getStream(a.ASUser.ME,
a.ASGroup.ACTIONS,b,c)},getMySavedItems:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.SAVED,a.ASApplication.ALL,b)},getMySavedItemsForApplication:function(b,c){var d=this._validateApplicationName(b);return d?d:this.getStream(a.ASUser.ME,a.ASGroup.SAVED,b,c)},searchByQuery:function(a){var b=this._validateSearchQuery(a);return b?b:this.getStream(null,null,null,{query:a})},searchByFilters:function(a,b){var c=this._validateSearchQuery(a);if(c||(c=this._validateSearchFilters(b)))return c;c={};
c.query=a;c.filters=b;return this.getStream(null,null,null,c)},searchByTags:function(a){var b=this._validateSearchTags(a);if(b)return b;b={};b.filters="[{'type':'tag','values':['"+a+"']}]";return this.getStream(null,null,null,b)},searchByPattern:function(a){var b=this._validateSearchTags(a);if(b)return b;b={};b.custom=a;return this.getStream(null,null,null,b)},postEntry:function(b,c,d,g,h){c=a.ActivityStreamUrls.activityStreamBaseUrl+this.endpoint.authType+a.ActivityStreamUrls.activityStreamRestUrl+
(c||a.ASUser.ME)+"/"+(d||a.ASGroup.ALL)+"/"+(g||a.ASApplication.ALL);b={method:"POST",query:h||{},handleAs:"json",headers:{"Content-Type":"application/json"},data:o.stringify(b)};return this.updateEntity(c,b,{createEntity:function(a,b){return b}},h)},postMicroblogEntry:function(b,c,d,g,h){if("string"==typeof b)b={content:b};else if("object"!=typeof b)return this.createBadRequestPromise("Invalid argument with postMicroblogEntry, expected String or Object");c=a.ActivityStreamUrls.activityStreamBaseUrl+
this.endpoint.authType+a.ActivityStreamUrls.activityStreamUBlogRestUrl+(c||a.ASUser.ME)+"/"+(d||a.ASGroup.ALL)+"/"+(g||"");b={method:"POST",query:h||{},handleAs:"json",headers:{"Content-Type":"application/json"},data:o.stringify(b)};return this.updateEntity(c,b,{createEntity:function(a,b){return b}},h)},_validateCommunityUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateSearchQuery:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},
_validateApplicationName:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected application name.")},_validateSearchTags:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateSearchFilters:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateUserId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userId.")}})})},
"sbt/base/DataHandler":function(){define(["../declare","../lang"],function(i,h){return i(null,{dataType:null,data:null,constructor:function(c){h.mixin(this,c)},setData:function(c){this.data=c},getData:function(){return this.data},getAsString:function(){return null},getAsNumber:function(){return null},getAsDate:function(){return null},getAsBoolean:function(){return null},getAsArray:function(){return null},getEntityId:function(){return null},getEntityData:function(){return data},getSummary:function(){return null},
getEntitiesDataArray:function(){return[]},toJson:function(){}})})},"sbt/authenticator/templates/messageSSO":function(){},"sbt/dom":function(){define(["./_bridge/dom"],function(i){return i})},"sbt/store/parameter":function(){define(["../stringUtil","../config"],function(){var i={defaultFormat:function(c,d){return c.key+"="+d},sortField:function(c){return function(d,b){return d.key+"="+(c[b]||"")}},ascSortOrderBoolean:function(c,d){return c.key+"="+("asc"===d?!0:!1)},sortOrder:function(c,d){return c.key+
"="+d},oneBasedInteger:function(c,d){var b=Math.floor(d);1>b&&(b=1);return c.key+"="+b},zeroBaseInteger:function(c,d){var b=Math.floor(d);0>b&&(b=0);return c.key+"="+b}},h=function(c){var d=this;this.key=c.key;var b=c.format||i.defaultFormat;this.format=function(a){return b(d,a)}};return{defaultFormat:function(c){return new h({key:c,format:i.defaultFormat})},sortField:function(c,d){return new h({key:c,format:i.sortField(d)})},sortOrder:function(c){return new h({key:c,format:i.sortOrder})},booleanSortOrder:function(c){return new h({key:c,
format:i.ascSortOrderBoolean})},zeroBasedInteger:function(c){return new h({key:c,format:i.zeroBasedInteger})},oneBasedInteger:function(c){return new h({key:c,format:i.oneBasedInteger})}}})},"sbt/connections/ConnectionsService":function(){define("../declare,../config,../Promise,./ConnectionsConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler,../xpath".split(","),function(i,h,c,d,b,a,g,j){var k=i(g,{getSummary:function(){for(var a=this._selectArray("language"),b=this._selectArray("languageLabels"),
c=[],d=0;d<a.length;d++)c.push({label:b[d],term:a[d]});if(!this._summary)this._summary={isEmailExposed:"email-exposed"==j.selectText(this.data,this._getXPath("emailConfig"),this.namespaces)?"true":"false",displayLanguages:c};return this._summary}}),o=i(a,{xpath:d.ServiceConfigXPath,namespaces:d.Namespaces,categoryScheme:'<category term="service-config" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',constructor:function(){},getAlternateSSLUrl:function(){return this.getAsString("alternateSSLUrl")}});
i(a,{xpath:d.MemberXPath,namespaces:d.Namespaces,categoryScheme:'<category term="person" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',constructor:function(){},getRole:function(){return this.getAsString("role")}});i(a,{xpath:d.ReportEntryXPath,namespaces:d.Namespaces,constructor:function(){},getCategoryIssue:function(){return this.getAsString("categoryIssue")},getReportedItemLink:function(){return this.getAsString("reportItemLink")},getRelatedLink:function(){return this.getAsString("relatedLink")},
getReferredEntryId:function(){return this.getAsString("inRefTo")}});i(a,{xpath:d.ModerationActionEntryXPath,namespaces:d.Namespaces,constructor:function(){},getModerationAction:function(){return this.getAsString("moderationAction")},getRelatedLink:function(){return this.getAsString("relatedLink")},getReferredEntryId:function(){return this.getAsString("inRefTo")}});var p={createEntities:function(a,b){return new k({service:a,data:b,namespaces:d.Namespaces,xpath:d.ConnectionsServiceDocsFeedXPath})},
createEntity:function(a,b,c){return new o({service:a,data:b,response:c})}};return i(b,{constructor:function(){if(!this.endpoint)this.endpoint=h.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getServiceConfigEntries:function(a){a={method:"GET",handleAs:"text",query:a||{}};url=this.constructUrl(d.ServiceConfigs,null,{service:this.serviceName});return this.getEntities(url,a,p)}})})},"sbt/url":function(){define(["./declare"],function(i){var h=/^(?:([A-z]+)(:))?(\/\/)(?:([^?#]*)(:)([^?#]*)(@))?([\w.\-]+)(?:(:)(\d{0,5}))?([\w.\/\-]+)?(?:(\?)([^?#]*))?(?:(#)(.*))?$/;
return i(null,{_resultStore:[],_ensureDelimiter:function(c,d,b){!c&&this._resultStore[d]?this._resultStore[d]=void 0:c&&!this._resultStore[d]&&(this._resultStore[d]=b)},constructor:function(c){this.setUrl(c)},getUrl:function(){return this._resultStore.slice(1).join("")},setUrl:function(c){this._resultStore=h.exec(c)},getScheme:function(){return this._resultStore[1]},setScheme:function(c,d){this._ensureDelimiter(c,2,":");!d||c?this._ensureDelimiter(c,3,"//"):this._resultStore[3]="//";this._resultStore[1]=
c},getUser:function(){return this._resultStore[4]},setUser:function(c){this._ensureDelimiter(c,7,"@");this._resultStore[4]=c},getPassword:function(){return this._resultStore[6]},setPassword:function(c){this._ensureDelimiter(c,5,":");this._resultStore[6]=c},getHostName:function(){return this._resultStore[8]},setHostName:function(c){this._resultStore[8]=c},getPort:function(){return this._resultStore[10]},setPort:function(c){this._ensureDelimiter(c,9,":");this._resultStore[10]=c},getPath:function(){return this._resultStore[11]},
setPath:function(c){this._resultStore[11]=c},getQuery:function(){return this._resultStore[13]},setQuery:function(c){this._ensureDelimiter(c,12,"?");this._resultStore[13]=c},getFragment:function(){return this._resultStore[15]},setFragment:function(c){this._ensureDelimiter(c,14,"#");this._resultStore[15]=c},getBaseUrl:function(){return this._resultStore.slice(1,13).join("")}})})},"sbt/ErrorTransport":function(){define("./declare,./lang,./Promise,./stringUtil,./log,sbt/i18n!sbt/nls/ErrorTransport".split(","),
function(i,h,c,d,b,a){return i(null,{_called:!1,_endpointName:null,_message:null,constructor:function(b,c){this._endpointName=b;this._message=c?c:d.substitute(a.endpoint_not_available,[b])},request:function(){if(!this._called)alert(this._message),this._called=!0;var a=new c,b=Error(this._message);b.status=400;a.rejected(b);return a},xhr:function(a,c){if(!this._called)b.error(this._message),this._called=!0;var d=c.handle,i=c.error;if(h.isFunction(i)||h.isFunction(d)){var p=Error(this._message);p.status=
400;h.isFunction(i)&&i(p);h.isFunction(d)&&d(p)}}})})},"sbt/_bridge/ready":function(){define(["dojo/ready"],function(i){return function(h){i(h)}})},"sbt/base/core":function(){define(["../config"],function(){return{namespaces:{o:"http://ns.opensocial.org/2008/opensocial",app:"http://www.w3.org/2007/app",thr:"http://purl.org/syndication/thread/1.0",fh:"http://purl.org/syndication/history/1.0",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/",a:"http://www.w3.org/2005/Atom",
h:"http://www.w3.org/1999/xhtml",td:"urn:ibm.com/td",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",ibmsc:"http://www.ibm.com/search/content/2010",xhtml:"http://www.w3.org/1999/xhtml"},feedXPath:{entry:"/a:feed/a:entry",entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},entryXPath:{title:"a:title",summaryText:"a:summary[@type='text']",selfUrl:"a:link[@rel='self']/@href",
terms:"a:category/@term",contentHtml:"a:content[@type='html']",published:"a:published",updated:"a:updated",authorId:"a:author/snx:userid",contributorId:"a:contributor/snx:userid"}}})},"sbt/connections/ActivityStreamConstants":function(){define(["../lang","./ConnectionsConstants"],function(i,h){return i.mixin({},h,{ASUser:{ME:"@me",PUBLIC:"@public",COMMUNITY:"urn:lsid:lconn.ibm.com:communities.community:",UBLOG:"ublog"},ASGroup:{ALL:"@all",FOLLOWING:"@following",FRIENDS:"@friends",SELF:"@self",INVOLVED:"@involved",
NOTESFORME:"@notesforme",NOTESFROMME:"@notesfromme",RESPONSES:"@responses",ACTIONS:"@actions",SAVED:"@saved"},ASApplication:{ALL:"@all",COMMUNITIES:"@communities",TAGS:"@tags",PEOPLE:"@people",STATUS:"@status",NOTESFORME:"@notesforme",NOTESFROMME:"@notesfromme",RESPONSES:"@responses",COMMENTS:"comments"},Verb:{ACCEPT:"accept",ACCESS:"access",ACKNOWLEDGE:"acknowledge",ADD:"add",AGREE:"agree",APPEND:"append",APPROVE:"approve",ARCHIVE:"archive",ASSIGN:"assign",AT:"at",ATTACH:"attach",ATTEND:"attend",
AUTHOR:"author",AUTHORIZE:"authorize",BORROW:"borrow",BUILD:"build",CANCEL:"cancel",CLOSE:"close",COMMENT:"comment",COMPLETE:"complete",CONFIRM:"confirm",CONSUME:"consume",CHECKIN:"checkin",CREATE:"create",DELETE:"delete",DELIVER:"deliver",DENY:"deny",DISAGREE:"disagree",DISLIKE:"dislike",EXPERIENCE:"experience",FAVORITE:"favorite",FIND:"find",FLAG_AS_INAPPROPRIATE:"flag-as-inappropriate",FOLLOW:"follow",GIVE:"give",HOST:"host",IGNORE:"ignore",INSERT:"insert",INSTALL:"install",INTERACT:"interact",
INVITE:"invite",JOIN:"join",LEAVE:"leave",LIKE:"like",LISTEN:"listen",LOSE:"lose",MAKE_FRIEND:"make-friend",OPEN:"open",POST:"post",PLAY:"play",PRESENT:"present",PURCHASE:"purchase",QUALIFY:"qualify",READ:"read",RECEIVE:"receive",REJECT:"reject",REMOVE:"remove",REMOVE_FRIEND:"remove-friend",REPLACE:"replace",REQUEST:"request",REQUEST_FRIEND:"request-friend",RESOLVE:"resolve",RETURN:"return",RETRACT:"retract",RSVP_MAYBE:"rsvp-maybe",RSVP_NO:"rsvp-no",RSVP_YES:"rsvp-yes",SATISFY:"satisfy",SAVE:"save",
SCHEDULE:"schedule",SEARCH:"search",SELL:"sell",SEND:"send",SHARE:"share",SPONSOR:"sponsor",START:"start",STOP_FOLLOWING:"stop-following",SUBMIT:"submit",TAG:"tag",TERMINATE:"terminate",TIE:"tie",UNFAVORITE:"unfavorite",UNLIKE:"unlike",UNSAVE:"unsave",UNSATISFY:"unsatisfy",UNSHARE:"unshare",UPDATE:"update",USE:"use",WATCH:"watch",WIN:"win"},ActivityStreamUrls:{activityStreamBaseUrl:"/${connections}/opensocial/",activityStreamRestUrl:"/rest/activitystreams/",activityStreamUBlogRestUrl:"/rest/ublog/"},
errorMessages:{args_object:"argument passed to get stream should be an Object",required_communityid:"Community ID is required"}})})},"sbt/_bridge/lang":function(){define(["dojo/_base/lang","dojo/has","dojo/_base/sniff"],function(i,h){return{mixin:function(c,d){return i.mixin.apply(this,arguments)},isArray:function(c){return i.isArray(c)},isString:function(c){return i.isString(c)},isFunction:function(c){return"function"==typeof c},isObject:function(c){return"object"==typeof c},clone:function(c){return i.clone(c)},
concatPath:function(){var c=arguments;1==c.length&&this.isArray(c[0])&&(c=c[0]);for(var d="",b=0;b<c.length;b++){var a=c[b].toString();d&&(d+="/");d+="/"==a.charAt(0)?a.substring(1):a}return d},trim:function(c){return i.trim(c)},getObject:function(c,d,b){return i.getObject(c,d,b)},hitch:function(c,d){return i.hitch(c,d)},isIE:function(){return h("ie")}}})},"sbt/connections/nls/ProfileService":function(){define({root:{invalid_argument:"Invalid Argument"}})},"sbt/connections/ForumService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./ForumConstants,./ConnectionsService,../base/AtomEntity,../base/XmlDataHandler".split(","),
function(i,h,c,d,b,a,g,j,k){var o=i(j,{xpath:a.ForumXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-forum"></category>',constructor:function(){},createEntryData:function(){if(!this.getCommunityUuid())return"";var a=d.transform('<snx:communityUuid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${getCommunityUuid}</snx:communityUuid>',this,function(a){return a},this);return d.trim(a)},getForumUuid:function(){var a=this.getAsString("forumUuid");
return e(a)},setForumUuid:function(a){return this.setAsString("forumUuid",a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getModeration:function(){return this.getAsDate("moderation")},getThreadCount:function(){return this.getAsNumber("threadCount")},getForumUrl:function(){return this.getAlternateUrl()},getTopics:function(a){return this.service.getTopics(this.getForumUuid(),a)},getTags:function(){return this.getAsArray("tags")},
setTags:function(a){return this.setAsArray("tags",a)},load:function(b){var e=this.getForumUuid(),d=this.service._validateForumUuid(e);if(d)return d;var g=this,b={handleAs:"text",query:c.mixin({forumUuid:e},b||{})};return this.service.getEntity(a.AtomForum,b,e,{createEntity:function(a,b){g.setData(b);return g}})},remove:function(a){return this.service.deleteForum(this.getForumUuid(),a)},update:function(a){return this.service.updateForum(this,a)},save:function(a){return this.getForumUuid()?this.service.updateForum(this,
a):this.service.createForum(this,a)}}),p=i(j,{xpath:a.ForumTopicXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-topic"></category>',constructor:function(){},createEntryData:function(){var b="";this.isPinned()&&(b+=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',this,function(){return a.FlagPinned},this));this.isLocked()&&(b+=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',
this,function(){return a.FlagLocked},this));this.isQuestion()&&(b+=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',this,function(){return a.FlagQuestion},this));return d.trim(b)},getTopicUuid:function(){var a=this.getAsString("topicUuid");return e(a)},setTopicUuid:function(a){return this.setAsString("topicUuid",a)},getTopicTitle:function(){return this.getAsString("topicTitle")},setTopicTitle:function(a){return this.setAsString("topicTitle",a)},getForumUuid:function(){var a=
this.getAsString("forumUuid");return e(a)},setForumUuid:function(a){return this.setAsString("forumUuid",a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getTopicUrl:function(){return this.getAsString("alternateUrl")},getPermisisons:function(){return this.getAsString("permissions")},isPinned:function(){var b=this.getAsArray("categoryTerm"),e=a.FlagPinned;if(c.isArray(b))for(var d=0;d<b.length;d++){if(-1!=
b[d].indexOf(e))return!0}else if(c.isString(b)){if(-1!=b.indexOf(e))return!0}else return!1},setPinned:function(b){var c=this.getAsArray("categoryTerm");if(b)c?c.push(a.setPinned):this.setAsArray("categoryTerm",a.setPinned);else if(c){for(var b=a.FlagPinned,e=0;e<c.length;e++)-1!=c[e].indexOf(b)&&c.splice(e,1);this.setAsArray("categoryTerm",c)}},isLocked:function(){var b=this.getAsArray("categoryTerm"),e=a.FlagLocked;if(c.isArray(b))for(var d=0;d<b.length;d++){if(-1!=b[d].indexOf(e))return!0}else if(c.isString(b)){if(-1!=
b.indexOf(e))return!0}else return!1},setLocked:function(b){var c=this.getAsArray("categoryTerm");if(b)c?c.push(a.setLocked):this.setAsArray("categoryTerm",a.setLocked);else if(c){for(var b=a.FlagLocked,e=0;e<c.length;e++)-1!=c[e].indexOf(b)&&c.splice(e,1);this.setAsArray("categoryTerm",c)}},isQuestion:function(){var b=this.getAsArray("categoryTerm"),e=a.FlagQuestion;if(c.isArray(b))for(var d=0;d<b.length;d++){if(-1!=b[d].indexOf(e))return!0}else if(c.isString(b)){if(-1!=b.indexOf(e))return!0}else return!1},
setQuestion:function(b){var c=this.getAsArray("categoryTerm");if(b)c?c.push(a.markAsQuestion):this.setAsArray("categoryTerm",a.markAsQuestion);else if(b=a.FlagQuestion,c){for(var e=0;e<c.length;e++)-1!=c[e].indexOf(b)&&c.splice(e,1);this.setAsArray("categoryTerm",c)}},isAnswered:function(){return this.getAsBoolean("answered")},isNotRecommendedByCurrentUser:function(){return this.getAsBoolean("notRecommendedByCurrentUser")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",
a)},getRecommendationsUrl:function(){return this.getAsString("recommendationsUrl")},getRecommendations:function(a){return this.service.getForumRecommendations(this.getTopicUuid(),a)},getReplies:function(a){return this.service.getForumTopicReplies(this.getTopicUuid(),a)},createRecommendation:function(a){return this.service.createForumRecommendation(this.getTopicUuid(),a)},deleteRecommendation:function(a){return this.service.deleteForumRecommendation(this.getTopicUuid(),a)},load:function(b){var e=this.getTopicUuid(),
d=this.service._validateTopicUuid(e);if(d)return d;var g=this,b={handleAs:"text",query:c.mixin({topicUuid:e},b||{})};return this.service.getEntity(a.AtomTopic,b,e,{createEntity:function(a,b){g.setData(b);return g}})},remove:function(a){return this.service.deleteForumTopic(this.getTopicUuid(),a)},update:function(a){return this.service.updateForumTopic(this,a)},save:function(a){return this.getTopicUuid()?this.service.updateForumTopic(this,a):this.service.createForumTopic(this,a)}}),m=i(j,{xpath:a.ForumReplyXPath,
contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-reply"></category>',constructor:function(){},createEntryData:function(){if(!this.getTopicUuid())return"";var b="";this.isAnswer()&&(b+=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',this,function(){return a.FlagAnswer},this));b+=d.transform('<thr:in-reply-to xmlns:thr="http://purl.org/syndication/thread/1.0" ref="urn:lsid:ibm.com:forum:${getTopicUuid}" type="application/atom+xml" href=""></thr:in-reply-to>',
this,function(a){return a},this);return d.trim(b)},getReplyUuid:function(){var a=this.getAsString("replyUuid");return e(a)},setReplyUuid:function(a){return this.setAsString("replyUuid",a)},getTopicUuid:function(){var a=this.getAsString("topicUuid");return e(a)},setTopicUuid:function(a){return this.setAsString("topicUuid",a)},getReplyToPostUuid:function(){var a=this.getAsString("replyTo");return e(a)},setReplyToPostUuid:function(a){return this.setAsString("replyTo",a)},getReplyUrl:function(){return this.getAlternateUrl()},
getPermisisons:function(){return this.getAsString("permissions")},isAnswer:function(){return this.getAsBoolean("answer")},setAnswer:function(a){return this.setAsBoolean("answer",a)},isNotRecommendedByCurrentUser:function(){return this.getAsBoolean("notRecommendedByCurrentUser")},getRecommendationsUrl:function(){return this.getAsString("recommendationsUrl")},getRecommendations:function(a){return this.service.getForumRecommendations(this.getReplyUuid(),a)},getReplies:function(a){return this.service.getForumReplyReplies(this.getReplyUuid(),
a)},createRecommendation:function(a){return this.service.createForumRecommendation(this.getReplyUuid(),a)},deleteRecommendation:function(a){return this.service.deleteForumRecommendation(this.getReplyUuid(),a)},load:function(b){var e=this.getReplyUuid(),d=this.service._validateReplyUuid(e);if(d)return d;var g=this,b={handleAs:"text",query:c.mixin({replyUuid:e},b||{})};return this.service.getEntity(a.AtomReply,b,e,{createEntity:function(a,b){g.setData(b);return g}})},remove:function(a){return this.service.deleteForumReply(this.getReplyUuid(),
a)},update:function(a){return this.service.updateForumReply(this,a)},save:function(a){return this.getReplyUuid()?this.service.updateForumReply(this,a):this.service.createForumReply(this,a)}});i(j,{categoryScheme:null,constructor:function(){}});var n=i(j,{xpath:a.ForumRecommendationXPath,contentType:"text",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="recommendation"></category>',constructor:function(){},getTitle:function(){return this.getAsString("title")||"liked"},
getRecommendationUuid:function(){var a=this.getAsString("id");return e(a)},getPostUuid:function(){var a=this.getAsString("postUuid");return this.service.getUrlParameter(a,"postUuid")||a},setPostUuid:function(a){return this.setAsString("postUuid",a)}});i(j,{categoryScheme:null,constructor:function(){}});var e=function(a){return a&&0==a.indexOf("urn:lsid:ibm.com:forum:")?a.substring(23):a},r={createEntities:function(b,c){return new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},
createEntity:function(a,b){return new o({service:a,data:b})}},s={createEntities:function(b,c){return new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new p({service:a,data:b})}},t={createEntities:function(b,c){return new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new m({service:a,data:b})}},u={createEntities:function(b,c){return new k({service:b,data:c,namespaces:a.Namespaces,
xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new n({service:a,data:b})}};return i(g,{contextRootMap:{forums:"forums"},serviceName:"forums",constructor:function(){if(!this.endpoint)this.endpoint=h.findEndpoint(this.getDefaultEndpointName())},newForum:function(a){return this._toForum(a)},newForumTopic:function(a){return this._toForumTopic(a)},newForumReply:function(a){return this._toForumReply(a)},getMyForums:function(b){return this.getEntities(a.AtomForumsMy,{method:"GET",handleAs:"text",
query:b||{}},r)},getMyTopics:function(b){return this.getEntities(a.AtomTopicsMy,{method:"GET",handleAs:"text",query:b||{}},s)},getAllForums:function(b){return this.getEntities(a.AtomForums,{method:"GET",handleAs:"text",query:b||{}},r)},getPublicForums:function(b){return this.getEntities(a.AtomForumsPublic,{method:"GET",handleAs:"text",query:b||{}},r)},getForumTopics:function(b,e){var d=this._validateForumUuid(b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin({forumUuid:b},e||{})};return this.getEntities(a.AtomTopics,
d,s)},getCommunityForumTopics:function(b,e){var d=this._validateCommunityUuid(b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},e||{})};return this.getEntities(a.AtomTopics,d,s)},getForumRecommendations:function(b,e){var d=this._validatePostUuid(b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin({postUuid:b},e||{})};return this.getEntities(a.AtomRecommendationEntries,d,u)},getForumTopicReplies:function(b,e){var d=this._validateTopicUuid(b);if(d)return d;
d={method:"GET",handleAs:"text",query:c.mixin({topicUuid:b},e||{})};return this.getEntities(a.AtomReplies,d,t)},getForumReplyReplies:function(b,e){var d=this._validateReplyUuid(b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin({replyUuid:b},e||{})};return this.getEntities(a.AtomReplies,d,t)},getForumReplies:function(b){return this.getEntities(a.AtomReplies,{method:"GET",handleAs:"text",query:b},t)},getForums:function(b){return this.getEntities(a.AtomForums,{method:"GET",handleAs:"text",
query:b||{}},r)},getForum:function(a,b){return(new o({service:this,_fields:{forumUuid:a}})).load(b)},createForum:function(b,c){var e=this._toForum(b),d=this._validateForum(e,!1,c);if(d)return d;d={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:e.createPostData()};return this.updateEntity(a.AtomForumsMy,d,{createEntity:function(a,b,c){e.setData(b);a=this.getLocationParameter(c,"forumUuid");e.setForumUuid(a);return e}},c)},updateForum:function(b,e){var d=this._toForum(b),g=this._validateForum(d,
!0,e);if(g)return g;g={method:"PUT",query:c.mixin({forumUuid:d.getForumUuid()},e||{}),headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(a.AtomForum,g,{createEntity:function(a,b){var c=d.getForumUuid();d.setData(b);d.setForumUuid(c);return d}},e)},deleteForum:function(b,e){var d=this._validateForumUuid(b);if(d)return d;d={method:"DELETE",query:c.mixin({forumUuid:b},e||{}),handleAs:"text"};return this.deleteEntity(a.AtomForum,d,b)},getForumTopic:function(a,b){return(new p({service:this,
_fields:{topicUuid:a}})).load(b)},createForumTopic:function(b,e){var d=this._toForumTopic(b),g=this._validateForumTopic(d,!1,e);if(g)return g;g={method:"POST",query:c.mixin({forumUuid:d.getForumUuid()},e||{}),headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(a.AtomTopics,g,{createEntity:function(a,b,c){a=this.getLocationParameter(c,"topicUuid");d.setTopicUuid(a);d.setData(b);return d}},e)},updateForumTopic:function(b,e){var d=this._toForumTopic(b),g=this._validateForumTopic(d,
!0,e);if(g)return g;g={method:"PUT",query:c.mixin({topicUuid:d.getTopicUuid()},e||{}),headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(a.AtomTopic,g,{createEntity:function(a,b){var c=d.getTopicUuid();d.setData(b);d.setTopicUuid(c);return d}},e)},deleteForumTopic:function(b,e){var d=this._validateTopicUuid(b);if(d)return d;d={method:"DELETE",query:c.mixin({topicUuid:b},e||{}),handleAs:"text"};return this.deleteEntity(a.AtomTopic,d,b)},getForumReply:function(a,b){return(new m({service:this,
_fields:{replyUuid:a}})).load(b)},createForumReply:function(b,c){var e=this._toForumReply(b),d=this._validateForumReply(e,!1,c);if(d)return d;d={method:"POST",query:c||{topicUuid:e.getTopicUuid()},headers:a.AtomXmlHeaders,data:e.createPostData()};return this.updateEntity(a.AtomReplies,d,{createEntity:function(a,b,c){a=this.getLocationParameter(c,"replyUuid");e.setReplyUuid(a);e.setData(b);return e}},c)},updateForumReply:function(b,e){var d=this._toForumReply(b),g=this._validateForumReply(d,!0,e);
if(g)return g;g={method:"PUT",query:c.mixin({replyUuid:d.getReplyUuid()},e||{}),headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(a.AtomReply,g,{createEntity:function(a,b){var c=d.getReplyUuid();d.setData(b);d.setReplyUuid(c);return d}},e)},deleteForumReply:function(b,e){var d=this._validateReplyUuid(b);if(d)return d;d={method:"DELETE",query:c.mixin({replyUuid:b},e||{}),handleAs:"text"};return this.deleteEntity(a.AtomReply,d,b)},getForumRecommendation:function(a,b){return(new n({service:this,
_fields:{postUuid:a}})).load(b)},createForumRecommendation:function(b,c){var e=this._toForumRecommendation(b),d=this._validateForumRecommendation(e,!1,c);if(d)return d;d={method:"POST",query:c||{postUuid:e.getPostUuid()},headers:a.AtomXmlHeaders,data:e.createPostData()};return this.updateEntity(a.AtomRecommendationEntries,d,{createEntity:function(a,b){e.setData(b);return e}},c)},deleteForumRecommendation:function(b,e){var d=this._validatePostUuid(b);if(d)return d;d={method:"DELETE",query:c.mixin({postUuid:b},
e||{}),handleAs:"text"};return this.deleteEntity(a.AtomRecommendationEntries,d,b)},_validateForum:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum with title must be specified.");if(b&&!a.getForumUuid())return this.createBadRequestPromise("Invalid argument, forum with UUID must be specified.")},_validateForumTopic:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum topic with title must be specified.");if(b&&
!a.getTopicUuid())return this.createBadRequestPromise("Invalid argument, forum topic with UUID must be specified.")},_validateForumReply:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum reply with title must be specified.");if(b&&!a.getReplyUuid())return this.createBadRequestPromise("Invalid argument, forum reply with UUID must be specified.")},_validateForumRecommendation:function(a,b){if(!a||!a.getPostUuid())return this.createBadRequestPromise("Invalid argument, forum recommendation with postUuid must be specified.");
if(b&&!a.getRecommendationUuid())return this.createBadRequestPromise("Invalid argument, forum recommendation with UUID must be specified.")},_validateForumUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected forumUuid.")},_validateCommunityUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validatePostUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected postUuid.")},
_validateTopicUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected topicUuid.")},_validateReplyUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected replyUuid.")},_toForum:function(a){if(a instanceof o)return a;c.isString(a)&&(a={forumUuid:a});return new o({service:this,_fields:c.mixin({},a)})},_toForumTopic:function(a){if(a instanceof p)return a;c.isString(a)&&(a={forumTopicUuid:a});return new p({service:this,
_fields:c.mixin({},a)})},_toForumReply:function(a){if(a instanceof m)return a;c.isString(a)&&(a={forumReplyUuid:a});return new m({service:this,_fields:c.mixin({},a)})},_toForumRecommendation:function(a){if(a instanceof n)return a;c.isString(a)&&(a={postUuid:a});a instanceof p&&(a={postUuid:a.getTopicUuid()});a instanceof m&&(a={postUuid:a.getReplyUuid()});return new n({service:this,_fields:c.mixin({},a)})}})})},"sbt/connections/nls/CommunityService":function(){define({root:{invalid_argument:"Invalid Argument"}})},
"sbt/nls/messageSSO":function(){define({root:{message_title:"ReAuthenticate",message:"Authentication expired, Please login again.",relogin_button_text:"Re-Login"}})},"sbt/connections/BlogConstants":function(){define(["../lang","./ConnectionsConstants"],function(i,h){return i.mixin({},h,{BlogFeedXPath:h.ConnectionsFeedXPath,RecommendersFeedXpath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/os:totalResults"},BlogNamespaces:{a:"http://www.w3.org/2005/Atom",app:"http://www.w3.org/2007/app",snx:"http://www.ibm.com/xmlns/prod/sn"},
BlogXPath:i.mixin({},h.AtomEntryXPath,{blogUuid:"a:id",handle:"snx:handle",timezone:"snx:timezone",rank:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",categoryupdates:"a:category[@term='updates']",categoryfaq:"a:category[@term='faq']",categorywith:"a:category[@term='with']",categoryshared:"a:category[@term='shared']",communityUuid:"snx:communityUuid",containerUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container']/@href",containerType:"snx:containertype",categoryFlags:"a:link[@scheme='http://www.ibm.com/xmlns/prod/sn/flags']/@term",
summary:"a:summary[@type='html']"}),BlogPostXPath:i.mixin({},h.AtomEntryXPath,{postUuid:"a:id",replies:"a:link[@rel='replies']/@href",recommendationsUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/recommendations']/@href",rankRecommendations:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",rankComment:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",rankHit:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",repliesUrl:"a:link[@rel='replies']/@href",sourceId:"a:source/a:id",
sourceTitle:"a:source/a:title ",sourceLink:"a:source/a:link[@rel='self']/@href",sourceLinkAlternate:"a:source/a:link[@rel='alternate']/@href",sourceUpdated:"a:source/a:updated",sourceCategory:"a:source/a:link[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",blogHandle:"blogHandle",summary:"a:summary[@type='html']"}),CommentXPath:i.mixin({},h.AtomEntryXPath,{commentUuid:"a:id",commentUrl:"a:link[@rel='self']/@href",recommendationsUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/recommendations']/@href",
trackbacktitle:"snx:trackbacktitle",replyTo:"thr:in-reply-to/@ref",replyToSource:"thr:in-reply-to/@source",rankRecommendations:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",sourceId:"a:source/a:id",sourceTitle:"a:source/a:title ",sourceLink:"a:source/a:link[@rel='self']/@href",sourceLinkAlternate:"a:source/a:link[@rel='alternate']/@href",blogHandle:"blogHandle",blogPostUuid:"blogPostUuid"}),RecommendersXPath:i.mixin({},h.AtomEntryXPath,{recommenderUuid:"a:id",category:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term"}),
AtomBlogsAll:"/${blogs}/{blogHomepageHandle}/feed/blogs/atom",AtomBlogsMy:"/${blogs}/{blogHomepageHandle}/api/blogs",AtomBlogInstance:"/${blogs}/{blogHomepageHandle}/api/blogs/{blogUuid}",AtomBlogPostInstance:"/${blogs}/{blogHomepageHandle}/api/entries/{postUuid}",AtomEntriesAll:"/${blogs}/{blogHomepageHandle}/feed/entries/atom",AtomBlogEntries:"/${blogs}/{blogHandle}/feed/entries/atom",AtomBlogComments:"/${blogs}/{blogHandle}/feed/comments/atom",AtomBlogCommentsAll:"/${blogs}/{blogHomepageHandle}/feed/comments/atom",
AtomBlogsFeatured:"/${blogs}/{blogHomepageHandle}/feed/featuredblogs/atom",AtomBlogsPostsFeatured:"/${blogs}/{blogHomepageHandle}/feed/featured/atom",AtomBlogsPostsRecommended:"/${blogs}/{blogHomepageHandle}/feed/recommended/atom",AtomBlogsTags:"/${blogs}/{blogHomepageHandle}/feed/tags/atom",AtomBlogTags:"/${blogs}/{blogHandle}/feed/tags/atom",AtomBlogCreate:"/${blogs}/{blogHomepageHandle}/api/blogs",AtomBlogEditDelete:"/${blogs}/{blogHomepageHandle}/api/blogs/{blogUuid}",AtomBlogPostCreate:"/${blogs}/{blogHandle}/api/entries",
AtomBlogPostEditDelete:"/${blogs}/{blogHandle}/api/entries/{postUuid}",AtomBlogCommentCreate:"/${blogs}/{blogHandle}/api/entrycomments/{postUuid}",AtomBlogCommentEditRemove:"/${blogs}/{blogHandle}/api/comments/{commentUuid}",AtomRecommendBlogPost:"/${blogs}/{blogHandle}/api/recommend/entries/{postUuid}",AtomVotedIdeas:"/${blogs}/{blogHomepageHandle}/feed/myvotes/atom",AtomBlogEntryComments:"/${blogs}/{blogHandle}/feed/entrycomments/{entryAnchor}/atom"})})},"sbt/connections/ConnectionsConstants":function(){define(["../lang",
"../base/BaseConstants"],function(i,h){return i.mixin(h,{BadRequest:400,ConnectionsFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},ConnectionsServiceDocsFeedXPath:{entries:"/a:feed/a:entry",emailConfig:"/a:feed/a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/configuration']/@term",language:"/a:feed/a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/language']/@term",
languageLabels:"/a:feed/a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/language']/@label"},AuthTypes:{OAuth:"oauth",Basic:"basic"},TagsXPath:{entries:"app:categories/a:category",term:"@term",frequency:"@snx:frequency",uid:"@term"},ServiceConfigXPath:i.mixin({},h.AtomEntryXPath,{alternateSSLUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/alternate-ssl']/@href"}),MemberXPath:i.mixin({},h.AtomEntryXPath,{role:"snx:role"}),ReportEntryXPath:i.mixin({},h.AtomEntryXPath,{categoryIssue:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/issue']/@term",
reportItemLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/report-item']/@href",relatedLink:"a:link[@rel='related']/@href",inRefTo:"snx:in-ref-to[@rel='http://www.ibm.com/xmlns/prod/sn/report-item']/@ref"}),ModerationActionEntryXPath:i.mixin({},h.AtomEntryXPath,{moderationAction:"snx:moderation/action",relatedLink:"a:link[@rel='related']/@href",inRefTo:"snx:in-ref-to[@rel='http://www.ibm.com/xmlns/prod/sn/report-item']/@ref"}),ServiceConfigs:"/{service}/serviceconfigs"})})},"sbt/authenticator/Basic":function(){define(["../declare",
"../lang","../util","../i18n!../nls/loginForm"],function(i,h,c,d){return i(null,{loginUi:"",loginPage:"/sbt/authenticator/templates/login.html",dialogLoginPage:"authenticator/templates/loginDialog.html",url:"",actionUrl:"",constructor:function(b){h.mixin(this,b||{})},authenticate:function(b){var a=this;require(["sbt/config"],function(c){var d=b.loginUi||c.Properties.loginUi||a.loginUi,h=b.loginPage||c.Properties.loginPage||a.loginPage,i=b.dialogLoginPage||c.Properties.dialogLoginPage||a.dialogLoginPage;
"popup"==d?a._authPopup(b,h,c,a.url):"dialog"==d?a._authDialog(b,i,c):a._authMainWindow(b,h,a.url)});return!0},_authDialog:function(b,a,c){var h=this;require(["sbt/_bridge/ui/BasicAuth_Dialog","sbt/dom"],function(i,o){if(b.cancel)c.cancel=b.cancel;b.actionUrl=h._computeActionURL(b);i.show(b,a);o.setText("wrongCredsMessage",d.wrong_creds_message);o.setText("basicLoginFormUsername",d.username);o.setText("basicLoginFormPassword",d.password);o.setAttr(o.byId("basicLoginFormOK"),"value",d.login_ok);o.setAttr(o.byId("basicLoginFormCancel"),
"value",d.login_cancel)});return!0},_authPopup:function(b,a,g,h){var i={actionURL:this._computeActionURL(b),redirectURL:"empty",loginUi:"popup",showWrongCredsMessage:"false"},i=c.createQuery(i,"&"),a=h+a+"?"+i,h=c.createQuery({width:window.screen.availWidth/2,height:window.screen.availHeight/2,left:window.screen.availWidth/4,top:window.screen.availHeight/4,menubar:0,toolbar:0,status:0,location:0,scrollbars:1,resizable:1},","),a=window.open(a,"Authentication",h);if(b.callback)g.callback=b.callback,
a.callback=b.callback;if(b.cancel)g.cancel=b.cancel,a.cancel=b.cancel;globalLoginFormStrings=d;globalEndpointAlias=b.name;a.focus();return!0},_authMainWindow:function(b,a,g){b={actionURL:this._computeActionURL(b),redirectURL:document.URL,loginUi:"mainWindow",showWrongCredsMessage:"false",username:d.username,password:d.password,login_ok:d.login_ok,login_cancel:d.login_cancel,wrong_creds_message:d.wrong_creds_message};b=c.createQuery(b,"&");window.location.href=g+a+"?"+b;return!0},_computeActionURL:function(b){if(!this.actionUrl){var a=
b.proxy.proxyUrl;return a.substring(0,a.lastIndexOf("/"))+"/basicAuth/"+b.proxyPath+"/JSApp"}return this.actionUrl}})})},"sbt/connections/BookmarkConstants":function(){define(["../lang","./ConnectionsConstants"],function(i,h){return i.mixin({},h,{BookmarkFeedXPath:h.ConnectionsFeedXPath,BookmarkXPath:i.mixin({},h.AtomEntryXPath,{BookmarkUuid:"a:id",privateFlag:"a:category[@term='private' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",categoryType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",
link:"a:link[not(@rel)]/@href",linkSame:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/same']/@href",url:"a:link[1]/@href",authorId:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",authorUri:"a:author/a:uri",tags:"a:category[not(@scheme)]/@term",clickcount:"snx:clickcount"}),BookmarkNamespaces:{a:"http://www.w3.org/2005/Atom",snx:"http://www.ibm.com/xmlns/prod/sn"},AtomBookmarksAll:"/${dogear}/atom",AtomBookmarksPopular:"/${dogear}/atom/popular",AtomBookmarksMyNotifications:"/${dogear}/atom/mynotifications",
AtomBookmarksINotifiedMySentNotifications:"/${dogear}/atom/mysentnotifications",AtomBookmarksTags:"/${dogear}/tags",AtomBookmarkCreateUpdateDelete:"/${dogear}/api/app"})})},"sbt/log":function(){define(["./stringUtil"],function(i){var h=function(){return sbt.Properties["js.logging.enabled"]?"true"==sbt.Properties["js.logging.enabled"].toLowerCase():!0},c={DEBUG:1,INFO:2,WARN:3,ERROR:4},d=function(){return c[sbt.Properties["js.logging.level"]?sbt.Properties["js.logging.level"]:"DEBUG"]};return{setLevel:function(b){d=
c[b]},setEnabled:function(b){h=b},debug:function(){if(h&&!(1<d)&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=i.substitute(a,b);console.debug?console.debug(b):console.log("DEBUG : "+b)}},info:function(){if(h&&!(2<d)&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=i.substitute(a,b);console.info?console.info(b):console.log("INFO : "+b)}},warn:function(){if(h&&!(3<d)&&console&&0<arguments.length){var b=
Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=i.substitute(a,b);console.warn?console.warn(b):console.log("WARN : "+b)}},error:function(){if(h&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=i.substitute(a,b);console.error?console.error(b):console.log("ERROR : "+b)}},exception:function(){if(h&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=i.substitute(a,b);console.error?console.error("EXCEPTION : "+
b):console.log("EXCEPTION : "+b)}}}})},"sbt/connections/SearchService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,../json,./SearchConstants,./ConnectionsService,../base/BaseEntity,../base/AtomEntity,../base/XmlDataHandler".split(","),function(i,h,c,d,b,a,g,j,k,o,p){var m=i(o,{constructor:function(){},getLink:function(){return this.getAsString("link")}}),n=i(o,{constructor:function(){},getPrimaryComponent:function(){return this.getAsString("primaryComponent")},getRelevance:function(){return this.getAsNumber("relevance")}}),
e=i(k,{constructor:function(a){this.dataHandler=new p({service:a.service,data:a.data,namespaces:c.mixin(g.Namespaces,a.namespaces||{}),xpath:c.mixin(g.FacetValueXPath,a.xpath||this.xpath||{})});this.id=this.getAsString("uid")},getId:function(){var a=this.getAsString("id").split("/");return 1==a.length?a[0]:a[1]},getLabel:function(){return this.getAsString("label")},getWeight:function(){return this.getAsNumber("weight")}}),r={createEntities:function(a,b){return new p({namespaces:g.Namespaces,xpath:g.SearchFeedXPath,
service:a,data:b})},createEntity:function(a,b){return new m({namespaces:g.Namespaces,service:a,data:b})}},s={createEntities:function(a,b){return new p({namespaces:g.Namespaces,xpath:g.SearchFeedXPath,service:a,data:b})},createEntity:function(a,b){return new n({namespaces:g.Namespaces,xpath:g.SearchXPath,service:a,data:b})}},t={createEntities:function(b,e,d){var h=c.mixin({},g.SingleFacetXPath),d=a.parse(d.options.query.facet);h.entries=h.entries.replace("{facet.id}",d.id);return new p({namespaces:g.Namespaces,
xpath:h,service:b,data:e})},createEntity:function(a,b){return new e({namespaces:g.Namespaces,xpath:g.FacetValueXPath,service:a,data:b})}};return i(j,{contextRootMap:{search:"search"},serviceName:"search",constructor:function(){if(!this.endpoint)this.endpoint=h.findEndpoint(this.getDefaultEndpointName())},getScopes:function(a){return this.getEntities(g.AtomScopes,{method:"GET",handleAs:"text",query:a||{}},r)},getResults:function(a,b){var b=this._stringifyRequestArgs(b),e={method:"GET",handleAs:"text",
query:c.mixin({query:a},b||{})};return this.getEntities(g.AtomSearch,e,s)},getMyResults:function(a,b){var b=this._stringifyRequestArgs(b),e={method:"GET",handleAs:"text",query:c.mixin({query:a},b||{})};return this.getEntities(g.AtomMySearch,e,s)},getResultsWithConstraint:function(b,e,d){d=this._stringifyRequestArgs(d);b={query:b,constraint:a.stringify(e)};d={method:"GET",handleAs:"text",query:c.mixin(b,d||{})};return this.getEntities(g.AtomSearch,d,s)},getMyResultsWithConstraint:function(b,e,d){d=
this._stringifyRequestArgs(d);b={query:b,constraint:a.stringify(e)};d={method:"GET",handleAs:"text",query:c.mixin(b,d||{})};return this.getEntities(g.AtomMySearch,d,s)},getResultsByTag:function(a,b){var e={method:"GET",handleAs:"text",query:c.mixin({constraint:this._createTagConstraint(a)},b||{})};return this.getEntities(g.AtomSearch,e,s)},getMyResultsByTag:function(a,b){var e={method:"GET",handleAs:"text",query:c.mixin({constraint:this._createTagConstraint(a)},b||{})};return this.getEntities(g.AtomMySearch,
e,s)},getPeople:function(a,b){var e={method:"GET",handleAs:"text",query:c.mixin({query:a,pageSize:"0",facet:'{"id": "Person"}'},b||{})};return this.getEntities(g.AtomSearch,e,t)},getMyPeople:function(a,b){var e={method:"GET",handleAs:"text",query:c.mixin({query:a,pageSize:"0",facet:'{"id": "Person"}'},b||{})};return this.getEntities(g.AtomMySearch,e,t)},_stringifyRequestArgs:function(b){if(!b)return null;var e={},d;for(d in b){var g=b[d];e[d]=c.isObject(g)?a.stringify(g):g}return e},_createTagConstraint:function(b){var e=
{type:"category",values:[]};if(c.isArray(b))for(var d=0;d<b.length;d++)e.values[d]="Tag/"+b[d];else e.values[0]="Tag/"+b;return a.stringify(e)}})})},"sbt/util":function(){define(["./lang","sbt/i18n!sbt/nls/util","./log","./stringUtil","./pathUtil"],function(i,h,c,d,b){function a(a,b){if(b&&(b.error||b.handle)){if(b.error)try{b.error(a)}catch(d){c.error(h.notifyError_catchError,d)}if(b.handle)try{b.handle(a)}catch(i){c.error(h.notifyError_catchError,i)}}else c.error(h.notifyError_console,a.code,a.message)}
return{notifyError:a,isEmptyObject:function(a){var b=!0,c;for(c in a)if(a.hasOwnProperty(c)){b=!1;break}return b},checkObjectClass:function(b,d,h,i){return b.declaredClass!=d?(i?a({code:400,message:h},i):c(h),!1):!0},checkNullValue:function(b,d,h){if(b)return!0;h?a({code:400,message:d},h):c(d);return!1},minVersion:function(a,b){for(var c=a.split("."),d=b.split("."),h=0;h<c.length;++h){if(d.length==h)return!1;if(c[h]!=d[h])return c[h]>d[h]?!1:!0}return!0},getAllResponseHeaders:function(a){var b={};
try{var c=a.getAllResponseHeaders();if(c)for(var d=c.split("\n"),a=0;a<d.length;a++){var h=d[a].indexOf(":"),m=i.trim(d[a].substring(0,h)),n=i.trim(d[a].substring(h+1));0<m.length&&(b[m]=n)}}catch(e){console.log(e)}return b},createQuery:function(a,b){if(!a)return null;var c=b;c||(c=",");var d=[],h;for(h in a){var i=a[h];d.push(encodeURIComponent(h)+"="+encodeURIComponent(i))}return d.join(c)},splitQuery:function(a,b){var c,d={},h,i,n,a=a.replace("?","");i=a.split(b);n=i.length;for(c=0;c<n;c++)i[c]&&
(h=i[c].split("="),d[h[0]]=h[1]);return d},getJavaScriptLibrary:function(){var a="Unknown";window.dojo?dojo.version&&(a="Dojo "+dojo.version):define&&define.amd&&define.amd.vendor&&"dojotoolkit.org"===define.amd.vendor?require(["dojo/_base/kernel"],function(b){a="Dojo AMD "+b.version}):window.jQuery&&(a="JQuery "+jQuery.fn.jquery);return a},makeAbsoluteUrl:function(a){if(d.startsWith(a,"http"))return a;var c=window.location;return b.concat(c.protocol+"//"+c.hostname+(c.port?":"+c.port:""),a)}}})},
"sbt/nls/loginForm":function(){define({root:{username:"User name :",password:"Password :",authentication_dialog_title:"Authentication",login_ok:"Log in",login_cancel:"Cancel",wrong_creds_message:"Wrong Credentials"}})},"sbt/connections/BookmarkService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./BookmarkConstants,./ConnectionsService,../base/AtomEntity,../base/XmlDataHandler,./Tag".split(","),function(i,h,c,d,b,a,g,j,k,o){CategoryTmpl='<category term="${tag}"></category>';
var p=i(j,{xpath:a.BookmarkXPath,namespaces:a.BookmarkNamespaces,categoryScheme:'<category term="bookmark" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>',constructor:function(){},getBookmarkUuid:function(){return this.getAsString("BookmarkUuid")},setBookmarkUuid:function(a){return this.setAsString("BookmarkUuid",a)},isPrivate:function(){return this.getAsBoolean("privateFlag")},setPrivate:function(a){return this.setAsBoolean("privateFlag",a)},getUrl:function(){return this.getAsString("link")},
setUrl:function(a){return this.setAsString("link",a)},getClickCount:function(){return this.getAsString("clickcount")},getCategoryType:function(){return this.getAsString("categoryType")},getEditLink:function(){return this.getAsString("linkEdit")},getSameLink:function(){return this.getAsString("linkSame")},getAuthor:function(){return this.getAsObject(["authorId","authorName","authorEmail","authorUri"])},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",
a)},load:function(b){var d=this.getUrl(),g=this.service._validateBookmarkUrl(d);if(g)return g;var h=this,b={handleAs:"text",query:c.mixin({url:d},b||{})};return this.service.getEntity(a.AtomBookmarkCreateUpdateDelete,b,d,{createEntity:function(b,c){h.setDataHandler(new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.BookmarkXPath}));return h}})},remove:function(a){return this.service.deleteBookmark(this.getUrl(),a)},update:function(a){return this.service.updateBookmark(this,a)},save:function(a){return this.getBookmarkUuid()?
this.service.updateBookmark(this,a):this.service.createBookmark(this,a)}}),m={createEntities:function(b,c){return new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.BookmarkFeedXPath})},createEntity:function(a,b){return new p({service:a,data:b})}},n={createEntities:function(b,c){return new k({data:c,namespaces:a.Namespaces,xpath:a.TagsXPath})},createEntity:function(b,c){var d=new k({data:c,namespaces:a.Namespaces,xpath:a.TagsXPath});return new o({service:b,id:d.getEntityId(),dataHandler:d})}};
return i(g,{contextRootMap:{dogear:"dogear"},serviceName:"dogear",constructor:function(){if(!this.endpoint)this.endpoint=h.findEndpoint(this.getDefaultEndpointName())},getAllBookmarks:function(b){return this.getEntities(a.AtomBookmarksAll,{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getPopularBookmarks:function(b){return this.getEntities(a.AtomBookmarksPopular,{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getBookmarksMyNotifications:function(b){return this.getEntities(a.AtomBookmarksMyNotifications,
{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getBookmarksMySentNotifications:function(b){return this.getEntities(a.AtomBookmarksINotifiedMySentNotifications,{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getBookmark:function(a,b){return(new p({service:this,_fields:{link:a}})).load(b)},createBookmark:function(b,c){var d=this._toBookmark(b),g=this._validateBookmark(d,!1,c);if(g)return g;g=a.AtomBookmarkCreateUpdateDelete;if(c&&c.url)g=c.url,
delete c.url;var h={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:this._constructBookmarkPostData(d)};return this.updateEntity(g,h,{createEntity:function(b,c,e){c?(b=new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.BookmarkXPath}),d.setDataHandler(b),d.setData(c)):(d.setData(c),c=this.getLocationParameter(e,"referenceId"),d.setBookmarkUuid(c));return d}},c)},updateBookmark:function(b,d){var g=this._toBookmark(b),h=this._validateBookmark(g,!0,d);if(h)return h;h={method:"PUT",query:c.mixin({url:g.getUrl()},
d||{}),headers:a.AtomXmlHeaders,data:this._constructBookmarkPostData(g)};return this.updateEntity(a.AtomBookmarkCreateUpdateDelete,h,{createEntity:function(b,c){var d=g.getBookmarkUuid();if(c){var e=new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.BookmarkXPath});g.setDataHandler(e)}g.setBookmarkUuid(d);return g}},d)},deleteBookmark:function(b,d){var g=this._validateBookmarkUrl(b);if(g)return g;g={method:"DELETE",query:c.mixin({url:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomBookmarkCreateUpdateDelete,
g,b)},getBookmarksTags:function(b){return this.getEntities(a.AtomBookmarksTags,{method:"GET",handleAs:"text",query:b||{}},this.getTagsFeedCallbacks(),b)},newBookmark:function(a){return this._toBookmark(a)},getBookmarkFeedCallbacks:function(){return m},getTagsFeedCallbacks:function(){return n},_toBookmark:function(a){if(a instanceof p)return a;c.isString(a)&&(a={bookmarkUuid:a});return new p({service:this,_fields:c.mixin({},a)})},_validateBookmarkUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected bookmarkUuid.")},
_validateBookmarkUrl:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected bookmarkUrl.")},_validateBookmark:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, bookmark with title must be specified.");if(b&&!a.getBookmarkUuid())return this.createBadRequestPromise("Invalid argument, bookmark with UUID must be specified.")},_constructBookmarkPostData:function(a){var b=d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom"><title type="text">${getTitle}</title><category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="bookmark"/><link href=\'${getUrl}\'/>${isPrivate}<content type="html">${getContent}</content>${getTags}</entry>',
a,function(b,c){if("getTags"==c){var g=b,b="",f;for(f in g)b+=d.transform(CategoryTmpl,{tag:g[f]})}else"getTitle"==c&&!b?b=a.getTitle():"getUrl"==c&&!b?b=a.getUrl():"getContent"==c&&!b?b=a.getContent():"isPrivate"==c&&!b&&(b=a.isPrivate()?'<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="private" />':"");return b},a);return d.trim(b)}})})},"sbt/connections/CommunityConstants":function(){define(["../lang","./ConnectionsConstants"],function(i,h){return i.mixin({},h,{Public:"public",Moderated:"publicInviteOnly",
Restricted:"private",Owner:"owner",Member:"member",CommunityNamespaces:{a:"http://www.w3.org/2005/Atom",app:"http://www.w3.org/2007/app",snx:"http://www.ibm.com/xmlns/prod/sn"},CommunityFeedXPath:h.ConnectionsFeedXPath,CommunityXPath:i.mixin({},h.AtomEntryXPath,{communityUuid:"a:id",communityTheme:"snx:communityTheme",logoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/logo']/@href",tags:"a:category[not(@scheme)]/@term",memberCount:"snx:membercount",communityType:"snx:communityType",communityUrl:"a:link[@rel='alternate']/@href",
isExternal:"snx:isExternal",parentCommunityUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/parentcommunity']/@href"}),MemberXPath:i.mixin({},h.AtomEntryXPath,{id:"a:contributor/snx:userid",uid:"a:contributor/snx:userid",role:"snx:role"}),InviteXPath:i.mixin({},h.AtomEntryXPath,{inviteUuid:"a:id",communityUuid:"snx:communityUuid",communityUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/community']/@href"}),EventXPath:i.mixin({},h.AtomEntryXPath,{eventUuid:"snx:eventUuid",eventInstUuid:"snx:eventInstUuid",
location:"snx:location",allDay:"snx:allday",selfLink:"a:link[@rel='self']/@href",sourceId:"a:source/a:id",sourceTitle:"a:source/a:title",sourceLink:"a:source/a:link[@rel='self']/@href",attendLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/attend']/@href",followLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/follow']/@href",followed:"snx:followed",attended:"snx:attended",attendeesAtomUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/attendees']/@href",
containerLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container']/@href",instStartDate:"snx:startDate",instEndDate:"snx:endDate",repeats:"snx:repeats",parentEventId:"snx:parentEvent",parentEventLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/parentevent']/@href",communityLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container']/@href",communityUuid:"snx:communityUuid",eventAtomInstances:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/instances']/@href",
eventAtomAttendees:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/attend']/@href",eventAtomFollowers:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/follow']/@href",frequency:"snx:recurrence/@frequency",interval:"snx:recurrence/@interval",until:"snx:recurrence/snx:until",byDay:"snx:recurrence/snx:byDay",startDate:"snx:recurrence/snx:startDate",endDate:"snx:recurrence/snx:endDate"}),AtomCommunitiesAll:"/${communities}/service/atom/communities/all",AtomCommunitiesMy:"/${communities}/service/atom/communities/my",
AtomCommunityInvitesMy:"/${communities}/service/atom/community/invites/my",AtomCommunityInvites:"${communities}/service/atom/community/invites",AtomCommunitySubCommunities:"${communities}/service/atom/community/subcommunities",AtomCommunityMembers:"${communities}/service/atom/community/members",AtomCommunityInstance:"${communities}/service/atom/community/instance",AtomCommunityForumTopics:"/${communities}/service/atom/community/forum/topics",AtomCommunityBookmarks:"/${communities}/service/atom/community/bookmarks",
AtomCommunityEvents:"/${communities}/calendar/atom/calendar/event",AtomCommunityEventAttend:"/${communities}/calendar/atom/calendar/event/attendees",AtomCommunityEventComments:"/${communities}/calendar/atom/calendar/event/comment",AtomCommunityInvites:"/${communities}/service/atom/community/invites",AtomCommunityBookmarks:"/${communities}/service/atom/community/bookmarks",AtomUpdateCommunityLogo:"/${files}/{endpointName}/connections/UpdateCommunityLogo/{fileName}",AtomUploadCommunityFile:"/${files}/{endpointName}/connections/UploadCommunityFile/{communityUuid}"})})},
"sbt/connections/ActivityConstants":function(){define(["../lang","./ConnectionsConstants"],function(i,h){return i.mixin({},h,{ActivityNamespaces:{a:h.Namespaces.a,app:h.Namespaces.app,thr:h.Namespaces.thr,snx:h.Namespaces.snx},ActivityNodeTypes:{Activity:"activity",Chat:"chat",Email:"email",Entry:"entry",EntryTemplate:"entrytemplate",Reply:"reply",Section:"section",ToDo:"todo"},ActivitiesFeedXPath:h.ConnectionsFeedXPath,PersonFieldXPath:{name:"a:name",userId:"snx:userid",email:"a:email"},FileFieldXPath:{url:"a:link[@rel='enclosure']/@href",
type:"a:link[@rel='enclosure']/@type",size:"a:link[@rel='enclosure']/@size",length:"a:link/@length"},LinkFieldXPath:{url:"a:link/@href",title:"a:link/@title"},TextFieldXPath:{summary:"a:summary"},ActivityNodeXPath:i.mixin({},h.AtomEntryXPath,{activityUuid:"snx:activity",categoryFlagCompleted:"a:category[@term='completed']/@label",categoryFlagTemplate:"a:category[@term='template']/@label",categoryFlagDelete:"a:category[@term='deleted']/@label",authorLdapid:"a:author/snx:ldapid",contributorLdapid:"a:contributor/snx:ldapid",
type:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",priority:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/priority']/@label",coummunityUuid:"snx:communityUuid",communityUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container']/@href",dueDate:"snx:duedate",membersUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/member-list']/@href",historyUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/history']/@href",templatesUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/templates']/@href",
position:"snx:position",depth:"snx:depth",permissions:"snx:permissions",iconUrl:"snx:icon",tags:"a:category[not(@scheme)]/@term",inReplyToId:"thr:in-reply-to/@ref",inReplyToUrl:"thr:in-reply-to/@href",inReplyToActivity:"thr:in-reply-to/snx:activity",assignedToName:"snx:assignedto/@name",assignedToUserId:"snx:assignedto/@userid",assignedToEmail:"snx:assignedto",textFields:"snx:field[@type='text']",linkFields:"snx:field[@type='link']",personFields:"snx:field[@type='person']",dateFields:"snx:field[@type='date']",
fileFields:"snx:field[@type='file']"}),TagXPath:{term:"@term",frequency:"@snx:frequency",entries:"app:categories/a:category",uid:"@term",bin:"@snx:bin"},MemberXPath:i.mixin({},h.AtomEntryXPath,{entry:"a:feed/a:entry",id:"a:id",uid:"a:id",role:"snx:role",permissions:"snx:permissions",category:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term"}),AtomActivitiesEverything:"/${activities}/service/atom2/everything",AtomActivitiesMy:"${activities}/service/atom2/activities",AtomActivitiesTrash:"${activities}/service/atom2/trash",
AtomActivitiesCompleted:"${activities}/service/atom2/completed",AtomActivityNode:"${activities}/service/atom2/activitynode",AtomActivityNodes:"${activities}/service/atom2/descendants",AtomActivityNodeTrash:"${activities}/service/atom2/trashednode",AtomCreateActivityNode:"${activities}/service/atom2/activity",AtomActivitiesToDos:"${activities}/service/atom2/todos",AtomActivitiesMembers:"${activities}/service/atom2/acl",AtomActivitiesMember:"${activities}/service/atom2/acl?activityUuid={activityUuid}&amp;memberid={memberId}",
AtomActivitiesTags:"${activities}/service/atom2/tags"})})},"sbt/text":function(){define(["./_bridge/text"],function(i){return i})},"sbt/xsl":function(){define(["./Cache","./xml","./lang"],function(i,h,c){return{xsltTransform:function(d,b){if(!d)return null;c.isString(d)&&(d=h.parse(sbt.cache.get(d)));if(!b)return c.clone(d);b=sbt.cache.get(b);if(window.ActiveXObject)return d.transformNode(b);if(document.implementation&&document.implementation.createDocument){var a=new XSLTProcessor;a.importStyleSheet(b);
return a.transformToFragment(d,document)}return c.clone(d)}}})},"sbt/xpath":function(){define(["./declare"],function(i){var h=i(null,{ie:!1,constructor:function(c,d){this.xpath=c;this.nsArray=d||{};if(!document.evaluate&&(this.ie=!0,this.nsString="",this.nsArray))for(var b in this.nsArray)this.nsString+=" xmlns:"+b+'="'+this.nsArray[b]+'"'},selectSingleNode:function(c){var d=c.ownerDocument||c;if(this.ie)try{d.setProperty("SelectionLanguage","XPath");d.setProperty("SelectionNamespaces",this.nsString);
if(c===d)c=d.documentElement;return c.selectSingleNode(this.xpath)}catch(b){throw"XPath is not supported";}else{var a=this;if(c.documentElement)c=c.documentElement;return d.evaluate(this.xpath,c,function(b){return a.nsArray[b]},XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}},selectNumber:function(c){var d=c.ownerDocument||c;if(this.ie)return this.selectText(c);var b=this;return d.evaluate(this.xpath,c,function(a){return b.nsArray[a]},XPathResult.NUMBER_TYPE,null).numberValue},selectNodes:function(c){var d=
c.ownerDocument||c;if(this.ie)try{d.setProperty("SelectionLanguage","XPath");d.setProperty("SelectionNamespaces",this.nsString);if(c===d)c=d.documentElement;return c.selectNodes(this.xpath)}catch(b){throw"XPath is not supported";}else{for(var a=this,c=d.evaluate(this.xpath,c,function(b){return a.nsArray[b]},XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),d=[],g=0;g<c.snapshotLength;g++)d.push(c.snapshotItem(g));return d}},selectText:function(c){return(c=this.selectSingleNode(c))?c.text||c.textContent:
null}});return{selectNodes:function(c,d,b){return(new h(d,b)).selectNodes(c)},selectSingleNode:function(c,d,b){return(new h(d,b)).selectSingleNode(c)},selectText:function(c,d,b){return(new h(d,b)).selectText(c)},selectNumber:function(c,d,b){return(new h(d,b)).selectNumber(c)}}})},"sbt/WPSProxy":function(){define(["./declare","./lang","./pathUtil"],function(i,h,c){return i(null,{proxyUrl:null,constructor:function(c){h.mixin(this,c)},rewriteUrl:function(d,b){if(this.proxyUrl){0==b.indexOf("http://")?
b.substring(7):0==b.indexOf("https://")&&b.substring(8);0==d.indexOf("http://")?d="/http/"+d.substring(7):0==d.indexOf("https://")&&(d="/https/"+d.substring(8));var a=c.concat(this.proxyUrl,d);return a=c.concat(a,b)}return b}})})},"sbt/config":function(){define(["./defer!./_config"],function(i){return i})},"sbt/base/BaseConstants":function(){define(["../config"],function(){return{sbtErrorCodes:{badRequest:400},Namespaces:{o:"http://ns.opensocial.org/2008/opensocial",app:"http://www.w3.org/2007/app",
thr:"http://purl.org/syndication/thread/1.0",fh:"http://purl.org/syndication/history/1.0",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/",a:"http://www.w3.org/2005/Atom",h:"http://www.w3.org/1999/xhtml",td:"urn:ibm.com/td",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",ibmsc:"http://www.ibm.com/search/content/2010",xhtml:"http://www.w3.org/1999/xhtml",spelling:"http://a9.com/-/opensearch/extensions/spelling/1.0/",ca:"http://www.ibm.com/xmlns/prod/composite-applications/v1.0 namespace"},
AtomFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},AtomEntryXPath:{entry:"/a:entry",uid:"a:id",id:"a:id",title:"a:title",updated:"a:updated",published:"a:published",authorName:"a:author/a:name",authorEmail:"a:author/a:email",authorUserid:"a:author/snx:userid",authorUserState:"a:author/snx:userState",contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email",
contributorUserid:"a:contributor/snx:userid",contributorUserState:"a:contributor/snx:userState",content:"a:content[@type='html']",summary:"a:summary[@type='text']",categoryTerm:"a:category/@term",editUrl:"a:link[@rel='edit']/@href",selfUrl:"a:link[@rel='self']/@href",alternateUrl:"a:link[@rel='alternate']/@href",tags:"./a:category[not(@scheme)]/@term"},AtomXmlHeaders:{"Content-Type":"application/atom+xml"}}})},"sbt/xml":function(){define(["./lang"],function(i){var h={"&":"&amp;",'"':"&quot;","<":"&lt;",
">":"&gt;"},c={"&amp;":"&","&quot;":'"',"&lt;":"<","&gt;":">"};return{parse:function(c){var b=null;try{document.evaluate?window.DOMParser&&(parser=new DOMParser,b=parser.parseFromString(c,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(c))}catch(a){console.log(a.message)}return b},asString:function(c){return null==c?"":window.ActiveXObject?c.xml:(new XMLSerializer).serializeToString(c)},getText:function(c){return document.evaluate?c.textContent:c.text},encodeXmlEntry:function(c){i.isArray(c)&&
(c=c.join());i.isString(c)||(c=c.toString());return c.replace(/([\&"<>])/g,function(b,a){return h[a]})},decodeXmlEntry:function(d){return d.replace(/(&quot;|&lt;|&gt;|&amp;)/g,function(b,a){return c[a]})}}})},"sbt/entities":function(){define(["./lang"],function(){var i={},h=function(c,b){var a,g;if(b._encCache&&b._encCache.regexp&&b._encCache.mapper&&b.length==b._encCache.length)a=b._encCache.mapper,g=b._encCache.regexp;else{a={};g=["["];var h;for(h=0;h<b.length;h++)a[b[h][0]]="&"+b[h][1]+";",g.push(b[h][0]);
g.push("]");g=RegExp(g.join(""),"g");b._encCache={mapper:a,regexp:g,length:b.length}}return c=c.replace(g,function(b){return a[b]})},c=function(c,b){var a,g;if(b._decCache&&b._decCache.regexp&&b._decCache.mapper&&b.length==b._decCache.length)a=b._decCache.mapper,g=b._decCache.regexp;else{a={};g=["("];var h;for(h=0;h<b.length;h++){var i="&"+b[h][1]+";";h&&g.push("|");a[i]=b[h][0];g.push(i)}g.push(")");g=RegExp(g.join(""),"g");b._decCache={mapper:a,regexp:g,length:b.length}}return c=c.replace(g,function(b){return a[b]})};
i.html=[["&","amp"],['"',"quot"],["<","lt"],[">","gt"],["\u00a0","nbsp"]];i.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],
["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1",
"Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb",
"euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],
["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],
["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c",
"real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],
["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],
["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","Elig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],
["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];i.encode=function(c,b){c&&(b?c=h(c,b):(c=h(c,i.html),c=h(c,i.latin)));return c};i.decode=function(d,b){d&&(b?d=c(d,b):(d=c(d,i.html),d=c(d,i.latin)));return d};return i})},"sbt/smartcloud/ProfileService":function(){define("../declare,../lang,../config,../stringUtil,../Cache,./Subscriber,../Jsonpath,../base/BaseService,../base/JsonDataHandler,./ProfileConstants,../base/BaseEntity,../Promise".split(","),
function(i,h,c,d,b,a,g,j,k,o,p,m){var n=i(p,{constructor:function(){},load:function(a){var b=this.getId(),c=this.service._validateProfileId(b);if(c)return c;c={};c.userid=b;h.mixin(c,a||{format:"json"});return this.service.getEntity(consts.GetProfile,{handleAs:"json",query:c},b,{createEntity:function(a,b){return new k({data:b,jsonpath:o.ProfileJsonPath})}},a)},getId:function(){return this.getAsString("id")},getUserid:function(){return this.getAsString("id")},getObjectId:function(){return this.getAsString("objectId")},
getDisplayName:function(){return this.getAsString("displayName")},getName:function(){return this.getAsString("displayName")},getEmail:function(){return this.getAsString("emailAddress")},getThumbnailUrl:function(){var a=this.getAsString("thumbnailUrl");a&&(a=this.service.endpoint.baseUrl+"/contacts/img/photos/"+a);return a},getAddress:function(){var a=this.getAsArray("address");return a=this.dataHandler.extractFirstElement(a)},getDepartment:function(){return this.getAsString("department")},getJobTitle:function(){return this.getAsString("jobTitle")},
getProfileUrl:function(){return this.getAsString("profileUrl")},getTelephoneNumber:function(){return this.getAsString("telephone")},getCountry:function(){return this.getAsString("country")},getOrgId:function(){return this.getAsString("orgId")},getOrg:function(){return this.getAsString("org")},getAbout:function(){return this.getAsString("about")}}),e={createEntity:function(a,b){var c=new k({data:b,jsonpath:o.ProfileJsonPath});return new n({service:a,id:c.getEntityId(),dataHandler:c})}},r={createEntities:function(a,
b){return new k({data:b,jsonpath:o.ProfileJsonPath})},createEntity:function(a,b){var c=new k({data:b,jsonpath:o.ProfileJsonPath});return new n({service:a,id:c.getEntityId(),dataHandler:c})}};return i(j,{_profiles:null,constructor:function(){if(!this.endpoint)this.endpoint=c.findEndpoint(this.getDefaultEndpointName());if(!this._cache&&(c.Properties.ProfileCacheSize||o.DefaultCacheSize))this._cache=new b(c.Properties.ProfileCacheSize||o.DefaultCacheSize)},getDefaultEndpointName:function(){return"smartcloud"},
getProfile:function(a,b){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;h.mixin(c,b||{format:"json"});d={method:"GET",handleAs:"json",query:b||{format:"json"}};c=encodeURIComponent(c.userid);return this.getEntity(this.constructUrl(o.GetProfileByGUID,{},{idToBeReplaced:c}),d,c,this.getProfileCallbacks())},getProfileByGUID:function(a,b){return this.getProfile(a,b)},getMyProfile:function(a){var b=this,c=o.GetUserIdentity,d=new m;this.endpoint.request(c,{handleAs:"json"}).then(function(c){var e=
b._toIdObject(c.subscriberid);if(c=b._validateIdObject(e))return c;var c={method:"GET",handleAs:"json",query:h.mixin(e,a||{format:"json"})},e=encodeURIComponent(e.userid),g=b.constructUrl(o.GetProfileByGUID,{},{idToBeReplaced:e});b.getEntity(g,c,e,b.getProfileCallbacks()).then(function(a){d.fulfilled(a)},function(a){d.rejected(a)})},function(a){d.rejected(a)});return d},getContact:function(a,b){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;d={method:"GET",handleAs:"json",query:h.mixin(c,
b||{format:"json"})};c=c.userid;return this.getEntity(this.constructUrl(o.GetContactByGUID,{},{idToBeReplaced:c}),d,c,this.getProfileCallbacks())},getContactByGUID:function(a,b){return this.getContact(a,b)},getMyConnections:function(a){return this.getEntities(o.GetMyConnections,{method:"GET",handleAs:"json",query:a||{format:"json"}},this.getProfileFeedCallbacks())},getMyContacts:function(a){return this.getEntities(o.GetMyContacts,{method:"GET",handleAs:"json",query:a||{format:"json"}},this.getProfileFeedCallbacks())},
getMyContactsByIndex:function(a,b,c){a={method:"GET",handleAs:"json",query:h.mixin({startIndex:a,count:b},c||{format:"json"})};return this.getEntities(o.GetMyContacts,a,this.getProfileFeedCallbacks())},getProfileCallbacks:function(){return e},getProfileFeedCallbacks:function(){return r},_toIdObject:function(a){var b={};if(h.isString(a))b.userid=a;else if(a instanceof n)b.userid=a.getUserid();return b},_validateIdObject:function(a){if(!a.userid)return this.createBadRequestPromise("Invalid argument, userid must be specified.")},
_validateProfileId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid")}})})},"sbt/connections/ProfileAdminService":function(){define("../declare,../lang,../config,../stringUtil,./ProfileConstants,../base/BaseService,../base/XmlDataHandler,./ProfileService".split(","),function(i,h,c,d,b,a,g,j){return i(j,{createProfile:function(a,c){var d=this._toProfile(a),g=this._validateProfile(d);if(g)return g;g={};d.getUserid()?g.userid=d.getUserid():g.email=
d.getEmail();h.mixin(g,c||{});g={method:"POST",query:g,headers:b.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(b.AdminAtomProfileDo,g,{createEntity:function(){return d}},c)},deleteProfile:function(a,c){var d=this._validateProfileId(a);if(d)return d;d={};this.isEmail(a)?d.email=a:d.userid=a;h.mixin(d,c||{});return this.deleteEntity(b.AdminAtomProfileEntryDo,{method:"DELETE",query:d,handleAs:"text"},a,c)}})})},"sbt/authenticator/GadgetOAuth":function(){define(["../declare","../lang"],
function(i,h){return i(null,{constructor:function(c){h.mixin(this,c||{})},authenticate:function(c){(new gadgets.oauth.Popup(c.error.response.oauthApprovalUrl,null,function(){},function(){})).createOpenerOnClick()}})})},"sbt/authenticator/OAuth":function(){define(["../declare","../lang","../util"],function(i,h,c){return i(null,{url:"",loginUi:"",constructor:function(c){h.mixin(this,c||{})},authenticate:function(c){var b=this;require(["sbt/config"],function(a){var g=c.loginUi||a.Properties.loginUi||
this.loginUi,h=a.Properties["login.oauth.width"]||800,a=a.Properties["login.oauth.height"]||450;return"popup"==g?b._authPopup(c,b.url,h,a):"dialog"==g?b._authDialog(c,b.url,h,a):b._authMainWindow(c,b.url)})},_authMainWindow:function(c,b){var a=b+"?oaredirect="+encodeURIComponent(window.location.href);newwindow=window.location.href=a;return!0},_authPopup:function(d,b,a,g){require(["sbt/config"],function(h){h.callback=d.callback;var h=b+"?loginUi=popup",i=c.createQuery({height:g,width:a},",");newwindow=
window.open(h,"Authentication",i);return!0})},_authDialog:function(c,b,a,g){require(["sbt/_bridge/ui/OAuthDialog"],function(c){c.show(b,a,g)});return!0}})})},"sbt/store/AtomStore":function(){define("../declare,../config,../lang,../base/core,../xml,../xpath,../itemFactory,../Promise,dojo/_base/Deferred,dojo/promise/Promise,dojo/store/util/QueryResults,../entities".split(","),function(i,h,c,d,b,a,g,j,k,o,p,m){var n=i(o,{_store:null,_isRejected:!1,_isFulfilled:!1,_isCancelled:!1,_callbacks:[],_errbacks:[],
_endpoint:null,_xmlData:null,totalResults:null,startIndex:0,itemsPerPage:5,items:null,url:"",sendQuery:!0,unescapeHTML:!1,atom:d.feedXPath,attributes:d.entryXPath,namespaces:d.namespaces,paramSchema:{},total:null,constructor:function(a,b,c){this._endpoint=h.findEndpoint(a.endpoint||"connections");this._options=c;this._callbacks=[];this._errbacks=[];this.total=new j;if(a)this.url=a.url,this.attributes=a.attributes||this.attributes,this.atom=a.feedXPath||this.atom,this.namespaces=a.namespaces||this.namespaces,
this.sendQuery=a.hasOwnProperty("sendQuery")?a.sendQuery:this.sendQuery,this.unescapeHTML=a.unescapeHTML||this.unescapeHTML,this.paramSchema=a.paramSchema||this.paramSchema;if(this.paramSchema.pageNumber)a=Math.floor(c.start/c.count)+1,b.pageNumber=b.pageNumber||a;if(this.paramSchema.startIndex)b.startIndex=b.startIndex||c.start;if(this.paramSchema.pageSize)b.pageSize=b.pageSize||c.count;if(c.sort&&c.sort[0]){if(c.sort[0].attribute)b.sortBy=c.sort[0].attribute;if(!0===c.sort[0].descending)b.sortOrder=
"desc";else if(!1===c.sort[0].descending)b.sortOrder="asc"}this._doFetch({query:b})},then:function(a,b){this._isFulfilled?a(this.items):(a&&this._callbacks.push(a),b&&this._errbacks.push(b))},cancel:function(){this._isCancelled=!0},isResolved:function(){return this._isRejected||this._isFulfilled},isRejected:function(){return this._isRejected},isFulfilled:function(){return this._isFulfilled},isCanceled:function(){return this._isCancelled},_doFetch:function(c){var d=this,g=this._getServiceUrl(c.query);
g?this._endpoint.xhrGet({serviceUrl:g,handleAs:"text",preventCache:!0,load:function(c){try{d.response=c,d._xmlData=b.parse(c),d.totalResults=parseInt(a.selectText(d._xmlData,d.atom.totalResults,d.namespaces)),d.startIndex=parseInt(a.selectText(d._xmlData,d.atom.startIndex,d.namespaces)),d.itemsPerPage=parseInt(a.selectText(d._xmlData,d.atom.itemsPerPage,d.namespaces)),d.items=d._createItems(d._xmlData),d._options.onComplete&&d._options.onComplete.call(d._options.scope||d,d.items,d._options),d.total.fulfilled(d.totalResults),
d._fulfilled(d.items)}catch(e){d.total._rejected(e),d._rejected(e)}},error:function(a){d.total._rejected(a);d._rejected(a)}}):c.onError&&c.onError.call(Error("sbt.store.AtomStore: No service URL specified."))},_getServiceUrl:function(a){if(!this.sendQuery||!a)return this.url;if(c.isString(a))return this.url+(~this.url.indexOf("?")?"&":"?")+a;var b=[],d=this.paramSchema,g;for(g in a)if(g in d){var h=d[g].format(a[g]);h&&b.push(h)}else b.push(encodeURIComponent(g)+"="+encodeURIComponent(a[g]));return 0==
b.length?this.url:this.url+(~this.url.indexOf("?")?"&":"?")+b.join("&")},_createQuery:function(a){if(!a)return null;var b=[],c;for(c in a){var d=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")},_createItems:function(b){for(var b=a.selectNodes(b,this.atom.entries,this.namespaces),c=[],d=0;d<b.length;d++)c.push(this._createItem(b[d]));return c},_createItem:function(b){for(var d=this._getAttributes(),g=/^count\(.*\)$/,h={element:b,getValue:function(a){var b=[];if("object"==
typeof this[a])for(var c=0;c<this[a].length;c++)b[c]=m.encode(this[a][c]);else b=m.encode(this[a]);return b}},i=0;i<d.length;i++){var f=d[i],j=this.attributes[f];if(c.isFunction(j))h[f]=j(this,h);else if(j.match(g))h[f]=a.selectNumber(b,j,this.namespaces)+"";else if((j=a.selectNodes(b,j,this.namespaces))&&1==j.length)h[f]=m.encode(j[0].text)||m.encode(j[0].textContent);else if(j){h[f]=[];for(var k=0;k<j.length;k++)h[f].push(m.encode(j[k].text)||m.encode(j[k].textContent))}else h[f]=null}return h},
_getAttributes:function(){var a=[],b;for(b in this.attributes)this.attributes.hasOwnProperty(b)&&a.push(b);return a},_fulfilled:function(a){if(!this._isCancelled)for(this._isFulfilled=!0;0<this._callbacks.length;)this._callbacks.shift()(a)},_rejected:function(a){if(!this._isCancelled)for(this._isRejected=!0;0<this._errbacks.length;)this._errbacks.shift()(a)}});return i(null,{idProperty:"id",_args:null,constructor:function(a){this._args=a},getEndpoint:function(){return h.findEndpoint(this._args.endpoint||
"connections")},get:function(){throw Error("sbt.store.AtomStore: Not implemented yet!");},getIdentity:function(a){return a.id},setUrl:function(a){this._args.url=a},getUrl:function(){return this._args.url},setAttributes:function(a){this._args.attributes=a},query:function(a,b){var c=new n(this._args,a,b);return p(c)}})})},"sbt/connections/nls/ConnectionsService":function(){define({root:{invalid_argument:"Invalid Argument"}})},"sbt/itemFactory":function(){define(["./lang","./xpath","./base/core"],function(i,
h,c){var d=/^count\(.*\)$/;return{createItems:function(b,a,d,i){var k=h.selectNodes(b,c.feedXPath.entry,c.namespaces),o=[];0==k.length&&(k=h.selectNodes(b,"a:entry",c.namespaces));for(b=0;b<k.length;b++)o.push(this.createItem(k[b],a,d,i));return o},createItem:function(b,a,g,j){for(var k={element:b,getValue:function(a){return this[a]}},o=this.getAttribs(a),p=0;p<o.length;p++){var m=o[p],n=a[m];if(i.isFunction(n))k[m]=n(g,k);else if(n.match(d))k[m]=h.selectNumber(b,n,c.namespaces);else if((n=h.selectNodes(b,
n,c.namespaces))&&1==n.length)k[m]=n[0].text||n[0].textContent;else if(n){k[m]=[];for(var e=0;e<n.length;e++)k[m].push(n[e].text||n[e].textContent)}else k[m]=null;k[m]=j?j.decode(k[m]):k[m]}return k},getAttribs:function(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a}}})},"sbt/compat":function(){define([],function(){if(!Array.prototype.indexOf)Array.prototype.indexOf=function(i,h){for(var c=h||0,d=this.length;c<d;c++)if(this[c]===i)return c;return-1};return{}})},"sbt/authenticator/nls/SSO":function(){define({root:{message_title:"ReAuthenticate",
message:"Authentication expired, Please login again."}})},"sbt/_bridge/dom":function(){define(["dojo/dom","dojo/_base/window","dojo/dom-construct","dojo/dom-class"],function(i,h,c,d){return{byId:function(b){return i.byId(b)},createTextNode:function(b){return h.doc.createTextNode(b)},create:function(b,a,d){return c.create(b,a,d)},destroy:function(b){return c.destroy(b)},toDom:function(b,a){return c.toDom(b,a)},removeAll:function(b){if(b=this.byId(b))for(;b.firstChild;)b.removeChild(b.firstChild);return b},
setText:function(b,a){if(b=this.byId(b))this.removeAll(b),b.appendChild(this.createTextNode(a));return b},setAttr:function(b,a,c){(b=this.byId(b))&&(c?b.setAttribute(a,c):b.removeAttribute(a));return b},addClass:function(b,a){return d.add(b,a)},removeClass:function(b,a){return d.remove(b,a)}}})},"sbt/connections/FollowService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./FollowConstants,./ConnectionsService,../base/AtomEntity,../base/XmlDataHandler".split(","),function(i,
h,c,d,b,a,g,j,k){var o=i(j,{xpath:a.FollowedResourceXPath,constructor:function(){},createEntryData:function(){var a,b=function(a){return a};a=""+d.transform('<category term="${getSource}" scheme="http://www.ibm.com/xmlns/prod/sn/source"></category>',this,b,this);a+=d.transform('<category term="${getResourceType}" scheme="http://www.ibm.com/xmlns/prod/sn/resource-type"></category>',this,b,this);this.getResourceId()&&(a+=d.transform('<category term="${getResourceId}" scheme="http://www.ibm.com/xmlns/prod/sn/resource-id"></category>',
this,b,this));return d.trim(a)},getFollowedResourceUuid:function(){var a=this.getAsString("followedResourceUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:follow:resource-")&&(a=a.substring(33,a.length));return a},setFollowedResourceUuid:function(a){return this.setAsString("followedResourceUuid",a)},getSource:function(){return this.getAsString("source")},setSource:function(a){return this.setAsString("source",a)},getResourceType:function(){return this.getAsString("resourceType")},setResourceType:function(a){return this.setAsString("resourceType",
a)},getResourceId:function(){return this.getAsString("resourceId")},setResourceId:function(a){return this.setAsString("resourceId",a)},getType:function(){return this.getAsString("categoryType")},setCategoryType:function(a){return this.setAsString("categoryType",a)},startFollowing:function(a){return this.service.startFollowing(this,a)},stopFollowing:function(a){return this.service.stopFollowing(this,a)}}),p={createEntities:function(b,c){return new k({service:b,data:c,namespaces:a.Namespaces,xpath:a.FollowedResourceFeedXPath})},
createEntity:function(a,b){return new o({service:a,data:b})}};return i(g,{contextRootMap:{activities:"activities",blogs:"blogs",communities:"communities",files:"files",forums:"forums",news:"news",profiles:"profiles",wikis:"wikis"},serviceName:"connections",constructor:function(){if(!this.endpoint)this.endpoint=h.findEndpoint(this.getDefaultEndpointName())},getFollowedResources:function(b,d,e){d={method:"GET",handleAs:"text",query:c.mixin({source:b,type:d},e||{})};e=null;e=this.constructUrl(a.AtomFollowAPI,
null,{service:this._getServiceName(b)});return this.getEntities(e,d,this._getFollowedResourceFeedCallbacks())},getFollowedResource:function(b,d){var e=this._toFollowedResource(b),g=this._validateFollowedResource(e,!1,d);if(g)return g;var g={method:"GET",handleAs:"text",query:c.mixin({source:e.getSource(),type:e.getResourceType(),resource:e.getResourceId()},d||{})},h=null,h=this.constructUrl(a.AtomFollowAPI,null,{service:this._getServiceName(e.getSource())});return this.getEntity(h,g,e.getResourceId(),
{createEntity:function(b,c){e.xpath=a.OneFollowedResourceXPath;e.setData(c);return e}})},startFollowing:function(b,c){var d=this._toFollowedResource(b),g=this._validateFollowedResource(d,!1,c);if(g)return g;var g={method:"POST",headers:a.AtomXmlHeaders,data:d.createPostData()},h=null,h=this.constructUrl(a.AtomFollowAPI,null,{service:this._getServiceName(d.getSource())});return this.updateEntity(h,g,{createEntity:function(a,b){d.setData(b);return d}})},stopFollowing:function(b,d){var e=this._toFollowedResource(b),
g=this._validateFollowedResource(e,!0);if(g)return g;g=c.mixin({source:e.getSource(),type:e.getResourceType(),resource:e.getResourceId()},d||{});g={method:"DELETE",headers:a.AtomXmlHeaders,query:g};return this.deleteEntity(this.constructUrl(a.AtomStopFollowAPI,null,{service:this._getServiceName(e.getSource()),resourceId:e.getFollowedResourceUuid()}),g,e.getResourceId())},newFollowedResource:function(a){return this._toFollowedResource(a)},_getFollowedResourceFeedCallbacks:function(){return p},_validateFollowedResource:function(a,
b){if(!a||!a.getSource())return this.createBadRequestPromise("Invalid argument, resource with source must be specified.");if(!a.getResourceType())return this.createBadRequestPromise("Invalid argument, resource with resource yype must be specified.");if(!a.getResourceId())return this.createBadRequestPromise("Invalid argument, resource with resource id must be specified.");if(b&&!a.getFollowedResourceUuid())return this.createBadRequestPromise("Invalid argument, resource with UUID must be specified.")},
_validateFollowedResourceUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected followedResourceUuid.")},_toFollowedResource:function(a){if(a instanceof o)return a;c.isString(a)&&(a={followedResourceUuid:a});return new o({service:this,_fields:c.mixin({},a)})},_getServiceName:function(a){var b=this.contextRootMap,c;for(c in b)if(a==c)return b[c];return""}})})}}});define([],1);